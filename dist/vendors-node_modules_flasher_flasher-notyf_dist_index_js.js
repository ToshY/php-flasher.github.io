"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_flasher_flasher-notyf_dist_index_js"],{

/***/ "./node_modules/@flasher/flasher-notyf/dist/index.js":
/*!***********************************************************!*\
  !*** ./node_modules/@flasher/flasher-notyf/dist/index.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {



var flasher = __webpack_require__(/*! @flasher/flasher */ "./node_modules/@flasher/flasher/dist/index.js");

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var flasher__default = /*#__PURE__*/_interopDefaultLegacy(flasher);

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

var __assign$1 = function() {
    __assign$1 = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign$1.apply(this, arguments);
};

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var NotyfNotification = /** @class */ (function () {
    function NotyfNotification(options) {
        this.options = options;
        this.listeners = {};
    }
    NotyfNotification.prototype.on = function (eventType, cb) {
        var callbacks = this.listeners[eventType] || [];
        this.listeners[eventType] = callbacks.concat([cb]);
    };
    NotyfNotification.prototype.triggerEvent = function (eventType, event) {
        var _this = this;
        var callbacks = this.listeners[eventType] || [];
        callbacks.forEach(function (cb) { return cb({ target: _this, event: event }); });
    };
    return NotyfNotification;
}());
var NotyfArrayEvent;
(function (NotyfArrayEvent) {
    NotyfArrayEvent[NotyfArrayEvent["Add"] = 0] = "Add";
    NotyfArrayEvent[NotyfArrayEvent["Remove"] = 1] = "Remove";
})(NotyfArrayEvent || (NotyfArrayEvent = {}));
var NotyfArray = /** @class */ (function () {
    function NotyfArray() {
        this.notifications = [];
    }
    NotyfArray.prototype.push = function (elem) {
        this.notifications.push(elem);
        this.updateFn(elem, NotyfArrayEvent.Add, this.notifications);
    };
    NotyfArray.prototype.splice = function (index, num) {
        var elem = this.notifications.splice(index, num)[0];
        this.updateFn(elem, NotyfArrayEvent.Remove, this.notifications);
        return elem;
    };
    NotyfArray.prototype.indexOf = function (elem) {
        return this.notifications.indexOf(elem);
    };
    NotyfArray.prototype.onUpdate = function (fn) {
        this.updateFn = fn;
    };
    return NotyfArray;
}());

var NotyfEvent;
(function (NotyfEvent) {
    NotyfEvent["Dismiss"] = "dismiss";
    NotyfEvent["Click"] = "click";
})(NotyfEvent || (NotyfEvent = {}));
var DEFAULT_OPTIONS = {
    types: [
        {
            type: 'success',
            className: 'notyf__toast--success',
            backgroundColor: '#3dc763',
            icon: {
                className: 'notyf__icon--success',
                tagName: 'i',
            },
        },
        {
            type: 'error',
            className: 'notyf__toast--error',
            backgroundColor: '#ed3d3d',
            icon: {
                className: 'notyf__icon--error',
                tagName: 'i',
            },
        },
    ],
    duration: 2000,
    ripple: true,
    position: {
        x: 'right',
        y: 'bottom',
    },
    dismissible: false,
};

var NotyfView = /** @class */ (function () {
    function NotyfView() {
        this.notifications = [];
        this.events = {};
        this.X_POSITION_FLEX_MAP = {
            left: 'flex-start',
            center: 'center',
            right: 'flex-end',
        };
        this.Y_POSITION_FLEX_MAP = {
            top: 'flex-start',
            center: 'center',
            bottom: 'flex-end',
        };
        // Creates the main notifications container
        var docFrag = document.createDocumentFragment();
        var notyfContainer = this._createHTMLElement({ tagName: 'div', className: 'notyf' });
        docFrag.appendChild(notyfContainer);
        document.body.appendChild(docFrag);
        this.container = notyfContainer;
        // Identifies the main animation end event
        this.animationEndEventName = this._getAnimationEndEventName();
        this._createA11yContainer();
    }
    NotyfView.prototype.on = function (event, cb) {
        var _a;
        this.events = __assign(__assign({}, this.events), (_a = {}, _a[event] = cb, _a));
    };
    NotyfView.prototype.update = function (notification, type) {
        if (type === NotyfArrayEvent.Add) {
            this.addNotification(notification);
        }
        else if (type === NotyfArrayEvent.Remove) {
            this.removeNotification(notification);
        }
    };
    NotyfView.prototype.removeNotification = function (notification) {
        var _this = this;
        var renderedNotification = this._popRenderedNotification(notification);
        var node;
        if (!renderedNotification) {
            return;
        }
        node = renderedNotification.node;
        node.classList.add('notyf__toast--disappear');
        var handleEvent;
        node.addEventListener(this.animationEndEventName, (handleEvent = function (event) {
            if (event.target === node) {
                node.removeEventListener(_this.animationEndEventName, handleEvent);
                _this.container.removeChild(node);
            }
        }));
    };
    NotyfView.prototype.addNotification = function (notification) {
        var node = this._renderNotification(notification);
        this.notifications.push({ notification: notification, node: node });
        // For a11y purposes, we still want to announce that there's a notification in the screen
        // even if it comes with no message.
        this._announce(notification.options.message || 'Notification');
    };
    NotyfView.prototype._renderNotification = function (notification) {
        var _a;
        var card = this._buildNotificationCard(notification);
        var className = notification.options.className;
        if (className) {
            (_a = card.classList).add.apply(_a, className.split(' '));
        }
        this.container.appendChild(card);
        return card;
    };
    NotyfView.prototype._popRenderedNotification = function (notification) {
        var idx = -1;
        for (var i = 0; i < this.notifications.length && idx < 0; i++) {
            if (this.notifications[i].notification === notification) {
                idx = i;
            }
        }
        if (idx !== -1) {
            return this.notifications.splice(idx, 1)[0];
        }
        return;
    };
    NotyfView.prototype.getXPosition = function (options) {
        var _a;
        return ((_a = options === null || options === void 0 ? void 0 : options.position) === null || _a === void 0 ? void 0 : _a.x) || 'right';
    };
    NotyfView.prototype.getYPosition = function (options) {
        var _a;
        return ((_a = options === null || options === void 0 ? void 0 : options.position) === null || _a === void 0 ? void 0 : _a.y) || 'bottom';
    };
    NotyfView.prototype.adjustContainerAlignment = function (options) {
        var align = this.X_POSITION_FLEX_MAP[this.getXPosition(options)];
        var justify = this.Y_POSITION_FLEX_MAP[this.getYPosition(options)];
        var style = this.container.style;
        style.setProperty('justify-content', justify);
        style.setProperty('align-items', align);
    };
    NotyfView.prototype._buildNotificationCard = function (notification) {
        var _this = this;
        var options = notification.options;
        var iconOpts = options.icon;
        // Adjust container according to position (e.g. top-left, bottom-center, etc)
        this.adjustContainerAlignment(options);
        // Create elements
        var notificationElem = this._createHTMLElement({ tagName: 'div', className: 'notyf__toast' });
        var ripple = this._createHTMLElement({ tagName: 'div', className: 'notyf__ripple' });
        var wrapper = this._createHTMLElement({ tagName: 'div', className: 'notyf__wrapper' });
        var message = this._createHTMLElement({ tagName: 'div', className: 'notyf__message' });
        message.innerHTML = options.message || '';
        var mainColor = options.background || options.backgroundColor;
        // Build the icon and append it to the card
        if (iconOpts) {
            var iconContainer = this._createHTMLElement({ tagName: 'div', className: 'notyf__icon' });
            if (typeof iconOpts === 'string' || iconOpts instanceof String)
                iconContainer.innerHTML = new String(iconOpts).valueOf();
            if (typeof iconOpts === 'object') {
                var _a = iconOpts.tagName, tagName = _a === void 0 ? 'i' : _a, className_1 = iconOpts.className, text = iconOpts.text, _b = iconOpts.color, color = _b === void 0 ? mainColor : _b;
                var iconElement = this._createHTMLElement({ tagName: tagName, className: className_1, text: text });
                if (color)
                    iconElement.style.color = color;
                iconContainer.appendChild(iconElement);
            }
            wrapper.appendChild(iconContainer);
        }
        wrapper.appendChild(message);
        notificationElem.appendChild(wrapper);
        // Add ripple if applicable, else just paint the full toast
        if (mainColor) {
            if (options.ripple) {
                ripple.style.background = mainColor;
                notificationElem.appendChild(ripple);
            }
            else {
                notificationElem.style.background = mainColor;
            }
        }
        // Add dismiss button
        if (options.dismissible) {
            var dismissWrapper = this._createHTMLElement({ tagName: 'div', className: 'notyf__dismiss' });
            var dismissButton = this._createHTMLElement({
                tagName: 'button',
                className: 'notyf__dismiss-btn',
            });
            dismissWrapper.appendChild(dismissButton);
            wrapper.appendChild(dismissWrapper);
            notificationElem.classList.add("notyf__toast--dismissible");
            dismissButton.addEventListener('click', function (event) {
                var _a, _b;
                (_b = (_a = _this.events)[NotyfEvent.Dismiss]) === null || _b === void 0 ? void 0 : _b.call(_a, { target: notification, event: event });
                event.stopPropagation();
            });
        }
        notificationElem.addEventListener('click', function (event) { var _a, _b; return (_b = (_a = _this.events)[NotyfEvent.Click]) === null || _b === void 0 ? void 0 : _b.call(_a, { target: notification, event: event }); });
        // Adjust margins depending on whether its an upper or lower notification
        var className = this.getYPosition(options) === 'top' ? 'upper' : 'lower';
        notificationElem.classList.add("notyf__toast--" + className);
        return notificationElem;
    };
    NotyfView.prototype._createHTMLElement = function (_a) {
        var tagName = _a.tagName, className = _a.className, text = _a.text;
        var elem = document.createElement(tagName);
        if (className) {
            elem.className = className;
        }
        elem.textContent = text || null;
        return elem;
    };
    /**
     * Creates an invisible container which will announce the notyfs to
     * screen readers
     */
    NotyfView.prototype._createA11yContainer = function () {
        var a11yContainer = this._createHTMLElement({ tagName: 'div', className: 'notyf-announcer' });
        a11yContainer.setAttribute('aria-atomic', 'true');
        a11yContainer.setAttribute('aria-live', 'polite');
        // Set the a11y container to be visible hidden. Can't use display: none as
        // screen readers won't read it.
        a11yContainer.style.border = '0';
        a11yContainer.style.clip = 'rect(0 0 0 0)';
        a11yContainer.style.height = '1px';
        a11yContainer.style.margin = '-1px';
        a11yContainer.style.overflow = 'hidden';
        a11yContainer.style.padding = '0';
        a11yContainer.style.position = 'absolute';
        a11yContainer.style.width = '1px';
        a11yContainer.style.outline = '0';
        document.body.appendChild(a11yContainer);
        this.a11yContainer = a11yContainer;
    };
    /**
     * Announces a message to screenreaders.
     */
    NotyfView.prototype._announce = function (message) {
        var _this = this;
        this.a11yContainer.textContent = '';
        // This 100ms timeout is necessary for some browser + screen-reader combinations:
        // - Both JAWS and NVDA over IE11 will not announce anything without a non-zero timeout.
        // - With Chrome and IE11 with NVDA or JAWS, a repeated (identical) message won't be read a
        //   second time without clearing and then using a non-zero delay.
        // (using JAWS 17 at time of this writing).
        // https://github.com/angular/material2/blob/master/src/cdk/a11y/live-announcer/live-announcer.ts
        setTimeout(function () {
            _this.a11yContainer.textContent = message;
        }, 100);
    };
    /**
     * Determine which animationend event is supported
     */
    NotyfView.prototype._getAnimationEndEventName = function () {
        var el = document.createElement('_fake');
        var transitions = {
            MozTransition: 'animationend',
            OTransition: 'oAnimationEnd',
            WebkitTransition: 'webkitAnimationEnd',
            transition: 'animationend',
        };
        var t;
        for (t in transitions) {
            if (el.style[t] !== undefined) {
                return transitions[t];
            }
        }
        // No supported animation end event. Using "animationend" as a fallback
        return 'animationend';
    };
    return NotyfView;
}());

/**
 * Main controller class. Defines the main Notyf API.
 */
var Notyf = /** @class */ (function () {
    function Notyf(opts) {
        var _this = this;
        this.dismiss = this._removeNotification;
        this.notifications = new NotyfArray();
        this.view = new NotyfView();
        var types = this.registerTypes(opts);
        this.options = __assign(__assign({}, DEFAULT_OPTIONS), opts);
        this.options.types = types;
        this.notifications.onUpdate(function (elem, type) { return _this.view.update(elem, type); });
        this.view.on(NotyfEvent.Dismiss, function (_a) {
            var target = _a.target, event = _a.event;
            _this._removeNotification(target);
            // tslint:disable-next-line: no-string-literal
            target['triggerEvent'](NotyfEvent.Dismiss, event);
        });
        // tslint:disable-next-line: no-string-literal
        this.view.on(NotyfEvent.Click, function (_a) {
            var target = _a.target, event = _a.event;
            return target['triggerEvent'](NotyfEvent.Click, event);
        });
    }
    Notyf.prototype.error = function (payload) {
        var options = this.normalizeOptions('error', payload);
        return this.open(options);
    };
    Notyf.prototype.success = function (payload) {
        var options = this.normalizeOptions('success', payload);
        return this.open(options);
    };
    Notyf.prototype.open = function (options) {
        var defaultOpts = this.options.types.find(function (_a) {
            var type = _a.type;
            return type === options.type;
        }) || {};
        var config = __assign(__assign({}, defaultOpts), options);
        this.assignProps(['ripple', 'position', 'dismissible'], config);
        var notification = new NotyfNotification(config);
        this._pushNotification(notification);
        return notification;
    };
    Notyf.prototype.dismissAll = function () {
        while (this.notifications.splice(0, 1))
            ;
    };
    /**
     * Assigns properties to a config object based on two rules:
     * 1. If the config object already sets that prop, leave it as so
     * 2. Otherwise, use the default prop from the global options
     *
     * It's intended to build the final config object to open a notification. e.g. if
     * 'dismissible' is not set, then use the value from the global config.
     *
     * @param props - properties to be assigned to the config object
     * @param config - object whose properties need to be set
     */
    Notyf.prototype.assignProps = function (props, config) {
        var _this = this;
        props.forEach(function (prop) {
            // intentional double equality to check for both null and undefined
            config[prop] = config[prop] == null ? _this.options[prop] : config[prop];
        });
    };
    Notyf.prototype._pushNotification = function (notification) {
        var _this = this;
        this.notifications.push(notification);
        var duration = notification.options.duration !== undefined ? notification.options.duration : this.options.duration;
        if (duration) {
            setTimeout(function () { return _this._removeNotification(notification); }, duration);
        }
    };
    Notyf.prototype._removeNotification = function (notification) {
        var index = this.notifications.indexOf(notification);
        if (index !== -1) {
            this.notifications.splice(index, 1);
        }
    };
    Notyf.prototype.normalizeOptions = function (type, payload) {
        var options = { type: type };
        if (typeof payload === 'string') {
            options.message = payload;
        }
        else if (typeof payload === 'object') {
            options = __assign(__assign({}, options), payload);
        }
        return options;
    };
    Notyf.prototype.registerTypes = function (opts) {
        var incomingTypes = ((opts && opts.types) || []).slice();
        var finalDefaultTypes = DEFAULT_OPTIONS.types.map(function (defaultType) {
            // find if there's a default type within the user input's types, if so, it means the user
            // wants to change some of the default settings
            var userTypeIdx = -1;
            incomingTypes.forEach(function (t, idx) {
                if (t.type === defaultType.type)
                    userTypeIdx = idx;
            });
            var userType = userTypeIdx !== -1 ? incomingTypes.splice(userTypeIdx, 1)[0] : {};
            return __assign(__assign({}, defaultType), userType);
        });
        return finalDefaultTypes.concat(incomingTypes);
    };
    return Notyf;
}());

var e=[],t=[];function n(n,r){if(n&&"undefined"!=typeof document){var a,s=!0===r.prepend?"prepend":"append",d=!0===r.singleTag,i="string"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName("head")[0];if(d){var u=e.indexOf(i);-1===u&&(u=e.push(i)-1,t[u]={}),a=t[u]&&t[u][s]?t[u][s]:t[u][s]=c();}else a=c();65279===n.charCodeAt(0)&&(n=n.substring(1)),a.styleSheet?a.styleSheet.cssText+=n:a.appendChild(document.createTextNode(n));}function c(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var a="prepend"===s?"afterbegin":"beforeend";return i.insertAdjacentElement(a,e),e}}

var css = "@-webkit-keyframes notyf-fadeinup{0%{opacity:0;transform:translateY(25%)}to{opacity:1;transform:translateY(0)}}@keyframes notyf-fadeinup{0%{opacity:0;transform:translateY(25%)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes notyf-fadeinleft{0%{opacity:0;transform:translateX(25%)}to{opacity:1;transform:translateX(0)}}@keyframes notyf-fadeinleft{0%{opacity:0;transform:translateX(25%)}to{opacity:1;transform:translateX(0)}}@-webkit-keyframes notyf-fadeoutright{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(25%)}}@keyframes notyf-fadeoutright{0%{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(25%)}}@-webkit-keyframes notyf-fadeoutdown{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(25%)}}@keyframes notyf-fadeoutdown{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(25%)}}@-webkit-keyframes ripple{0%{transform:scale(0) translateY(-45%) translateX(13%)}to{transform:scale(1) translateY(-45%) translateX(13%)}}@keyframes ripple{0%{transform:scale(0) translateY(-45%) translateX(13%)}to{transform:scale(1) translateY(-45%) translateX(13%)}}.notyf{position:fixed;top:0;left:0;height:100%;width:100%;color:#fff;z-index:9999;display:flex;flex-direction:column;align-items:flex-end;justify-content:flex-end;pointer-events:none;box-sizing:border-box;padding:20px}.notyf__icon--error,.notyf__icon--success{height:21px;width:21px;background:#fff;border-radius:50%;display:block;margin:0 auto;position:relative}.notyf__icon--error:after,.notyf__icon--error:before{content:\"\";background:currentColor;display:block;position:absolute;width:3px;border-radius:3px;left:9px;height:12px;top:5px}.notyf__icon--error:after{transform:rotate(-45deg)}.notyf__icon--error:before{transform:rotate(45deg)}.notyf__icon--success:after,.notyf__icon--success:before{content:\"\";background:currentColor;display:block;position:absolute;width:3px;border-radius:3px}.notyf__icon--success:after{height:6px;transform:rotate(-45deg);top:9px;left:6px}.notyf__icon--success:before{height:11px;transform:rotate(45deg);top:5px;left:10px}.notyf__toast{display:block;overflow:hidden;pointer-events:auto;-webkit-animation:notyf-fadeinup .3s ease-in forwards;animation:notyf-fadeinup .3s ease-in forwards;box-shadow:0 3px 7px 0 rgba(0,0,0,.25);position:relative;padding:0 15px;border-radius:2px;max-width:300px;transform:translateY(25%);box-sizing:border-box;flex-shrink:0}.notyf__toast--disappear{transform:translateY(0);-webkit-animation:notyf-fadeoutdown .3s forwards;animation:notyf-fadeoutdown .3s forwards;-webkit-animation-delay:.25s;animation-delay:.25s}.notyf__toast--disappear .notyf__icon,.notyf__toast--disappear .notyf__message{-webkit-animation:notyf-fadeoutdown .3s forwards;animation:notyf-fadeoutdown .3s forwards;opacity:1;transform:translateY(0)}.notyf__toast--disappear .notyf__dismiss{-webkit-animation:notyf-fadeoutright .3s forwards;animation:notyf-fadeoutright .3s forwards;opacity:1;transform:translateX(0)}.notyf__toast--disappear .notyf__message{-webkit-animation-delay:.05s;animation-delay:.05s}.notyf__toast--upper{margin-bottom:20px}.notyf__toast--lower{margin-top:20px}.notyf__toast--dismissible .notyf__wrapper{padding-right:30px}.notyf__ripple{height:400px;width:400px;position:absolute;transform-origin:bottom right;right:0;top:0;border-radius:50%;transform:scale(0) translateY(-51%) translateX(13%);z-index:5;-webkit-animation:ripple .4s ease-out forwards;animation:ripple .4s ease-out forwards}.notyf__wrapper{display:flex;align-items:center;padding-top:17px;padding-bottom:17px;padding-right:15px;border-radius:3px;position:relative;z-index:10}.notyf__icon{width:22px;text-align:center;font-size:1.3em;opacity:0;-webkit-animation:notyf-fadeinup .3s forwards;animation:notyf-fadeinup .3s forwards;-webkit-animation-delay:.3s;animation-delay:.3s;margin-right:13px}.notyf__dismiss{position:absolute;top:0;right:0;height:100%;width:26px;margin-right:-15px;-webkit-animation:notyf-fadeinleft .3s forwards;animation:notyf-fadeinleft .3s forwards;-webkit-animation-delay:.35s;animation-delay:.35s;opacity:0}.notyf__dismiss-btn{background-color:rgba(0,0,0,.25);border:none;cursor:pointer;transition:opacity .2s ease,background-color .2s ease;outline:none;opacity:.35;height:100%;width:100%}.notyf__dismiss-btn:after,.notyf__dismiss-btn:before{content:\"\";background:#fff;height:12px;width:2px;border-radius:3px;position:absolute;left:calc(50% - 1px);top:calc(50% - 5px)}.notyf__dismiss-btn:after{transform:rotate(-45deg)}.notyf__dismiss-btn:before{transform:rotate(45deg)}.notyf__dismiss-btn:hover{opacity:.7;background-color:rgba(0,0,0,.15)}.notyf__dismiss-btn:active{opacity:.8}.notyf__message{vertical-align:middle;position:relative;opacity:0;-webkit-animation:notyf-fadeinup .3s forwards;animation:notyf-fadeinup .3s forwards;-webkit-animation-delay:.25s;animation-delay:.25s;line-height:1.5em}@media only screen and (max-width:480px){.notyf{padding:0}.notyf__ripple{height:600px;width:600px;-webkit-animation-duration:.5s;animation-duration:.5s}.notyf__toast{max-width:none;border-radius:0;box-shadow:0 -2px 7px 0 rgba(0,0,0,.13);width:100%}.notyf__dismiss{width:56px}}";
n(css,{});

var NotyfFactory = (function () {
    function NotyfFactory() {
    }
    NotyfFactory.prototype.success = function (message, title, options) {
        this.flash('success', message, title, options);
    };
    NotyfFactory.prototype.info = function (message, title, options) {
        this.flash('info', message, title, options);
    };
    NotyfFactory.prototype.warning = function (message, title, options) {
        this.flash('warning', message, title, options);
    };
    NotyfFactory.prototype.error = function (message, title, options) {
        this.flash('error', message, title, options);
    };
    NotyfFactory.prototype.flash = function (type, message, title, options) {
        var notification = this.createNotification(type, message, title, options);
        this.renderOptions({});
        this.render({ notification: notification });
    };
    NotyfFactory.prototype.createNotification = function (type, message, title, options) {
        if (typeof type === 'object') {
            options = type;
            type = options.type;
            message = options.message;
            title = options.title;
        }
        else if (typeof message === 'object') {
            options = message;
            message = options.message;
            title = options.title;
        }
        else if (typeof title === 'object') {
            options = title;
            title = options.title;
        }
        if (undefined === message) {
            throw new Error('message option is required');
        }
        return {
            type: type || 'info',
            message: message,
            title: title,
            options: options
        };
    };
    NotyfFactory.prototype.render = function (envelope) {
        var _a;
        var notification = envelope.notification;
        notification.type = notification.type || 'info';
        var options = __assign$1(__assign$1({}, notification), notification.options);
        (_a = this.notyf) === null || _a === void 0 ? void 0 : _a.open(options);
    };
    NotyfFactory.prototype.renderOptions = function (options) {
        var nOptions = __assign$1({ duration: options.duration || 5000 }, options);
        nOptions.types = nOptions.types || [];
        nOptions.types.push({
            type: 'info',
            className: 'notyf__toast--info',
            backgroundColor: '#5784E5',
            icon: {
                className: 'notyf__icon--warning',
                tagName: 'i'
            }
        });
        nOptions.types.push({
            type: 'warning',
            className: 'notyf__toast--warning',
            backgroundColor: '#E3A008',
            icon: {
                className: 'notyf__icon--warning',
                tagName: 'i'
            }
        });
        this.notyf = this.notyf || new Notyf(nOptions);
    };
    return NotyfFactory;
}());

flasher__default["default"].addFactory('notyf', new NotyfFactory());


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZmxhc2hlcl9mbGFzaGVyLW5vdHlmX2Rpc3RfaW5kZXhfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWE7O0FBRWIsY0FBYyxtQkFBTyxDQUFDLHVFQUFrQjs7QUFFeEMscUNBQXFDLDREQUE0RDs7QUFFakc7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxPQUFPO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsT0FBTztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsWUFBWSw2QkFBNkIsSUFBSTtBQUN2RjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQ0FBMEM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFL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c0MsNkJBQTZCLHFCQUFxQixrQkFBa0IseUNBQXlDLE9BQU8sVUFBVSxlQUFlLGFBQWEsWUFBWSwrQkFBK0IsdUJBQXVCLGNBQWMsZUFBZSxnQkFBZ0Isd0NBQXdDLFdBQVcsZ0JBQWdCLFlBQVk7QUFDeGpLLFFBQVE7O0FBRVI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QixzQkFBc0IsNEJBQTRCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxvQ0FBb0M7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AZmxhc2hlci9mbGFzaGVyLW5vdHlmL2Rpc3QvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZmxhc2hlciA9IHJlcXVpcmUoJ0BmbGFzaGVyL2ZsYXNoZXInKTtcblxuZnVuY3Rpb24gX2ludGVyb3BEZWZhdWx0TGVnYWN5IChlKSB7IHJldHVybiBlICYmIHR5cGVvZiBlID09PSAnb2JqZWN0JyAmJiAnZGVmYXVsdCcgaW4gZSA/IGUgOiB7ICdkZWZhdWx0JzogZSB9OyB9XG5cbnZhciBmbGFzaGVyX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19pbnRlcm9wRGVmYXVsdExlZ2FjeShmbGFzaGVyKTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG52YXIgX19hc3NpZ24kMSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24kMSA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24kMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59O1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxudmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufTtcblxudmFyIE5vdHlmTm90aWZpY2F0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTm90eWZOb3RpZmljYXRpb24ob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgIH1cclxuICAgIE5vdHlmTm90aWZpY2F0aW9uLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGNiKSB7XHJcbiAgICAgICAgdmFyIGNhbGxiYWNrcyA9IHRoaXMubGlzdGVuZXJzW2V2ZW50VHlwZV0gfHwgW107XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRUeXBlXSA9IGNhbGxiYWNrcy5jb25jYXQoW2NiXSk7XHJcbiAgICB9O1xyXG4gICAgTm90eWZOb3RpZmljYXRpb24ucHJvdG90eXBlLnRyaWdnZXJFdmVudCA9IGZ1bmN0aW9uIChldmVudFR5cGUsIGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5saXN0ZW5lcnNbZXZlbnRUeXBlXSB8fCBbXTtcclxuICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2IpIHsgcmV0dXJuIGNiKHsgdGFyZ2V0OiBfdGhpcywgZXZlbnQ6IGV2ZW50IH0pOyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTm90eWZOb3RpZmljYXRpb247XHJcbn0oKSk7XHJcbnZhciBOb3R5ZkFycmF5RXZlbnQ7XHJcbihmdW5jdGlvbiAoTm90eWZBcnJheUV2ZW50KSB7XHJcbiAgICBOb3R5ZkFycmF5RXZlbnRbTm90eWZBcnJheUV2ZW50W1wiQWRkXCJdID0gMF0gPSBcIkFkZFwiO1xyXG4gICAgTm90eWZBcnJheUV2ZW50W05vdHlmQXJyYXlFdmVudFtcIlJlbW92ZVwiXSA9IDFdID0gXCJSZW1vdmVcIjtcclxufSkoTm90eWZBcnJheUV2ZW50IHx8IChOb3R5ZkFycmF5RXZlbnQgPSB7fSkpO1xyXG52YXIgTm90eWZBcnJheSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5vdHlmQXJyYXkoKSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gW107XHJcbiAgICB9XHJcbiAgICBOb3R5ZkFycmF5LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMucHVzaChlbGVtKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUZuKGVsZW0sIE5vdHlmQXJyYXlFdmVudC5BZGQsIHRoaXMubm90aWZpY2F0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgTm90eWZBcnJheS5wcm90b3R5cGUuc3BsaWNlID0gZnVuY3Rpb24gKGluZGV4LCBudW0pIHtcclxuICAgICAgICB2YXIgZWxlbSA9IHRoaXMubm90aWZpY2F0aW9ucy5zcGxpY2UoaW5kZXgsIG51bSlbMF07XHJcbiAgICAgICAgdGhpcy51cGRhdGVGbihlbGVtLCBOb3R5ZkFycmF5RXZlbnQuUmVtb3ZlLCB0aGlzLm5vdGlmaWNhdGlvbnMpO1xyXG4gICAgICAgIHJldHVybiBlbGVtO1xyXG4gICAgfTtcclxuICAgIE5vdHlmQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiAoZWxlbSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm5vdGlmaWNhdGlvbnMuaW5kZXhPZihlbGVtKTtcclxuICAgIH07XHJcbiAgICBOb3R5ZkFycmF5LnByb3RvdHlwZS5vblVwZGF0ZSA9IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHRoaXMudXBkYXRlRm4gPSBmbjtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTm90eWZBcnJheTtcclxufSgpKTtcblxudmFyIE5vdHlmRXZlbnQ7XHJcbihmdW5jdGlvbiAoTm90eWZFdmVudCkge1xyXG4gICAgTm90eWZFdmVudFtcIkRpc21pc3NcIl0gPSBcImRpc21pc3NcIjtcclxuICAgIE5vdHlmRXZlbnRbXCJDbGlja1wiXSA9IFwiY2xpY2tcIjtcclxufSkoTm90eWZFdmVudCB8fCAoTm90eWZFdmVudCA9IHt9KSk7XHJcbnZhciBERUZBVUxUX09QVElPTlMgPSB7XHJcbiAgICB0eXBlczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdub3R5Zl9fdG9hc3QtLXN1Y2Nlc3MnLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjM2RjNzYzJyxcclxuICAgICAgICAgICAgaWNvbjoge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbm90eWZfX2ljb24tLXN1Y2Nlc3MnLFxyXG4gICAgICAgICAgICAgICAgdGFnTmFtZTogJ2knLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0eXBlOiAnZXJyb3InLFxyXG4gICAgICAgICAgICBjbGFzc05hbWU6ICdub3R5Zl9fdG9hc3QtLWVycm9yJyxcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2VkM2QzZCcsXHJcbiAgICAgICAgICAgIGljb246IHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ25vdHlmX19pY29uLS1lcnJvcicsXHJcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiAnaScsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIF0sXHJcbiAgICBkdXJhdGlvbjogMjAwMCxcclxuICAgIHJpcHBsZTogdHJ1ZSxcclxuICAgIHBvc2l0aW9uOiB7XHJcbiAgICAgICAgeDogJ3JpZ2h0JyxcclxuICAgICAgICB5OiAnYm90dG9tJyxcclxuICAgIH0sXHJcbiAgICBkaXNtaXNzaWJsZTogZmFsc2UsXHJcbn07XG5cbnZhciBOb3R5ZlZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBOb3R5ZlZpZXcoKSB7XHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5ldmVudHMgPSB7fTtcclxuICAgICAgICB0aGlzLlhfUE9TSVRJT05fRkxFWF9NQVAgPSB7XHJcbiAgICAgICAgICAgIGxlZnQ6ICdmbGV4LXN0YXJ0JyxcclxuICAgICAgICAgICAgY2VudGVyOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgcmlnaHQ6ICdmbGV4LWVuZCcsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLllfUE9TSVRJT05fRkxFWF9NQVAgPSB7XHJcbiAgICAgICAgICAgIHRvcDogJ2ZsZXgtc3RhcnQnLFxyXG4gICAgICAgICAgICBjZW50ZXI6ICdjZW50ZXInLFxyXG4gICAgICAgICAgICBib3R0b206ICdmbGV4LWVuZCcsXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBDcmVhdGVzIHRoZSBtYWluIG5vdGlmaWNhdGlvbnMgY29udGFpbmVyXHJcbiAgICAgICAgdmFyIGRvY0ZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcbiAgICAgICAgdmFyIG5vdHlmQ29udGFpbmVyID0gdGhpcy5fY3JlYXRlSFRNTEVsZW1lbnQoeyB0YWdOYW1lOiAnZGl2JywgY2xhc3NOYW1lOiAnbm90eWYnIH0pO1xyXG4gICAgICAgIGRvY0ZyYWcuYXBwZW5kQ2hpbGQobm90eWZDb250YWluZXIpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9jRnJhZyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBub3R5ZkNvbnRhaW5lcjtcclxuICAgICAgICAvLyBJZGVudGlmaWVzIHRoZSBtYWluIGFuaW1hdGlvbiBlbmQgZXZlbnRcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbkVuZEV2ZW50TmFtZSA9IHRoaXMuX2dldEFuaW1hdGlvbkVuZEV2ZW50TmFtZSgpO1xyXG4gICAgICAgIHRoaXMuX2NyZWF0ZUExMXlDb250YWluZXIoKTtcclxuICAgIH1cclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuZXZlbnRzKSwgKF9hID0ge30sIF9hW2V2ZW50XSA9IGNiLCBfYSkpO1xyXG4gICAgfTtcclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbiwgdHlwZSkge1xyXG4gICAgICAgIGlmICh0eXBlID09PSBOb3R5ZkFycmF5RXZlbnQuQWRkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IE5vdHlmQXJyYXlFdmVudC5SZW1vdmUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5yZW1vdmVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcmVuZGVyZWROb3RpZmljYXRpb24gPSB0aGlzLl9wb3BSZW5kZXJlZE5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pO1xyXG4gICAgICAgIHZhciBub2RlO1xyXG4gICAgICAgIGlmICghcmVuZGVyZWROb3RpZmljYXRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub2RlID0gcmVuZGVyZWROb3RpZmljYXRpb24ubm9kZTtcclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoJ25vdHlmX190b2FzdC0tZGlzYXBwZWFyJyk7XHJcbiAgICAgICAgdmFyIGhhbmRsZUV2ZW50O1xyXG4gICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmFuaW1hdGlvbkVuZEV2ZW50TmFtZSwgKGhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihfdGhpcy5hbmltYXRpb25FbmRFdmVudE5hbWUsIGhhbmRsZUV2ZW50KTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcbiAgICBOb3R5ZlZpZXcucHJvdG90eXBlLmFkZE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcclxuICAgICAgICB2YXIgbm9kZSA9IHRoaXMuX3JlbmRlck5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pO1xyXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5wdXNoKHsgbm90aWZpY2F0aW9uOiBub3RpZmljYXRpb24sIG5vZGU6IG5vZGUgfSk7XHJcbiAgICAgICAgLy8gRm9yIGExMXkgcHVycG9zZXMsIHdlIHN0aWxsIHdhbnQgdG8gYW5ub3VuY2UgdGhhdCB0aGVyZSdzIGEgbm90aWZpY2F0aW9uIGluIHRoZSBzY3JlZW5cclxuICAgICAgICAvLyBldmVuIGlmIGl0IGNvbWVzIHdpdGggbm8gbWVzc2FnZS5cclxuICAgICAgICB0aGlzLl9hbm5vdW5jZShub3RpZmljYXRpb24ub3B0aW9ucy5tZXNzYWdlIHx8ICdOb3RpZmljYXRpb24nKTtcclxuICAgIH07XHJcbiAgICBOb3R5ZlZpZXcucHJvdG90eXBlLl9yZW5kZXJOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHZhciBjYXJkID0gdGhpcy5fYnVpbGROb3RpZmljYXRpb25DYXJkKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG5vdGlmaWNhdGlvbi5vcHRpb25zLmNsYXNzTmFtZTtcclxuICAgICAgICBpZiAoY2xhc3NOYW1lKSB7XHJcbiAgICAgICAgICAgIChfYSA9IGNhcmQuY2xhc3NMaXN0KS5hZGQuYXBwbHkoX2EsIGNsYXNzTmFtZS5zcGxpdCgnICcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZCk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmQ7XHJcbiAgICB9O1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5fcG9wUmVuZGVyZWROb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgdmFyIGlkeCA9IC0xO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ub3RpZmljYXRpb25zLmxlbmd0aCAmJiBpZHggPCAwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm90aWZpY2F0aW9uc1tpXS5ub3RpZmljYXRpb24gPT09IG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgaWR4ID0gaTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaWR4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RpZmljYXRpb25zLnNwbGljZShpZHgsIDEpWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9O1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5nZXRYUG9zaXRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gKChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wb3NpdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLngpIHx8ICdyaWdodCc7XHJcbiAgICB9O1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5nZXRZUG9zaXRpb24gPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gKChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5wb3NpdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnkpIHx8ICdib3R0b20nO1xyXG4gICAgfTtcclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUuYWRqdXN0Q29udGFpbmVyQWxpZ25tZW50ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgYWxpZ24gPSB0aGlzLlhfUE9TSVRJT05fRkxFWF9NQVBbdGhpcy5nZXRYUG9zaXRpb24ob3B0aW9ucyldO1xyXG4gICAgICAgIHZhciBqdXN0aWZ5ID0gdGhpcy5ZX1BPU0lUSU9OX0ZMRVhfTUFQW3RoaXMuZ2V0WVBvc2l0aW9uKG9wdGlvbnMpXTtcclxuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmNvbnRhaW5lci5zdHlsZTtcclxuICAgICAgICBzdHlsZS5zZXRQcm9wZXJ0eSgnanVzdGlmeS1jb250ZW50JywganVzdGlmeSk7XHJcbiAgICAgICAgc3R5bGUuc2V0UHJvcGVydHkoJ2FsaWduLWl0ZW1zJywgYWxpZ24pO1xyXG4gICAgfTtcclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUuX2J1aWxkTm90aWZpY2F0aW9uQ2FyZCA9IGZ1bmN0aW9uIChub3RpZmljYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gbm90aWZpY2F0aW9uLm9wdGlvbnM7XHJcbiAgICAgICAgdmFyIGljb25PcHRzID0gb3B0aW9ucy5pY29uO1xyXG4gICAgICAgIC8vIEFkanVzdCBjb250YWluZXIgYWNjb3JkaW5nIHRvIHBvc2l0aW9uIChlLmcuIHRvcC1sZWZ0LCBib3R0b20tY2VudGVyLCBldGMpXHJcbiAgICAgICAgdGhpcy5hZGp1c3RDb250YWluZXJBbGlnbm1lbnQob3B0aW9ucyk7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGVsZW1lbnRzXHJcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbkVsZW0gPSB0aGlzLl9jcmVhdGVIVE1MRWxlbWVudCh7IHRhZ05hbWU6ICdkaXYnLCBjbGFzc05hbWU6ICdub3R5Zl9fdG9hc3QnIH0pO1xyXG4gICAgICAgIHZhciByaXBwbGUgPSB0aGlzLl9jcmVhdGVIVE1MRWxlbWVudCh7IHRhZ05hbWU6ICdkaXYnLCBjbGFzc05hbWU6ICdub3R5Zl9fcmlwcGxlJyB9KTtcclxuICAgICAgICB2YXIgd3JhcHBlciA9IHRoaXMuX2NyZWF0ZUhUTUxFbGVtZW50KHsgdGFnTmFtZTogJ2RpdicsIGNsYXNzTmFtZTogJ25vdHlmX193cmFwcGVyJyB9KTtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IHRoaXMuX2NyZWF0ZUhUTUxFbGVtZW50KHsgdGFnTmFtZTogJ2RpdicsIGNsYXNzTmFtZTogJ25vdHlmX19tZXNzYWdlJyB9KTtcclxuICAgICAgICBtZXNzYWdlLmlubmVySFRNTCA9IG9wdGlvbnMubWVzc2FnZSB8fCAnJztcclxuICAgICAgICB2YXIgbWFpbkNvbG9yID0gb3B0aW9ucy5iYWNrZ3JvdW5kIHx8IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBpY29uIGFuZCBhcHBlbmQgaXQgdG8gdGhlIGNhcmRcclxuICAgICAgICBpZiAoaWNvbk9wdHMpIHtcclxuICAgICAgICAgICAgdmFyIGljb25Db250YWluZXIgPSB0aGlzLl9jcmVhdGVIVE1MRWxlbWVudCh7IHRhZ05hbWU6ICdkaXYnLCBjbGFzc05hbWU6ICdub3R5Zl9faWNvbicgfSk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaWNvbk9wdHMgPT09ICdzdHJpbmcnIHx8IGljb25PcHRzIGluc3RhbmNlb2YgU3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgaWNvbkNvbnRhaW5lci5pbm5lckhUTUwgPSBuZXcgU3RyaW5nKGljb25PcHRzKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaWNvbk9wdHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2EgPSBpY29uT3B0cy50YWdOYW1lLCB0YWdOYW1lID0gX2EgPT09IHZvaWQgMCA/ICdpJyA6IF9hLCBjbGFzc05hbWVfMSA9IGljb25PcHRzLmNsYXNzTmFtZSwgdGV4dCA9IGljb25PcHRzLnRleHQsIF9iID0gaWNvbk9wdHMuY29sb3IsIGNvbG9yID0gX2IgPT09IHZvaWQgMCA/IG1haW5Db2xvciA6IF9iO1xyXG4gICAgICAgICAgICAgICAgdmFyIGljb25FbGVtZW50ID0gdGhpcy5fY3JlYXRlSFRNTEVsZW1lbnQoeyB0YWdOYW1lOiB0YWdOYW1lLCBjbGFzc05hbWU6IGNsYXNzTmFtZV8xLCB0ZXh0OiB0ZXh0IH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvbG9yKVxyXG4gICAgICAgICAgICAgICAgICAgIGljb25FbGVtZW50LnN0eWxlLmNvbG9yID0gY29sb3I7XHJcbiAgICAgICAgICAgICAgICBpY29uQ29udGFpbmVyLmFwcGVuZENoaWxkKGljb25FbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGljb25Db250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKG1lc3NhZ2UpO1xyXG4gICAgICAgIG5vdGlmaWNhdGlvbkVsZW0uYXBwZW5kQ2hpbGQod3JhcHBlcik7XHJcbiAgICAgICAgLy8gQWRkIHJpcHBsZSBpZiBhcHBsaWNhYmxlLCBlbHNlIGp1c3QgcGFpbnQgdGhlIGZ1bGwgdG9hc3RcclxuICAgICAgICBpZiAobWFpbkNvbG9yKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJpcHBsZSkge1xyXG4gICAgICAgICAgICAgICAgcmlwcGxlLnN0eWxlLmJhY2tncm91bmQgPSBtYWluQ29sb3I7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25FbGVtLmFwcGVuZENoaWxkKHJpcHBsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25FbGVtLnN0eWxlLmJhY2tncm91bmQgPSBtYWluQ29sb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkIGRpc21pc3MgYnV0dG9uXHJcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlzbWlzc2libGUpIHtcclxuICAgICAgICAgICAgdmFyIGRpc21pc3NXcmFwcGVyID0gdGhpcy5fY3JlYXRlSFRNTEVsZW1lbnQoeyB0YWdOYW1lOiAnZGl2JywgY2xhc3NOYW1lOiAnbm90eWZfX2Rpc21pc3MnIH0pO1xyXG4gICAgICAgICAgICB2YXIgZGlzbWlzc0J1dHRvbiA9IHRoaXMuX2NyZWF0ZUhUTUxFbGVtZW50KHtcclxuICAgICAgICAgICAgICAgIHRhZ05hbWU6ICdidXR0b24nLFxyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnbm90eWZfX2Rpc21pc3MtYnRuJyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRpc21pc3NXcmFwcGVyLmFwcGVuZENoaWxkKGRpc21pc3NCdXR0b24pO1xyXG4gICAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGRpc21pc3NXcmFwcGVyKTtcclxuICAgICAgICAgICAgbm90aWZpY2F0aW9uRWxlbS5jbGFzc0xpc3QuYWRkKFwibm90eWZfX3RvYXN0LS1kaXNtaXNzaWJsZVwiKTtcclxuICAgICAgICAgICAgZGlzbWlzc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgICAgIChfYiA9IChfYSA9IF90aGlzLmV2ZW50cylbTm90eWZFdmVudC5EaXNtaXNzXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHsgdGFyZ2V0OiBub3RpZmljYXRpb24sIGV2ZW50OiBldmVudCB9KTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm90aWZpY2F0aW9uRWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgeyB2YXIgX2EsIF9iOyByZXR1cm4gKF9iID0gKF9hID0gX3RoaXMuZXZlbnRzKVtOb3R5ZkV2ZW50LkNsaWNrXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoX2EsIHsgdGFyZ2V0OiBub3RpZmljYXRpb24sIGV2ZW50OiBldmVudCB9KTsgfSk7XHJcbiAgICAgICAgLy8gQWRqdXN0IG1hcmdpbnMgZGVwZW5kaW5nIG9uIHdoZXRoZXIgaXRzIGFuIHVwcGVyIG9yIGxvd2VyIG5vdGlmaWNhdGlvblxyXG4gICAgICAgIHZhciBjbGFzc05hbWUgPSB0aGlzLmdldFlQb3NpdGlvbihvcHRpb25zKSA9PT0gJ3RvcCcgPyAndXBwZXInIDogJ2xvd2VyJztcclxuICAgICAgICBub3RpZmljYXRpb25FbGVtLmNsYXNzTGlzdC5hZGQoXCJub3R5Zl9fdG9hc3QtLVwiICsgY2xhc3NOYW1lKTtcclxuICAgICAgICByZXR1cm4gbm90aWZpY2F0aW9uRWxlbTtcclxuICAgIH07XHJcbiAgICBOb3R5ZlZpZXcucHJvdG90eXBlLl9jcmVhdGVIVE1MRWxlbWVudCA9IGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgIHZhciB0YWdOYW1lID0gX2EudGFnTmFtZSwgY2xhc3NOYW1lID0gX2EuY2xhc3NOYW1lLCB0ZXh0ID0gX2EudGV4dDtcclxuICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XHJcbiAgICAgICAgaWYgKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlbS50ZXh0Q29udGVudCA9IHRleHQgfHwgbnVsbDtcclxuICAgICAgICByZXR1cm4gZWxlbTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gaW52aXNpYmxlIGNvbnRhaW5lciB3aGljaCB3aWxsIGFubm91bmNlIHRoZSBub3R5ZnMgdG9cclxuICAgICAqIHNjcmVlbiByZWFkZXJzXHJcbiAgICAgKi9cclxuICAgIE5vdHlmVmlldy5wcm90b3R5cGUuX2NyZWF0ZUExMXlDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGExMXlDb250YWluZXIgPSB0aGlzLl9jcmVhdGVIVE1MRWxlbWVudCh7IHRhZ05hbWU6ICdkaXYnLCBjbGFzc05hbWU6ICdub3R5Zi1hbm5vdW5jZXInIH0pO1xyXG4gICAgICAgIGExMXlDb250YWluZXIuc2V0QXR0cmlidXRlKCdhcmlhLWF0b21pYycsICd0cnVlJyk7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdwb2xpdGUnKTtcclxuICAgICAgICAvLyBTZXQgdGhlIGExMXkgY29udGFpbmVyIHRvIGJlIHZpc2libGUgaGlkZGVuLiBDYW4ndCB1c2UgZGlzcGxheTogbm9uZSBhc1xyXG4gICAgICAgIC8vIHNjcmVlbiByZWFkZXJzIHdvbid0IHJlYWQgaXQuXHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMCc7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5jbGlwID0gJ3JlY3QoMCAwIDAgMCknO1xyXG4gICAgICAgIGExMXlDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzFweCc7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5tYXJnaW4gPSAnLTFweCc7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgICAgIGExMXlDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcwJztcclxuICAgICAgICBhMTF5Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICBhMTF5Q29udGFpbmVyLnN0eWxlLndpZHRoID0gJzFweCc7XHJcbiAgICAgICAgYTExeUNvbnRhaW5lci5zdHlsZS5vdXRsaW5lID0gJzAnO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYTExeUNvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5hMTF5Q29udGFpbmVyID0gYTExeUNvbnRhaW5lcjtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEFubm91bmNlcyBhIG1lc3NhZ2UgdG8gc2NyZWVucmVhZGVycy5cclxuICAgICAqL1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5fYW5ub3VuY2UgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5hMTF5Q29udGFpbmVyLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgLy8gVGhpcyAxMDBtcyB0aW1lb3V0IGlzIG5lY2Vzc2FyeSBmb3Igc29tZSBicm93c2VyICsgc2NyZWVuLXJlYWRlciBjb21iaW5hdGlvbnM6XHJcbiAgICAgICAgLy8gLSBCb3RoIEpBV1MgYW5kIE5WREEgb3ZlciBJRTExIHdpbGwgbm90IGFubm91bmNlIGFueXRoaW5nIHdpdGhvdXQgYSBub24temVybyB0aW1lb3V0LlxyXG4gICAgICAgIC8vIC0gV2l0aCBDaHJvbWUgYW5kIElFMTEgd2l0aCBOVkRBIG9yIEpBV1MsIGEgcmVwZWF0ZWQgKGlkZW50aWNhbCkgbWVzc2FnZSB3b24ndCBiZSByZWFkIGFcclxuICAgICAgICAvLyAgIHNlY29uZCB0aW1lIHdpdGhvdXQgY2xlYXJpbmcgYW5kIHRoZW4gdXNpbmcgYSBub24temVybyBkZWxheS5cclxuICAgICAgICAvLyAodXNpbmcgSkFXUyAxNyBhdCB0aW1lIG9mIHRoaXMgd3JpdGluZykuXHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvbWF0ZXJpYWwyL2Jsb2IvbWFzdGVyL3NyYy9jZGsvYTExeS9saXZlLWFubm91bmNlci9saXZlLWFubm91bmNlci50c1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hMTF5Q29udGFpbmVyLnRleHRDb250ZW50ID0gbWVzc2FnZTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lIHdoaWNoIGFuaW1hdGlvbmVuZCBldmVudCBpcyBzdXBwb3J0ZWRcclxuICAgICAqL1xyXG4gICAgTm90eWZWaWV3LnByb3RvdHlwZS5fZ2V0QW5pbWF0aW9uRW5kRXZlbnROYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ19mYWtlJyk7XHJcbiAgICAgICAgdmFyIHRyYW5zaXRpb25zID0ge1xyXG4gICAgICAgICAgICBNb3pUcmFuc2l0aW9uOiAnYW5pbWF0aW9uZW5kJyxcclxuICAgICAgICAgICAgT1RyYW5zaXRpb246ICdvQW5pbWF0aW9uRW5kJyxcclxuICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbjogJ3dlYmtpdEFuaW1hdGlvbkVuZCcsXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb246ICdhbmltYXRpb25lbmQnLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIHQ7XHJcbiAgICAgICAgZm9yICh0IGluIHRyYW5zaXRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChlbC5zdHlsZVt0XSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbnNbdF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gTm8gc3VwcG9ydGVkIGFuaW1hdGlvbiBlbmQgZXZlbnQuIFVzaW5nIFwiYW5pbWF0aW9uZW5kXCIgYXMgYSBmYWxsYmFja1xyXG4gICAgICAgIHJldHVybiAnYW5pbWF0aW9uZW5kJztcclxuICAgIH07XHJcbiAgICByZXR1cm4gTm90eWZWaWV3O1xyXG59KCkpO1xuXG4vKipcclxuICogTWFpbiBjb250cm9sbGVyIGNsYXNzLiBEZWZpbmVzIHRoZSBtYWluIE5vdHlmIEFQSS5cclxuICovXHJcbnZhciBOb3R5ZiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE5vdHlmKG9wdHMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZGlzbWlzcyA9IHRoaXMuX3JlbW92ZU5vdGlmaWNhdGlvbjtcclxuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMgPSBuZXcgTm90eWZBcnJheSgpO1xyXG4gICAgICAgIHRoaXMudmlldyA9IG5ldyBOb3R5ZlZpZXcoKTtcclxuICAgICAgICB2YXIgdHlwZXMgPSB0aGlzLnJlZ2lzdGVyVHlwZXMob3B0cyk7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIERFRkFVTFRfT1BUSU9OUyksIG9wdHMpO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucy50eXBlcyA9IHR5cGVzO1xyXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9ucy5vblVwZGF0ZShmdW5jdGlvbiAoZWxlbSwgdHlwZSkgeyByZXR1cm4gX3RoaXMudmlldy51cGRhdGUoZWxlbSwgdHlwZSk7IH0pO1xyXG4gICAgICAgIHRoaXMudmlldy5vbihOb3R5ZkV2ZW50LkRpc21pc3MsIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX2EudGFyZ2V0LCBldmVudCA9IF9hLmV2ZW50O1xyXG4gICAgICAgICAgICBfdGhpcy5fcmVtb3ZlTm90aWZpY2F0aW9uKHRhcmdldCk7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tc3RyaW5nLWxpdGVyYWxcclxuICAgICAgICAgICAgdGFyZ2V0Wyd0cmlnZ2VyRXZlbnQnXShOb3R5ZkV2ZW50LkRpc21pc3MsIGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLXN0cmluZy1saXRlcmFsXHJcbiAgICAgICAgdGhpcy52aWV3Lm9uKE5vdHlmRXZlbnQuQ2xpY2ssIGZ1bmN0aW9uIChfYSkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX2EudGFyZ2V0LCBldmVudCA9IF9hLmV2ZW50O1xyXG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0Wyd0cmlnZ2VyRXZlbnQnXShOb3R5ZkV2ZW50LkNsaWNrLCBldmVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBOb3R5Zi5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAocGF5bG9hZCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5ub3JtYWxpemVPcHRpb25zKCdlcnJvcicsIHBheWxvYWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wZW4ob3B0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgTm90eWYucHJvdG90eXBlLnN1Y2Nlc3MgPSBmdW5jdGlvbiAocGF5bG9hZCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy5ub3JtYWxpemVPcHRpb25zKCdzdWNjZXNzJywgcGF5bG9hZCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlbihvcHRpb25zKTtcclxuICAgIH07XHJcbiAgICBOb3R5Zi5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGRlZmF1bHRPcHRzID0gdGhpcy5vcHRpb25zLnR5cGVzLmZpbmQoZnVuY3Rpb24gKF9hKSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlID0gX2EudHlwZTtcclxuICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09IG9wdGlvbnMudHlwZTtcclxuICAgICAgICB9KSB8fCB7fTtcclxuICAgICAgICB2YXIgY29uZmlnID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGRlZmF1bHRPcHRzKSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25Qcm9wcyhbJ3JpcHBsZScsICdwb3NpdGlvbicsICdkaXNtaXNzaWJsZSddLCBjb25maWcpO1xyXG4gICAgICAgIHZhciBub3RpZmljYXRpb24gPSBuZXcgTm90eWZOb3RpZmljYXRpb24oY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9wdXNoTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIG5vdGlmaWNhdGlvbjtcclxuICAgIH07XHJcbiAgICBOb3R5Zi5wcm90b3R5cGUuZGlzbWlzc0FsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB3aGlsZSAodGhpcy5ub3RpZmljYXRpb25zLnNwbGljZSgwLCAxKSlcclxuICAgICAgICAgICAgO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQXNzaWducyBwcm9wZXJ0aWVzIHRvIGEgY29uZmlnIG9iamVjdCBiYXNlZCBvbiB0d28gcnVsZXM6XHJcbiAgICAgKiAxLiBJZiB0aGUgY29uZmlnIG9iamVjdCBhbHJlYWR5IHNldHMgdGhhdCBwcm9wLCBsZWF2ZSBpdCBhcyBzb1xyXG4gICAgICogMi4gT3RoZXJ3aXNlLCB1c2UgdGhlIGRlZmF1bHQgcHJvcCBmcm9tIHRoZSBnbG9iYWwgb3B0aW9uc1xyXG4gICAgICpcclxuICAgICAqIEl0J3MgaW50ZW5kZWQgdG8gYnVpbGQgdGhlIGZpbmFsIGNvbmZpZyBvYmplY3QgdG8gb3BlbiBhIG5vdGlmaWNhdGlvbi4gZS5nLiBpZlxyXG4gICAgICogJ2Rpc21pc3NpYmxlJyBpcyBub3Qgc2V0LCB0aGVuIHVzZSB0aGUgdmFsdWUgZnJvbSB0aGUgZ2xvYmFsIGNvbmZpZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHJvcHMgLSBwcm9wZXJ0aWVzIHRvIGJlIGFzc2lnbmVkIHRvIHRoZSBjb25maWcgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gY29uZmlnIC0gb2JqZWN0IHdob3NlIHByb3BlcnRpZXMgbmVlZCB0byBiZSBzZXRcclxuICAgICAqL1xyXG4gICAgTm90eWYucHJvdG90eXBlLmFzc2lnblByb3BzID0gZnVuY3Rpb24gKHByb3BzLCBjb25maWcpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHByb3BzLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcclxuICAgICAgICAgICAgLy8gaW50ZW50aW9uYWwgZG91YmxlIGVxdWFsaXR5IHRvIGNoZWNrIGZvciBib3RoIG51bGwgYW5kIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBjb25maWdbcHJvcF0gPSBjb25maWdbcHJvcF0gPT0gbnVsbCA/IF90aGlzLm9wdGlvbnNbcHJvcF0gOiBjb25maWdbcHJvcF07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTm90eWYucHJvdG90eXBlLl9wdXNoTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb25zLnB1c2gobm90aWZpY2F0aW9uKTtcclxuICAgICAgICB2YXIgZHVyYXRpb24gPSBub3RpZmljYXRpb24ub3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gbm90aWZpY2F0aW9uLm9wdGlvbnMuZHVyYXRpb24gOiB0aGlzLm9wdGlvbnMuZHVyYXRpb247XHJcbiAgICAgICAgaWYgKGR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX3JlbW92ZU5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pOyB9LCBkdXJhdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE5vdHlmLnByb3RvdHlwZS5fcmVtb3ZlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMubm90aWZpY2F0aW9ucy5pbmRleE9mKG5vdGlmaWNhdGlvbik7XHJcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTm90eWYucHJvdG90eXBlLm5vcm1hbGl6ZU9wdGlvbnMgPSBmdW5jdGlvbiAodHlwZSwgcGF5bG9hZCkge1xyXG4gICAgICAgIHZhciBvcHRpb25zID0geyB0eXBlOiB0eXBlIH07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBvcHRpb25zLm1lc3NhZ2UgPSBwYXlsb2FkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGF5bG9hZCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgcGF5bG9hZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvcHRpb25zO1xyXG4gICAgfTtcclxuICAgIE5vdHlmLnByb3RvdHlwZS5yZWdpc3RlclR5cGVzID0gZnVuY3Rpb24gKG9wdHMpIHtcclxuICAgICAgICB2YXIgaW5jb21pbmdUeXBlcyA9ICgob3B0cyAmJiBvcHRzLnR5cGVzKSB8fCBbXSkuc2xpY2UoKTtcclxuICAgICAgICB2YXIgZmluYWxEZWZhdWx0VHlwZXMgPSBERUZBVUxUX09QVElPTlMudHlwZXMubWFwKGZ1bmN0aW9uIChkZWZhdWx0VHlwZSkge1xyXG4gICAgICAgICAgICAvLyBmaW5kIGlmIHRoZXJlJ3MgYSBkZWZhdWx0IHR5cGUgd2l0aGluIHRoZSB1c2VyIGlucHV0J3MgdHlwZXMsIGlmIHNvLCBpdCBtZWFucyB0aGUgdXNlclxyXG4gICAgICAgICAgICAvLyB3YW50cyB0byBjaGFuZ2Ugc29tZSBvZiB0aGUgZGVmYXVsdCBzZXR0aW5nc1xyXG4gICAgICAgICAgICB2YXIgdXNlclR5cGVJZHggPSAtMTtcclxuICAgICAgICAgICAgaW5jb21pbmdUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0LCBpZHgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0LnR5cGUgPT09IGRlZmF1bHRUeXBlLnR5cGUpXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclR5cGVJZHggPSBpZHg7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgdXNlclR5cGUgPSB1c2VyVHlwZUlkeCAhPT0gLTEgPyBpbmNvbWluZ1R5cGVzLnNwbGljZSh1c2VyVHlwZUlkeCwgMSlbMF0gOiB7fTtcclxuICAgICAgICAgICAgcmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LCBkZWZhdWx0VHlwZSksIHVzZXJUeXBlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZmluYWxEZWZhdWx0VHlwZXMuY29uY2F0KGluY29taW5nVHlwZXMpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBOb3R5ZjtcclxufSgpKTtcblxudmFyIGU9W10sdD1bXTtmdW5jdGlvbiBuKG4scil7aWYobiYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGRvY3VtZW50KXt2YXIgYSxzPSEwPT09ci5wcmVwZW5kP1wicHJlcGVuZFwiOlwiYXBwZW5kXCIsZD0hMD09PXIuc2luZ2xlVGFnLGk9XCJzdHJpbmdcIj09dHlwZW9mIHIuY29udGFpbmVyP2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioci5jb250YWluZXIpOmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtpZihkKXt2YXIgdT1lLmluZGV4T2YoaSk7LTE9PT11JiYodT1lLnB1c2goaSktMSx0W3VdPXt9KSxhPXRbdV0mJnRbdV1bc10/dFt1XVtzXTp0W3VdW3NdPWMoKTt9ZWxzZSBhPWMoKTs2NTI3OT09PW4uY2hhckNvZGVBdCgwKSYmKG49bi5zdWJzdHJpbmcoMSkpLGEuc3R5bGVTaGVldD9hLnN0eWxlU2hlZXQuY3NzVGV4dCs9bjphLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG4pKTt9ZnVuY3Rpb24gYygpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtpZihlLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInRleHQvY3NzXCIpLHIuYXR0cmlidXRlcylmb3IodmFyIHQ9T2JqZWN0LmtleXMoci5hdHRyaWJ1dGVzKSxuPTA7bjx0Lmxlbmd0aDtuKyspZS5zZXRBdHRyaWJ1dGUodFtuXSxyLmF0dHJpYnV0ZXNbdFtuXV0pO3ZhciBhPVwicHJlcGVuZFwiPT09cz9cImFmdGVyYmVnaW5cIjpcImJlZm9yZWVuZFwiO3JldHVybiBpLmluc2VydEFkamFjZW50RWxlbWVudChhLGUpLGV9fVxuXG52YXIgY3NzID0gXCJALXdlYmtpdC1rZXlmcmFtZXMgbm90eWYtZmFkZWludXB7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDI1JSl9dG97b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfX1Aa2V5ZnJhbWVzIG5vdHlmLWZhZGVpbnVwezAle29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgyNSUpfXRve29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX19QC13ZWJraXQta2V5ZnJhbWVzIG5vdHlmLWZhZGVpbmxlZnR7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDI1JSl9dG97b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApfX1Aa2V5ZnJhbWVzIG5vdHlmLWZhZGVpbmxlZnR7MCV7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDI1JSl9dG97b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApfX1ALXdlYmtpdC1rZXlmcmFtZXMgbm90eWYtZmFkZW91dHJpZ2h0ezAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgwKX10b3tvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMjUlKX19QGtleWZyYW1lcyBub3R5Zi1mYWRlb3V0cmlnaHR7MCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApfXRve29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWCgyNSUpfX1ALXdlYmtpdC1rZXlmcmFtZXMgbm90eWYtZmFkZW91dGRvd257MCV7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfXRve29wYWNpdHk6MDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgyNSUpfX1Aa2V5ZnJhbWVzIG5vdHlmLWZhZGVvdXRkb3duezAle29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX10b3tvcGFjaXR5OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMjUlKX19QC13ZWJraXQta2V5ZnJhbWVzIHJpcHBsZXswJXt0cmFuc2Zvcm06c2NhbGUoMCkgdHJhbnNsYXRlWSgtNDUlKSB0cmFuc2xhdGVYKDEzJSl9dG97dHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVkoLTQ1JSkgdHJhbnNsYXRlWCgxMyUpfX1Aa2V5ZnJhbWVzIHJpcHBsZXswJXt0cmFuc2Zvcm06c2NhbGUoMCkgdHJhbnNsYXRlWSgtNDUlKSB0cmFuc2xhdGVYKDEzJSl9dG97dHJhbnNmb3JtOnNjYWxlKDEpIHRyYW5zbGF0ZVkoLTQ1JSkgdHJhbnNsYXRlWCgxMyUpfX0ubm90eWZ7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7Y29sb3I6I2ZmZjt6LWluZGV4Ojk5OTk7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjthbGlnbi1pdGVtczpmbGV4LWVuZDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQ7cG9pbnRlci1ldmVudHM6bm9uZTtib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzoyMHB4fS5ub3R5Zl9faWNvbi0tZXJyb3IsLm5vdHlmX19pY29uLS1zdWNjZXNze2hlaWdodDoyMXB4O3dpZHRoOjIxcHg7YmFja2dyb3VuZDojZmZmO2JvcmRlci1yYWRpdXM6NTAlO2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjAgYXV0bztwb3NpdGlvbjpyZWxhdGl2ZX0ubm90eWZfX2ljb24tLWVycm9yOmFmdGVyLC5ub3R5Zl9faWNvbi0tZXJyb3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXCI7YmFja2dyb3VuZDpjdXJyZW50Q29sb3I7ZGlzcGxheTpibG9jaztwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDozcHg7Ym9yZGVyLXJhZGl1czozcHg7bGVmdDo5cHg7aGVpZ2h0OjEycHg7dG9wOjVweH0ubm90eWZfX2ljb24tLWVycm9yOmFmdGVye3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0ubm90eWZfX2ljb24tLWVycm9yOmJlZm9yZXt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKX0ubm90eWZfX2ljb24tLXN1Y2Nlc3M6YWZ0ZXIsLm5vdHlmX19pY29uLS1zdWNjZXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO2JhY2tncm91bmQ6Y3VycmVudENvbG9yO2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6M3B4O2JvcmRlci1yYWRpdXM6M3B4fS5ub3R5Zl9faWNvbi0tc3VjY2VzczphZnRlcntoZWlnaHQ6NnB4O3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0b3A6OXB4O2xlZnQ6NnB4fS5ub3R5Zl9faWNvbi0tc3VjY2VzczpiZWZvcmV7aGVpZ2h0OjExcHg7dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7dG9wOjVweDtsZWZ0OjEwcHh9Lm5vdHlmX190b2FzdHtkaXNwbGF5OmJsb2NrO292ZXJmbG93OmhpZGRlbjtwb2ludGVyLWV2ZW50czphdXRvOy13ZWJraXQtYW5pbWF0aW9uOm5vdHlmLWZhZGVpbnVwIC4zcyBlYXNlLWluIGZvcndhcmRzO2FuaW1hdGlvbjpub3R5Zi1mYWRlaW51cCAuM3MgZWFzZS1pbiBmb3J3YXJkcztib3gtc2hhZG93OjAgM3B4IDdweCAwIHJnYmEoMCwwLDAsLjI1KTtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjAgMTVweDtib3JkZXItcmFkaXVzOjJweDttYXgtd2lkdGg6MzAwcHg7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMjUlKTtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZmxleC1zaHJpbms6MH0ubm90eWZfX3RvYXN0LS1kaXNhcHBlYXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCk7LXdlYmtpdC1hbmltYXRpb246bm90eWYtZmFkZW91dGRvd24gLjNzIGZvcndhcmRzO2FuaW1hdGlvbjpub3R5Zi1mYWRlb3V0ZG93biAuM3MgZm9yd2FyZHM7LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6LjI1czthbmltYXRpb24tZGVsYXk6LjI1c30ubm90eWZfX3RvYXN0LS1kaXNhcHBlYXIgLm5vdHlmX19pY29uLC5ub3R5Zl9fdG9hc3QtLWRpc2FwcGVhciAubm90eWZfX21lc3NhZ2V7LXdlYmtpdC1hbmltYXRpb246bm90eWYtZmFkZW91dGRvd24gLjNzIGZvcndhcmRzO2FuaW1hdGlvbjpub3R5Zi1mYWRlb3V0ZG93biAuM3MgZm9yd2FyZHM7b3BhY2l0eToxO3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApfS5ub3R5Zl9fdG9hc3QtLWRpc2FwcGVhciAubm90eWZfX2Rpc21pc3N7LXdlYmtpdC1hbmltYXRpb246bm90eWYtZmFkZW91dHJpZ2h0IC4zcyBmb3J3YXJkczthbmltYXRpb246bm90eWYtZmFkZW91dHJpZ2h0IC4zcyBmb3J3YXJkcztvcGFjaXR5OjE7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCl9Lm5vdHlmX190b2FzdC0tZGlzYXBwZWFyIC5ub3R5Zl9fbWVzc2FnZXstd2Via2l0LWFuaW1hdGlvbi1kZWxheTouMDVzO2FuaW1hdGlvbi1kZWxheTouMDVzfS5ub3R5Zl9fdG9hc3QtLXVwcGVye21hcmdpbi1ib3R0b206MjBweH0ubm90eWZfX3RvYXN0LS1sb3dlcnttYXJnaW4tdG9wOjIwcHh9Lm5vdHlmX190b2FzdC0tZGlzbWlzc2libGUgLm5vdHlmX193cmFwcGVye3BhZGRpbmctcmlnaHQ6MzBweH0ubm90eWZfX3JpcHBsZXtoZWlnaHQ6NDAwcHg7d2lkdGg6NDAwcHg7cG9zaXRpb246YWJzb2x1dGU7dHJhbnNmb3JtLW9yaWdpbjpib3R0b20gcmlnaHQ7cmlnaHQ6MDt0b3A6MDtib3JkZXItcmFkaXVzOjUwJTt0cmFuc2Zvcm06c2NhbGUoMCkgdHJhbnNsYXRlWSgtNTElKSB0cmFuc2xhdGVYKDEzJSk7ei1pbmRleDo1Oy13ZWJraXQtYW5pbWF0aW9uOnJpcHBsZSAuNHMgZWFzZS1vdXQgZm9yd2FyZHM7YW5pbWF0aW9uOnJpcHBsZSAuNHMgZWFzZS1vdXQgZm9yd2FyZHN9Lm5vdHlmX193cmFwcGVye2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7cGFkZGluZy10b3A6MTdweDtwYWRkaW5nLWJvdHRvbToxN3B4O3BhZGRpbmctcmlnaHQ6MTVweDtib3JkZXItcmFkaXVzOjNweDtwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjEwfS5ub3R5Zl9faWNvbnt3aWR0aDoyMnB4O3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtc2l6ZToxLjNlbTtvcGFjaXR5OjA7LXdlYmtpdC1hbmltYXRpb246bm90eWYtZmFkZWludXAgLjNzIGZvcndhcmRzO2FuaW1hdGlvbjpub3R5Zi1mYWRlaW51cCAuM3MgZm9yd2FyZHM7LXdlYmtpdC1hbmltYXRpb24tZGVsYXk6LjNzO2FuaW1hdGlvbi1kZWxheTouM3M7bWFyZ2luLXJpZ2h0OjEzcHh9Lm5vdHlmX19kaXNtaXNze3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7aGVpZ2h0OjEwMCU7d2lkdGg6MjZweDttYXJnaW4tcmlnaHQ6LTE1cHg7LXdlYmtpdC1hbmltYXRpb246bm90eWYtZmFkZWlubGVmdCAuM3MgZm9yd2FyZHM7YW5pbWF0aW9uOm5vdHlmLWZhZGVpbmxlZnQgLjNzIGZvcndhcmRzOy13ZWJraXQtYW5pbWF0aW9uLWRlbGF5Oi4zNXM7YW5pbWF0aW9uLWRlbGF5Oi4zNXM7b3BhY2l0eTowfS5ub3R5Zl9fZGlzbWlzcy1idG57YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4yNSk7Ym9yZGVyOm5vbmU7Y3Vyc29yOnBvaW50ZXI7dHJhbnNpdGlvbjpvcGFjaXR5IC4ycyBlYXNlLGJhY2tncm91bmQtY29sb3IgLjJzIGVhc2U7b3V0bGluZTpub25lO29wYWNpdHk6LjM1O2hlaWdodDoxMDAlO3dpZHRoOjEwMCV9Lm5vdHlmX19kaXNtaXNzLWJ0bjphZnRlciwubm90eWZfX2Rpc21pc3MtYnRuOmJlZm9yZXtjb250ZW50OlxcXCJcXFwiO2JhY2tncm91bmQ6I2ZmZjtoZWlnaHQ6MTJweDt3aWR0aDoycHg7Ym9yZGVyLXJhZGl1czozcHg7cG9zaXRpb246YWJzb2x1dGU7bGVmdDpjYWxjKDUwJSAtIDFweCk7dG9wOmNhbGMoNTAlIC0gNXB4KX0ubm90eWZfX2Rpc21pc3MtYnRuOmFmdGVye3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0ubm90eWZfX2Rpc21pc3MtYnRuOmJlZm9yZXt0cmFuc2Zvcm06cm90YXRlKDQ1ZGVnKX0ubm90eWZfX2Rpc21pc3MtYnRuOmhvdmVye29wYWNpdHk6Ljc7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC4xNSl9Lm5vdHlmX19kaXNtaXNzLWJ0bjphY3RpdmV7b3BhY2l0eTouOH0ubm90eWZfX21lc3NhZ2V7dmVydGljYWwtYWxpZ246bWlkZGxlO3Bvc2l0aW9uOnJlbGF0aXZlO29wYWNpdHk6MDstd2Via2l0LWFuaW1hdGlvbjpub3R5Zi1mYWRlaW51cCAuM3MgZm9yd2FyZHM7YW5pbWF0aW9uOm5vdHlmLWZhZGVpbnVwIC4zcyBmb3J3YXJkczstd2Via2l0LWFuaW1hdGlvbi1kZWxheTouMjVzO2FuaW1hdGlvbi1kZWxheTouMjVzO2xpbmUtaGVpZ2h0OjEuNWVtfUBtZWRpYSBvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDo0ODBweCl7Lm5vdHlme3BhZGRpbmc6MH0ubm90eWZfX3JpcHBsZXtoZWlnaHQ6NjAwcHg7d2lkdGg6NjAwcHg7LXdlYmtpdC1hbmltYXRpb24tZHVyYXRpb246LjVzO2FuaW1hdGlvbi1kdXJhdGlvbjouNXN9Lm5vdHlmX190b2FzdHttYXgtd2lkdGg6bm9uZTtib3JkZXItcmFkaXVzOjA7Ym94LXNoYWRvdzowIC0ycHggN3B4IDAgcmdiYSgwLDAsMCwuMTMpO3dpZHRoOjEwMCV9Lm5vdHlmX19kaXNtaXNze3dpZHRoOjU2cHh9fVwiO1xubihjc3Mse30pO1xuXG52YXIgTm90eWZGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOb3R5ZkZhY3RvcnkoKSB7XG4gICAgfVxuICAgIE5vdHlmRmFjdG9yeS5wcm90b3R5cGUuc3VjY2VzcyA9IGZ1bmN0aW9uIChtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmZsYXNoKCdzdWNjZXNzJywgbWVzc2FnZSwgdGl0bGUsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgTm90eWZGYWN0b3J5LnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZmxhc2goJ2luZm8nLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBOb3R5ZkZhY3RvcnkucHJvdG90eXBlLndhcm5pbmcgPSBmdW5jdGlvbiAobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5mbGFzaCgnd2FybmluZycsIG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIE5vdHlmRmFjdG9yeS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5mbGFzaCgnZXJyb3InLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBOb3R5ZkZhY3RvcnkucHJvdG90eXBlLmZsYXNoID0gZnVuY3Rpb24gKHR5cGUsIG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBub3RpZmljYXRpb24gPSB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih0eXBlLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMucmVuZGVyT3B0aW9ucyh7fSk7XG4gICAgICAgIHRoaXMucmVuZGVyKHsgbm90aWZpY2F0aW9uOiBub3RpZmljYXRpb24gfSk7XG4gICAgfTtcbiAgICBOb3R5ZkZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gdHlwZTtcbiAgICAgICAgICAgIHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gICAgICAgICAgICBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xuICAgICAgICAgICAgdGl0bGUgPSBvcHRpb25zLnRpdGxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG1lc3NhZ2U7XG4gICAgICAgICAgICBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xuICAgICAgICAgICAgdGl0bGUgPSBvcHRpb25zLnRpdGxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aXRsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB0aXRsZTtcbiAgICAgICAgICAgIHRpdGxlID0gb3B0aW9ucy50aXRsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodW5kZWZpbmVkID09PSBtZXNzYWdlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21lc3NhZ2Ugb3B0aW9uIGlzIHJlcXVpcmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2luZm8nLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIE5vdHlmRmFjdG9yeS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGVudmVsb3BlKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IGVudmVsb3BlLm5vdGlmaWNhdGlvbjtcbiAgICAgICAgbm90aWZpY2F0aW9uLnR5cGUgPSBub3RpZmljYXRpb24udHlwZSB8fCAnaW5mbyc7XG4gICAgICAgIHZhciBvcHRpb25zID0gX19hc3NpZ24kMShfX2Fzc2lnbiQxKHt9LCBub3RpZmljYXRpb24pLCBub3RpZmljYXRpb24ub3B0aW9ucyk7XG4gICAgICAgIChfYSA9IHRoaXMubm90eWYpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5vcGVuKG9wdGlvbnMpO1xuICAgIH07XG4gICAgTm90eWZGYWN0b3J5LnByb3RvdHlwZS5yZW5kZXJPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIG5PcHRpb25zID0gX19hc3NpZ24kMSh7IGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uIHx8IDUwMDAgfSwgb3B0aW9ucyk7XG4gICAgICAgIG5PcHRpb25zLnR5cGVzID0gbk9wdGlvbnMudHlwZXMgfHwgW107XG4gICAgICAgIG5PcHRpb25zLnR5cGVzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ2luZm8nLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbm90eWZfX3RvYXN0LS1pbmZvJyxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM1Nzg0RTUnLFxuICAgICAgICAgICAgaWNvbjoge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ25vdHlmX19pY29uLS13YXJuaW5nJyxcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiAnaSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG5PcHRpb25zLnR5cGVzLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiAnbm90eWZfX3RvYXN0LS13YXJuaW5nJyxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNFM0EwMDgnLFxuICAgICAgICAgICAgaWNvbjoge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ25vdHlmX19pY29uLS13YXJuaW5nJyxcbiAgICAgICAgICAgICAgICB0YWdOYW1lOiAnaSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubm90eWYgPSB0aGlzLm5vdHlmIHx8IG5ldyBOb3R5ZihuT3B0aW9ucyk7XG4gICAgfTtcbiAgICByZXR1cm4gTm90eWZGYWN0b3J5O1xufSgpKTtcblxuZmxhc2hlcl9fZGVmYXVsdFtcImRlZmF1bHRcIl0uYWRkRmFjdG9yeSgnbm90eWYnLCBuZXcgTm90eWZGYWN0b3J5KCkpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9