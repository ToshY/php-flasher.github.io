"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_pnpm_flasher_flasher-noty_1_0_11_node_modules_flasher_flasher-noty_dist_-b97ce6"],{

/***/ "./node_modules/.pnpm/@flasher+flasher-noty@1.0.11/node_modules/@flasher/flasher-noty/dist/index.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@flasher+flasher-noty@1.0.11/node_modules/@flasher/flasher-noty/dist/index.js ***!
  \**********************************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {



var flasher = __webpack_require__(/*! @flasher/flasher */ "./node_modules/.pnpm/@flasher+flasher@1.0.11/node_modules/@flasher/flasher/dist/index.js");

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var flasher__default = /*#__PURE__*/_interopDefaultLegacy(flasher);

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};

var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof __webpack_require__.g !== 'undefined' ? __webpack_require__.g : typeof self !== 'undefined' ? self : {};

function getDefaultExportFromCjs (x) {
	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
}

var noty$1 = {exports: {}};

/* 
  @package NOTY - Dependency-free notification library 
  @version version: 3.2.0-beta 
  @contributors https://github.com/needim/noty/graphs/contributors 
  @documentation Examples and Documentation - https://ned.im/noty 
  @license Licensed under the MIT licenses: http://www.opensource.org/licenses/mit-license.php 
*/

(function (module, exports) {
	(function webpackUniversalModuleDefinition(root, factory) {
		module.exports = factory();
	})(commonjsGlobal, function() {
	return /******/ (function(modules) { // webpackBootstrap
	/******/ 	// The module cache
	/******/ 	var installedModules = {};
	/******/
	/******/ 	// The require function
	/******/ 	function __nested_webpack_require_2459__(moduleId) {
	/******/
	/******/ 		// Check if module is in cache
	/******/ 		if(installedModules[moduleId]) {
	/******/ 			return installedModules[moduleId].exports;
	/******/ 		}
	/******/ 		// Create a new module (and put it into the cache)
	/******/ 		var module = installedModules[moduleId] = {
	/******/ 			i: moduleId,
	/******/ 			l: false,
	/******/ 			exports: {}
	/******/ 		};
	/******/
	/******/ 		// Execute the module function
	/******/ 		modules[moduleId].call(module.exports, module, module.exports, __nested_webpack_require_2459__);
	/******/
	/******/ 		// Flag the module as loaded
	/******/ 		module.l = true;
	/******/
	/******/ 		// Return the exports of the module
	/******/ 		return module.exports;
	/******/ 	}
	/******/
	/******/
	/******/ 	// expose the modules object (__webpack_modules__)
	/******/ 	__nested_webpack_require_2459__.m = modules;
	/******/
	/******/ 	// expose the module cache
	/******/ 	__nested_webpack_require_2459__.c = installedModules;
	/******/
	/******/ 	// identity function for calling harmony imports with the correct context
	/******/ 	__nested_webpack_require_2459__.i = function(value) { return value; };
	/******/
	/******/ 	// define getter function for harmony exports
	/******/ 	__nested_webpack_require_2459__.d = function(exports, name, getter) {
	/******/ 		if(!__nested_webpack_require_2459__.o(exports, name)) {
	/******/ 			Object.defineProperty(exports, name, {
	/******/ 				configurable: false,
	/******/ 				enumerable: true,
	/******/ 				get: getter
	/******/ 			});
	/******/ 		}
	/******/ 	};
	/******/
	/******/ 	// getDefaultExport function for compatibility with non-harmony modules
	/******/ 	__nested_webpack_require_2459__.n = function(module) {
	/******/ 		var getter = module && module.__esModule ?
	/******/ 			function getDefault() { return module['default']; } :
	/******/ 			function getModuleExports() { return module; };
	/******/ 		__nested_webpack_require_2459__.d(getter, 'a', getter);
	/******/ 		return getter;
	/******/ 	};
	/******/
	/******/ 	// Object.prototype.hasOwnProperty.call
	/******/ 	__nested_webpack_require_2459__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
	/******/
	/******/ 	// __webpack_public_path__
	/******/ 	__nested_webpack_require_2459__.p = "";
	/******/
	/******/ 	// Load entry module and return exports
	/******/ 	return __nested_webpack_require_2459__(__nested_webpack_require_2459__.s = 6);
	/******/ })
	/************************************************************************/
	/******/ ([
	/* 0 */
	/***/ (function(module, exports, __nested_webpack_require_4963__) {


	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	exports.css = exports.deepExtend = exports.animationEndEvents = undefined;

	var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

	exports.inArray = inArray;
	exports.stopPropagation = stopPropagation;
	exports.generateID = generateID;
	exports.outerHeight = outerHeight;
	exports.addListener = addListener;
	exports.hasClass = hasClass;
	exports.addClass = addClass;
	exports.removeClass = removeClass;
	exports.remove = remove;
	exports.classList = classList;
	exports.visibilityChangeFlow = visibilityChangeFlow;
	exports.createAudioElements = createAudioElements;

	var _api = __nested_webpack_require_4963__(1);

	var API = _interopRequireWildcard(_api);

	function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

	exports.animationEndEvents = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';

	function inArray(needle, haystack, argStrict) {
	  var key = void 0;
	  var strict = !!argStrict;

	  if (strict) {
	    for (key in haystack) {
	      if (haystack.hasOwnProperty(key) && haystack[key] === needle) {
	        return true;
	      }
	    }
	  } else {
	    for (key in haystack) {
	      if (haystack.hasOwnProperty(key) && haystack[key] === needle) {
	        return true;
	      }
	    }
	  }
	  return false;
	}

	function stopPropagation(evt) {
	  evt = evt || window.event;

	  if (typeof evt.stopPropagation !== 'undefined') {
	    evt.stopPropagation();
	  } else {
	    evt.cancelBubble = true;
	  }
	}

	exports.deepExtend = function deepExtend(out) {
	  out = out || {};

	  for (var i = 1; i < arguments.length; i++) {
	    var obj = arguments[i];

	    if (!obj) continue;

	    for (var key in obj) {
	      if (obj.hasOwnProperty(key)) {
	        if (Array.isArray(obj[key])) {
	          out[key] = obj[key];
	        } else if (_typeof(obj[key]) === 'object' && obj[key] !== null) {
	          out[key] = deepExtend(out[key], obj[key]);
	        } else {
	          out[key] = obj[key];
	        }
	      }
	    }
	  }

	  return out;
	};

	function generateID() {
	  var prefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';

	  var id = 'noty_' + prefix + '_';

	  id += 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
	    var r = Math.random() * 16 | 0;
	    var v = c === 'x' ? r : r & 0x3 | 0x8;
	    return v.toString(16);
	  });

	  return id;
	}

	function outerHeight(el) {
	  var height = el.offsetHeight;
	  var style = window.getComputedStyle(el);

	  height += parseInt(style.marginTop) + parseInt(style.marginBottom);
	  return height;
	}

	exports.css = function () {
	  var cssPrefixes = ['Webkit', 'O', 'Moz', 'ms'];
	  var cssProps = {};

	  function camelCase(string) {
	    return string.replace(/^-ms-/, 'ms-').replace(/-([\da-z])/gi, function (match, letter) {
	      return letter.toUpperCase();
	    });
	  }

	  function getVendorProp(name) {
	    var style = document.body.style;
	    if (name in style) return name;

	    var i = cssPrefixes.length;
	    var capName = name.charAt(0).toUpperCase() + name.slice(1);
	    var vendorName = void 0;

	    while (i--) {
	      vendorName = cssPrefixes[i] + capName;
	      if (vendorName in style) return vendorName;
	    }

	    return name;
	  }

	  function getStyleProp(name) {
	    name = camelCase(name);
	    return cssProps[name] || (cssProps[name] = getVendorProp(name));
	  }

	  function applyCss(element, prop, value) {
	    prop = getStyleProp(prop);
	    element.style[prop] = value;
	  }

	  return function (element, properties) {
	    var args = arguments;
	    var prop = void 0;
	    var value = void 0;

	    if (args.length === 2) {
	      for (prop in properties) {
	        if (properties.hasOwnProperty(prop)) {
	          value = properties[prop];
	          if (value !== undefined && properties.hasOwnProperty(prop)) {
	            applyCss(element, prop, value);
	          }
	        }
	      }
	    } else {
	      applyCss(element, args[1], args[2]);
	    }
	  };
	}();

	function addListener(el, events, cb) {
	  var useCapture = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

	  events = events.split(' ');
	  for (var i = 0; i < events.length; i++) {
	    if (document.addEventListener) {
	      el.addEventListener(events[i], cb, useCapture);
	    } else if (document.attachEvent) {
	      el.attachEvent('on' + events[i], cb);
	    }
	  }
	}

	function hasClass(element, name) {
	  var list = typeof element === 'string' ? element : classList(element);
	  return list.indexOf(' ' + name + ' ') >= 0;
	}

	function addClass(element, name) {
	  var oldList = classList(element);
	  var newList = oldList + name;

	  if (hasClass(oldList, name)) return;

	  // Trim the opening space.
	  element.className = newList.substring(1);
	}

	function removeClass(element, name) {
	  var oldList = classList(element);
	  var newList = void 0;

	  if (!hasClass(element, name)) return;

	  // Replace the class name.
	  newList = oldList.replace(' ' + name + ' ', ' ');

	  // Trim the opening and closing spaces.
	  element.className = newList.substring(1, newList.length - 1);
	}

	function remove(element) {
	  if (element.parentNode) {
	    element.parentNode.removeChild(element);
	  }
	}

	function classList(element) {
	  return (' ' + (element && element.className || '') + ' ').replace(/\s+/gi, ' ');
	}

	function visibilityChangeFlow() {
	  var hidden = void 0;
	  var visibilityChange = void 0;
	  if (typeof document.hidden !== 'undefined') {
	    // Opera 12.10 and Firefox 18 and later support
	    hidden = 'hidden';
	    visibilityChange = 'visibilitychange';
	  } else if (typeof document.msHidden !== 'undefined') {
	    hidden = 'msHidden';
	    visibilityChange = 'msvisibilitychange';
	  } else if (typeof document.webkitHidden !== 'undefined') {
	    hidden = 'webkitHidden';
	    visibilityChange = 'webkitvisibilitychange';
	  }

	  function onVisibilityChange() {
	    API.PageHidden = document[hidden];
	    handleVisibilityChange();
	  }

	  function onBlur() {
	    API.PageHidden = true;
	    handleVisibilityChange();
	  }

	  function onFocus() {
	    API.PageHidden = false;
	    handleVisibilityChange();
	  }

	  function handleVisibilityChange() {
	    if (API.PageHidden) stopAll();else resumeAll();
	  }

	  function stopAll() {
	    setTimeout(function () {
	      Object.keys(API.Store).forEach(function (id) {
	        if (API.Store.hasOwnProperty(id)) {
	          if (API.Store[id].options.visibilityControl) {
	            API.Store[id].stop();
	          }
	        }
	      });
	    }, 100);
	  }

	  function resumeAll() {
	    setTimeout(function () {
	      Object.keys(API.Store).forEach(function (id) {
	        if (API.Store.hasOwnProperty(id)) {
	          if (API.Store[id].options.visibilityControl) {
	            API.Store[id].resume();
	          }
	        }
	      });
	      API.queueRenderAll();
	    }, 100);
	  }

	  if (visibilityChange) {
	    addListener(document, visibilityChange, onVisibilityChange);
	  }

	  addListener(window, 'blur', onBlur);
	  addListener(window, 'focus', onFocus);
	}

	function createAudioElements(ref) {
	  if (ref.hasSound) {
	    var audioElement = document.createElement('audio');

	    ref.options.sounds.sources.forEach(function (s) {
	      var source = document.createElement('source');
	      source.src = s;
	      source.type = 'audio/' + getExtension(s);
	      audioElement.appendChild(source);
	    });

	    if (ref.barDom) {
	      ref.barDom.appendChild(audioElement);
	    } else {
	      document.querySelector('body').appendChild(audioElement);
	    }

	    audioElement.volume = ref.options.sounds.volume;

	    if (!ref.soundPlayed) {
	      audioElement.play();
	      ref.soundPlayed = true;
	    }

	    audioElement.onended = function () {
	      remove(audioElement);
	    };
	  }
	}

	function getExtension(fileName) {
	  return fileName.match(/\.([^.]+)$/)[1];
	}

	/***/ }),
	/* 1 */
	/***/ (function(module, exports, __nested_webpack_require_13457__) {


	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	exports.Defaults = exports.Store = exports.Queues = exports.DefaultMaxVisible = exports.docTitle = exports.DocModalCount = exports.PageHidden = undefined;
	exports.getQueueCounts = getQueueCounts;
	exports.addToQueue = addToQueue;
	exports.removeFromQueue = removeFromQueue;
	exports.queueRender = queueRender;
	exports.queueRenderAll = queueRenderAll;
	exports.ghostFix = ghostFix;
	exports.build = build;
	exports.hasButtons = hasButtons;
	exports.handleModal = handleModal;
	exports.handleModalClose = handleModalClose;
	exports.queueClose = queueClose;
	exports.dequeueClose = dequeueClose;
	exports.fire = fire;
	exports.openFlow = openFlow;
	exports.closeFlow = closeFlow;

	var _utils = __nested_webpack_require_13457__(0);

	var Utils = _interopRequireWildcard(_utils);

	function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

	exports.PageHidden = false;
	var DocModalCount = exports.DocModalCount = 0;

	var DocTitleProps = {
	  originalTitle: null,
	  count: 0,
	  changed: false,
	  timer: -1
	};

	var docTitle = exports.docTitle = {
	  increment: function increment() {
	    DocTitleProps.count++;

	    docTitle._update();
	  },

	  decrement: function decrement() {
	    DocTitleProps.count--;

	    if (DocTitleProps.count <= 0) {
	      docTitle._clear();
	      return;
	    }

	    docTitle._update();
	  },

	  _update: function _update() {
	    var title = document.title;

	    if (!DocTitleProps.changed) {
	      DocTitleProps.originalTitle = title;
	      document.title = '(' + DocTitleProps.count + ') ' + title;
	      DocTitleProps.changed = true;
	    } else {
	      document.title = '(' + DocTitleProps.count + ') ' + DocTitleProps.originalTitle;
	    }
	  },

	  _clear: function _clear() {
	    if (DocTitleProps.changed) {
	      DocTitleProps.count = 0;
	      document.title = DocTitleProps.originalTitle;
	      DocTitleProps.changed = false;
	    }
	  }
	};

	var DefaultMaxVisible = exports.DefaultMaxVisible = 5;

	var Queues = exports.Queues = {
	  global: {
	    maxVisible: DefaultMaxVisible,
	    queue: []
	  }
	};

	var Store = exports.Store = {};

	exports.Defaults = {
	  type: 'alert',
	  layout: 'topRight',
	  theme: 'mint',
	  text: '',
	  timeout: false,
	  progressBar: true,
	  closeWith: ['click'],
	  animation: {
	    open: 'noty_effects_open',
	    close: 'noty_effects_close'
	  },
	  id: false,
	  force: false,
	  killer: false,
	  queue: 'global',
	  container: false,
	  buttons: [],
	  callbacks: {
	    beforeShow: null,
	    onShow: null,
	    afterShow: null,
	    onClose: null,
	    afterClose: null,
	    onClick: null,
	    onHover: null,
	    onTemplate: null
	  },
	  sounds: {
	    sources: [],
	    volume: 1,
	    conditions: []
	  },
	  titleCount: {
	    conditions: []
	  },
	  modal: false,
	  visibilityControl: false

	  /**
	   * @param {string} queueName
	   * @return {object}
	   */
	};function getQueueCounts() {
	  var queueName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'global';

	  var count = 0;
	  var max = DefaultMaxVisible;

	  if (Queues.hasOwnProperty(queueName)) {
	    max = Queues[queueName].maxVisible;
	    Object.keys(Store).forEach(function (i) {
	      if (Store[i].options.queue === queueName && !Store[i].closed) count++;
	    });
	  }

	  return {
	    current: count,
	    maxVisible: max
	  };
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function addToQueue(ref) {
	  if (!Queues.hasOwnProperty(ref.options.queue)) {
	    Queues[ref.options.queue] = { maxVisible: DefaultMaxVisible, queue: [] };
	  }

	  Queues[ref.options.queue].queue.push(ref);
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function removeFromQueue(ref) {
	  if (Queues.hasOwnProperty(ref.options.queue)) {
	    var queue = [];
	    Object.keys(Queues[ref.options.queue].queue).forEach(function (i) {
	      if (Queues[ref.options.queue].queue[i].id !== ref.id) {
	        queue.push(Queues[ref.options.queue].queue[i]);
	      }
	    });
	    Queues[ref.options.queue].queue = queue;
	  }
	}

	/**
	 * @param {string} queueName
	 * @return {void}
	 */
	function queueRender() {
	  var queueName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'global';

	  if (Queues.hasOwnProperty(queueName)) {
	    var noty = Queues[queueName].queue.shift();

	    if (noty) noty.show();
	  }
	}

	/**
	 * @return {void}
	 */
	function queueRenderAll() {
	  Object.keys(Queues).forEach(function (queueName) {
	    queueRender(queueName);
	  });
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function ghostFix(ref) {
	  var ghostID = Utils.generateID('ghost');
	  var ghost = document.createElement('div');
	  ghost.setAttribute('id', ghostID);
	  Utils.css(ghost, {
	    height: Utils.outerHeight(ref.barDom) + 'px'
	  });

	  ref.barDom.insertAdjacentHTML('afterend', ghost.outerHTML);

	  Utils.remove(ref.barDom);
	  ghost = document.getElementById(ghostID);
	  Utils.addClass(ghost, 'noty_fix_effects_height');
	  Utils.addListener(ghost, Utils.animationEndEvents, function () {
	    Utils.remove(ghost);
	  });
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function build(ref) {
	  findOrCreateContainer(ref);

	  var markup = '<div class="noty_body">' + ref.options.text + '</div>' + buildButtons(ref) + '<div class="noty_progressbar"></div>';

	  ref.barDom = document.createElement('div');
	  ref.barDom.setAttribute('id', ref.id);
	  Utils.addClass(ref.barDom, 'noty_bar noty_type__' + ref.options.type + ' noty_theme__' + ref.options.theme);

	  ref.barDom.innerHTML = markup;

	  fire(ref, 'onTemplate');
	}

	/**
	 * @param {Noty} ref
	 * @return {boolean}
	 */
	function hasButtons(ref) {
	  return !!(ref.options.buttons && Object.keys(ref.options.buttons).length);
	}

	/**
	 * @param {Noty} ref
	 * @return {string}
	 */
	function buildButtons(ref) {
	  if (hasButtons(ref)) {
	    var buttons = document.createElement('div');
	    Utils.addClass(buttons, 'noty_buttons');

	    Object.keys(ref.options.buttons).forEach(function (key) {
	      buttons.appendChild(ref.options.buttons[key].dom);
	    });

	    ref.options.buttons.forEach(function (btn) {
	      buttons.appendChild(btn.dom);
	    });
	    return buttons.outerHTML;
	  }
	  return '';
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function handleModal(ref) {
	  if (ref.options.modal) {
	    if (DocModalCount === 0) {
	      createModal();
	    }

	    exports.DocModalCount = DocModalCount += 1;
	  }
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function handleModalClose(ref) {
	  if (ref.options.modal && DocModalCount > 0) {
	    exports.DocModalCount = DocModalCount -= 1;

	    if (DocModalCount <= 0) {
	      var modal = document.querySelector('.noty_modal');

	      if (modal) {
	        Utils.removeClass(modal, 'noty_modal_open');
	        Utils.addClass(modal, 'noty_modal_close');
	        Utils.addListener(modal, Utils.animationEndEvents, function () {
	          Utils.remove(modal);
	        });
	      }
	    }
	  }
	}

	/**
	 * @return {void}
	 */
	function createModal() {
	  var body = document.querySelector('body');
	  var modal = document.createElement('div');
	  Utils.addClass(modal, 'noty_modal');
	  body.insertBefore(modal, body.firstChild);
	  Utils.addClass(modal, 'noty_modal_open');

	  Utils.addListener(modal, Utils.animationEndEvents, function () {
	    Utils.removeClass(modal, 'noty_modal_open');
	  });
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function findOrCreateContainer(ref) {
	  if (ref.options.container) {
	    ref.layoutDom = document.querySelector(ref.options.container);
	    return;
	  }

	  var layoutID = 'noty_layout__' + ref.options.layout;
	  ref.layoutDom = document.querySelector('div#' + layoutID);

	  if (!ref.layoutDom) {
	    ref.layoutDom = document.createElement('div');
	    ref.layoutDom.setAttribute('id', layoutID);
	    ref.layoutDom.setAttribute('role', 'alert');
	    ref.layoutDom.setAttribute('aria-live', 'polite');
	    Utils.addClass(ref.layoutDom, 'noty_layout');
	    document.querySelector('body').appendChild(ref.layoutDom);
	  }
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function queueClose(ref) {
	  if (ref.options.timeout) {
	    if (ref.options.progressBar && ref.progressDom) {
	      Utils.css(ref.progressDom, {
	        transition: 'width ' + ref.options.timeout + 'ms linear',
	        width: '0%'
	      });
	    }

	    clearTimeout(ref.closeTimer);

	    ref.closeTimer = setTimeout(function () {
	      ref.close();
	    }, ref.options.timeout);
	  }
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function dequeueClose(ref) {
	  if (ref.options.timeout && ref.closeTimer) {
	    clearTimeout(ref.closeTimer);
	    ref.closeTimer = -1;

	    if (ref.options.progressBar && ref.progressDom) {
	      Utils.css(ref.progressDom, {
	        transition: 'width 0ms linear',
	        width: '100%'
	      });
	    }
	  }
	}

	/**
	 * @param {Noty} ref
	 * @param {string} eventName
	 * @return {void}
	 */
	function fire(ref, eventName) {
	  if (ref.listeners.hasOwnProperty(eventName)) {
	    ref.listeners[eventName].forEach(function (cb) {
	      if (typeof cb === 'function') {
	        cb.apply(ref);
	      }
	    });
	  }
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function openFlow(ref) {
	  fire(ref, 'afterShow');
	  queueClose(ref);

	  Utils.addListener(ref.barDom, 'mouseenter', function () {
	    dequeueClose(ref);
	  });

	  Utils.addListener(ref.barDom, 'mouseleave', function () {
	    queueClose(ref);
	  });
	}

	/**
	 * @param {Noty} ref
	 * @return {void}
	 */
	function closeFlow(ref) {
	  delete Store[ref.id];
	  ref.closing = false;
	  fire(ref, 'afterClose');

	  Utils.remove(ref.barDom);

	  if (ref.layoutDom.querySelectorAll('.noty_bar').length === 0 && !ref.options.container) {
	    Utils.remove(ref.layoutDom);
	  }

	  if (Utils.inArray('docVisible', ref.options.titleCount.conditions) || Utils.inArray('docHidden', ref.options.titleCount.conditions)) {
	    docTitle.decrement();
	  }

	  queueRender(ref.options.queue);
	}

	/***/ }),
	/* 2 */
	/***/ (function(module, exports, __nested_webpack_require_23931__) {


	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	exports.NotyButton = undefined;

	var _utils = __nested_webpack_require_23931__(0);

	var Utils = _interopRequireWildcard(_utils);

	function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	exports.NotyButton = function NotyButton(html, classes, cb) {
	  var _this = this;

	  var attributes = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

	  _classCallCheck(this, NotyButton);

	  this.dom = document.createElement('button');
	  this.dom.innerHTML = html;
	  this.id = attributes.id = attributes.id || Utils.generateID('button');
	  this.cb = cb;
	  Object.keys(attributes).forEach(function (propertyName) {
	    _this.dom.setAttribute(propertyName, attributes[propertyName]);
	  });
	  Utils.addClass(this.dom, classes || 'noty_btn');

	  return this;
	};

	/***/ }),
	/* 3 */
	/***/ (function(module, exports, __webpack_require__) {


	Object.defineProperty(exports, "__esModule", {
	  value: true
	});

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	exports.Push = function () {
	  function Push() {
	    var workerPath = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/service-worker.js';

	    _classCallCheck(this, Push);

	    this.subData = {};
	    this.workerPath = workerPath;
	    this.listeners = {
	      onPermissionGranted: [],
	      onPermissionDenied: [],
	      onSubscriptionSuccess: [],
	      onSubscriptionCancel: [],
	      onWorkerError: [],
	      onWorkerSuccess: [],
	      onWorkerNotSupported: []
	    };
	    return this;
	  }

	  /**
	   * @param {string} eventName
	   * @param {function} cb
	   * @return {Push}
	   */


	  _createClass(Push, [{
	    key: 'on',
	    value: function on(eventName) {
	      var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};

	      if (typeof cb === 'function' && this.listeners.hasOwnProperty(eventName)) {
	        this.listeners[eventName].push(cb);
	      }

	      return this;
	    }
	  }, {
	    key: 'fire',
	    value: function fire(eventName) {
	      var _this = this;

	      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];

	      if (this.listeners.hasOwnProperty(eventName)) {
	        this.listeners[eventName].forEach(function (cb) {
	          if (typeof cb === 'function') {
	            cb.apply(_this, params);
	          }
	        });
	      }
	    }
	  }, {
	    key: 'create',
	    value: function create() {
	      console.log('NOT IMPLEMENTED YET');
	    }

	    /**
	     * @return {boolean}
	     */

	  }, {
	    key: 'isSupported',
	    value: function isSupported() {
	      var result = false;

	      try {
	        result = window.Notification || window.webkitNotifications || navigator.mozNotification || window.external && window.external.msIsSiteMode() !== undefined;
	      } catch (e) {}

	      return result;
	    }

	    /**
	     * @return {string}
	     */

	  }, {
	    key: 'getPermissionStatus',
	    value: function getPermissionStatus() {
	      var perm = 'default';

	      if (window.Notification && window.Notification.permissionLevel) {
	        perm = window.Notification.permissionLevel;
	      } else if (window.webkitNotifications && window.webkitNotifications.checkPermission) {
	        switch (window.webkitNotifications.checkPermission()) {
	          case 1:
	            perm = 'default';
	            break;
	          case 0:
	            perm = 'granted';
	            break;
	          default:
	            perm = 'denied';
	        }
	      } else if (window.Notification && window.Notification.permission) {
	        perm = window.Notification.permission;
	      } else if (navigator.mozNotification) {
	        perm = 'granted';
	      } else if (window.external && window.external.msIsSiteMode() !== undefined) {
	        perm = window.external.msIsSiteMode() ? 'granted' : 'default';
	      }

	      return perm.toString().toLowerCase();
	    }

	    /**
	     * @return {string}
	     */

	  }, {
	    key: 'getEndpoint',
	    value: function getEndpoint(subscription) {
	      var endpoint = subscription.endpoint;
	      var subscriptionId = subscription.subscriptionId;

	      // fix for Chrome < 45
	      if (subscriptionId && endpoint.indexOf(subscriptionId) === -1) {
	        endpoint += '/' + subscriptionId;
	      }

	      return endpoint;
	    }

	    /**
	     * @return {boolean}
	     */

	  }, {
	    key: 'isSWRegistered',
	    value: function isSWRegistered() {
	      try {
	        return navigator.serviceWorker.controller.state === 'activated';
	      } catch (e) {
	        return false;
	      }
	    }

	    /**
	     * @return {void}
	     */

	  }, {
	    key: 'unregisterWorker',
	    value: function unregisterWorker() {
	      var self = this;
	      if ('serviceWorker' in navigator) {
	        navigator.serviceWorker.getRegistrations().then(function (registrations) {
	          var _iteratorNormalCompletion = true;
	          var _didIteratorError = false;
	          var _iteratorError = undefined;

	          try {
	            for (var _iterator = registrations[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
	              var registration = _step.value;

	              registration.unregister();
	              self.fire('onSubscriptionCancel');
	            }
	          } catch (err) {
	            _didIteratorError = true;
	            _iteratorError = err;
	          } finally {
	            try {
	              if (!_iteratorNormalCompletion && _iterator.return) {
	                _iterator.return();
	              }
	            } finally {
	              if (_didIteratorError) {
	                throw _iteratorError;
	              }
	            }
	          }
	        });
	      }
	    }

	    /**
	     * @return {void}
	     */

	  }, {
	    key: 'requestSubscription',
	    value: function requestSubscription() {
	      var _this2 = this;

	      var userVisibleOnly = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;

	      var self = this;
	      var current = this.getPermissionStatus();
	      var cb = function cb(result) {
	        if (result === 'granted') {
	          _this2.fire('onPermissionGranted');

	          if ('serviceWorker' in navigator) {
	            navigator.serviceWorker.register(_this2.workerPath).then(function () {
	              navigator.serviceWorker.ready.then(function (serviceWorkerRegistration) {
	                self.fire('onWorkerSuccess');
	                serviceWorkerRegistration.pushManager.subscribe({
	                  userVisibleOnly: userVisibleOnly
	                }).then(function (subscription) {
	                  var key = subscription.getKey('p256dh');
	                  var token = subscription.getKey('auth');

	                  self.subData = {
	                    endpoint: self.getEndpoint(subscription),
	                    p256dh: key ? window.btoa(String.fromCharCode.apply(null, new Uint8Array(key))) : null,
	                    auth: token ? window.btoa(String.fromCharCode.apply(null, new Uint8Array(token))) : null
	                  };

	                  self.fire('onSubscriptionSuccess', [self.subData]);
	                }).catch(function (err) {
	                  self.fire('onWorkerError', [err]);
	                });
	              });
	            });
	          } else {
	            self.fire('onWorkerNotSupported');
	          }
	        } else if (result === 'denied') {
	          _this2.fire('onPermissionDenied');
	          _this2.unregisterWorker();
	        }
	      };

	      if (current === 'default') {
	        if (window.Notification && window.Notification.requestPermission) {
	          window.Notification.requestPermission(cb);
	        } else if (window.webkitNotifications && window.webkitNotifications.checkPermission) {
	          window.webkitNotifications.requestPermission(cb);
	        }
	      } else {
	        cb(current);
	      }
	    }
	  }]);

	  return Push;
	}();

	/***/ }),
	/* 4 */
	/***/ (function(module, exports, __nested_webpack_require_33164__) {

	/* WEBPACK VAR INJECTION */(function(process, global) {var require;/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.1
	 */

	(function (global, factory) {
		 module.exports = factory() ;
	}(this, (function () {
	function objectOrFunction(x) {
	  var type = typeof x;
	  return x !== null && (type === 'object' || type === 'function');
	}

	function isFunction(x) {
	  return typeof x === 'function';
	}

	var _isArray = undefined;
	if (Array.isArray) {
	  _isArray = Array.isArray;
	} else {
	  _isArray = function (x) {
	    return Object.prototype.toString.call(x) === '[object Array]';
	  };
	}

	var isArray = _isArray;

	var len = 0;
	var vertxNext = undefined;
	var customSchedulerFn = undefined;

	var asap = function asap(callback, arg) {
	  queue[len] = callback;
	  queue[len + 1] = arg;
	  len += 2;
	  if (len === 2) {
	    // If len is 2, that means that we need to schedule an async flush.
	    // If additional callbacks are queued before the queue is flushed, they
	    // will be processed by this flush that we are scheduling.
	    if (customSchedulerFn) {
	      customSchedulerFn(flush);
	    } else {
	      scheduleFlush();
	    }
	  }
	};

	function setScheduler(scheduleFn) {
	  customSchedulerFn = scheduleFn;
	}

	function setAsap(asapFn) {
	  asap = asapFn;
	}

	var browserWindow = typeof window !== 'undefined' ? window : undefined;
	var browserGlobal = browserWindow || {};
	var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
	var isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';

	// test for web worker but not in IE10
	var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

	// node
	function useNextTick() {
	  // node version 0.10.x displays a deprecation warning when nextTick is used recursively
	  // see https://github.com/cujojs/when/issues/410 for details
	  return function () {
	    return process.nextTick(flush);
	  };
	}

	// vertx
	function useVertxTimer() {
	  if (typeof vertxNext !== 'undefined') {
	    return function () {
	      vertxNext(flush);
	    };
	  }

	  return useSetTimeout();
	}

	function useMutationObserver() {
	  var iterations = 0;
	  var observer = new BrowserMutationObserver(flush);
	  var node = document.createTextNode('');
	  observer.observe(node, { characterData: true });

	  return function () {
	    node.data = iterations = ++iterations % 2;
	  };
	}

	// web worker
	function useMessageChannel() {
	  var channel = new MessageChannel();
	  channel.port1.onmessage = flush;
	  return function () {
	    return channel.port2.postMessage(0);
	  };
	}

	function useSetTimeout() {
	  // Store setTimeout reference so es6-promise will be unaffected by
	  // other code modifying setTimeout (like sinon.useFakeTimers())
	  var globalSetTimeout = setTimeout;
	  return function () {
	    return globalSetTimeout(flush, 1);
	  };
	}

	var queue = new Array(1000);
	function flush() {
	  for (var i = 0; i < len; i += 2) {
	    var callback = queue[i];
	    var arg = queue[i + 1];

	    callback(arg);

	    queue[i] = undefined;
	    queue[i + 1] = undefined;
	  }

	  len = 0;
	}

	function attemptVertx() {
	  try {
	    var r = require;
	    var vertx = __nested_webpack_require_33164__(9);
	    vertxNext = vertx.runOnLoop || vertx.runOnContext;
	    return useVertxTimer();
	  } catch (e) {
	    return useSetTimeout();
	  }
	}

	var scheduleFlush = undefined;
	// Decide what async method to use to triggering processing of queued callbacks:
	if (isNode) {
	  scheduleFlush = useNextTick();
	} else if (BrowserMutationObserver) {
	  scheduleFlush = useMutationObserver();
	} else if (isWorker) {
	  scheduleFlush = useMessageChannel();
	} else if (browserWindow === undefined && "function" === 'function') {
	  scheduleFlush = attemptVertx();
	} else {
	  scheduleFlush = useSetTimeout();
	}

	function then(onFulfillment, onRejection) {
	  var _arguments = arguments;

	  var parent = this;

	  var child = new this.constructor(noop);

	  if (child[PROMISE_ID] === undefined) {
	    makePromise(child);
	  }

	  var _state = parent._state;

	  if (_state) {
	    (function () {
	      var callback = _arguments[_state - 1];
	      asap(function () {
	        return invokeCallback(_state, child, callback, parent._result);
	      });
	    })();
	  } else {
	    subscribe(parent, child, onFulfillment, onRejection);
	  }

	  return child;
	}

	/**
	  `Promise.resolve` returns a promise that will become resolved with the
	  passed `value`. It is shorthand for the following:

	  ```javascript
	  let promise = new Promise(function(resolve, reject){
	    resolve(1);
	  });

	  promise.then(function(value){
	    // value === 1
	  });
	  ```

	  Instead of writing the above, your code now simply becomes the following:

	  ```javascript
	  let promise = Promise.resolve(1);

	  promise.then(function(value){
	    // value === 1
	  });
	  ```

	  @method resolve
	  @static
	  @param {Any} value value that the returned promise will be resolved with
	  Useful for tooling.
	  @return {Promise} a promise that will become fulfilled with the given
	  `value`
	*/
	function resolve$1(object) {
	  /*jshint validthis:true */
	  var Constructor = this;

	  if (object && typeof object === 'object' && object.constructor === Constructor) {
	    return object;
	  }

	  var promise = new Constructor(noop);
	  resolve(promise, object);
	  return promise;
	}

	var PROMISE_ID = Math.random().toString(36).substring(16);

	function noop() {}

	var PENDING = void 0;
	var FULFILLED = 1;
	var REJECTED = 2;

	var GET_THEN_ERROR = new ErrorObject();

	function selfFulfillment() {
	  return new TypeError("You cannot resolve a promise with itself");
	}

	function cannotReturnOwn() {
	  return new TypeError('A promises callback cannot return that same promise.');
	}

	function getThen(promise) {
	  try {
	    return promise.then;
	  } catch (error) {
	    GET_THEN_ERROR.error = error;
	    return GET_THEN_ERROR;
	  }
	}

	function tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {
	  try {
	    then$$1.call(value, fulfillmentHandler, rejectionHandler);
	  } catch (e) {
	    return e;
	  }
	}

	function handleForeignThenable(promise, thenable, then$$1) {
	  asap(function (promise) {
	    var sealed = false;
	    var error = tryThen(then$$1, thenable, function (value) {
	      if (sealed) {
	        return;
	      }
	      sealed = true;
	      if (thenable !== value) {
	        resolve(promise, value);
	      } else {
	        fulfill(promise, value);
	      }
	    }, function (reason) {
	      if (sealed) {
	        return;
	      }
	      sealed = true;

	      reject(promise, reason);
	    }, 'Settle: ' + (promise._label || ' unknown promise'));

	    if (!sealed && error) {
	      sealed = true;
	      reject(promise, error);
	    }
	  }, promise);
	}

	function handleOwnThenable(promise, thenable) {
	  if (thenable._state === FULFILLED) {
	    fulfill(promise, thenable._result);
	  } else if (thenable._state === REJECTED) {
	    reject(promise, thenable._result);
	  } else {
	    subscribe(thenable, undefined, function (value) {
	      return resolve(promise, value);
	    }, function (reason) {
	      return reject(promise, reason);
	    });
	  }
	}

	function handleMaybeThenable(promise, maybeThenable, then$$1) {
	  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {
	    handleOwnThenable(promise, maybeThenable);
	  } else {
	    if (then$$1 === GET_THEN_ERROR) {
	      reject(promise, GET_THEN_ERROR.error);
	      GET_THEN_ERROR.error = null;
	    } else if (then$$1 === undefined) {
	      fulfill(promise, maybeThenable);
	    } else if (isFunction(then$$1)) {
	      handleForeignThenable(promise, maybeThenable, then$$1);
	    } else {
	      fulfill(promise, maybeThenable);
	    }
	  }
	}

	function resolve(promise, value) {
	  if (promise === value) {
	    reject(promise, selfFulfillment());
	  } else if (objectOrFunction(value)) {
	    handleMaybeThenable(promise, value, getThen(value));
	  } else {
	    fulfill(promise, value);
	  }
	}

	function publishRejection(promise) {
	  if (promise._onerror) {
	    promise._onerror(promise._result);
	  }

	  publish(promise);
	}

	function fulfill(promise, value) {
	  if (promise._state !== PENDING) {
	    return;
	  }

	  promise._result = value;
	  promise._state = FULFILLED;

	  if (promise._subscribers.length !== 0) {
	    asap(publish, promise);
	  }
	}

	function reject(promise, reason) {
	  if (promise._state !== PENDING) {
	    return;
	  }
	  promise._state = REJECTED;
	  promise._result = reason;

	  asap(publishRejection, promise);
	}

	function subscribe(parent, child, onFulfillment, onRejection) {
	  var _subscribers = parent._subscribers;
	  var length = _subscribers.length;

	  parent._onerror = null;

	  _subscribers[length] = child;
	  _subscribers[length + FULFILLED] = onFulfillment;
	  _subscribers[length + REJECTED] = onRejection;

	  if (length === 0 && parent._state) {
	    asap(publish, parent);
	  }
	}

	function publish(promise) {
	  var subscribers = promise._subscribers;
	  var settled = promise._state;

	  if (subscribers.length === 0) {
	    return;
	  }

	  var child = undefined,
	      callback = undefined,
	      detail = promise._result;

	  for (var i = 0; i < subscribers.length; i += 3) {
	    child = subscribers[i];
	    callback = subscribers[i + settled];

	    if (child) {
	      invokeCallback(settled, child, callback, detail);
	    } else {
	      callback(detail);
	    }
	  }

	  promise._subscribers.length = 0;
	}

	function ErrorObject() {
	  this.error = null;
	}

	var TRY_CATCH_ERROR = new ErrorObject();

	function tryCatch(callback, detail) {
	  try {
	    return callback(detail);
	  } catch (e) {
	    TRY_CATCH_ERROR.error = e;
	    return TRY_CATCH_ERROR;
	  }
	}

	function invokeCallback(settled, promise, callback, detail) {
	  var hasCallback = isFunction(callback),
	      value = undefined,
	      error = undefined,
	      succeeded = undefined,
	      failed = undefined;

	  if (hasCallback) {
	    value = tryCatch(callback, detail);

	    if (value === TRY_CATCH_ERROR) {
	      failed = true;
	      error = value.error;
	      value.error = null;
	    } else {
	      succeeded = true;
	    }

	    if (promise === value) {
	      reject(promise, cannotReturnOwn());
	      return;
	    }
	  } else {
	    value = detail;
	    succeeded = true;
	  }

	  if (promise._state !== PENDING) ; else if (hasCallback && succeeded) {
	      resolve(promise, value);
	    } else if (failed) {
	      reject(promise, error);
	    } else if (settled === FULFILLED) {
	      fulfill(promise, value);
	    } else if (settled === REJECTED) {
	      reject(promise, value);
	    }
	}

	function initializePromise(promise, resolver) {
	  try {
	    resolver(function resolvePromise(value) {
	      resolve(promise, value);
	    }, function rejectPromise(reason) {
	      reject(promise, reason);
	    });
	  } catch (e) {
	    reject(promise, e);
	  }
	}

	var id = 0;
	function nextId() {
	  return id++;
	}

	function makePromise(promise) {
	  promise[PROMISE_ID] = id++;
	  promise._state = undefined;
	  promise._result = undefined;
	  promise._subscribers = [];
	}

	function Enumerator$1(Constructor, input) {
	  this._instanceConstructor = Constructor;
	  this.promise = new Constructor(noop);

	  if (!this.promise[PROMISE_ID]) {
	    makePromise(this.promise);
	  }

	  if (isArray(input)) {
	    this.length = input.length;
	    this._remaining = input.length;

	    this._result = new Array(this.length);

	    if (this.length === 0) {
	      fulfill(this.promise, this._result);
	    } else {
	      this.length = this.length || 0;
	      this._enumerate(input);
	      if (this._remaining === 0) {
	        fulfill(this.promise, this._result);
	      }
	    }
	  } else {
	    reject(this.promise, validationError());
	  }
	}

	function validationError() {
	  return new Error('Array Methods must be provided an Array');
	}

	Enumerator$1.prototype._enumerate = function (input) {
	  for (var i = 0; this._state === PENDING && i < input.length; i++) {
	    this._eachEntry(input[i], i);
	  }
	};

	Enumerator$1.prototype._eachEntry = function (entry, i) {
	  var c = this._instanceConstructor;
	  var resolve$$1 = c.resolve;

	  if (resolve$$1 === resolve$1) {
	    var _then = getThen(entry);

	    if (_then === then && entry._state !== PENDING) {
	      this._settledAt(entry._state, i, entry._result);
	    } else if (typeof _then !== 'function') {
	      this._remaining--;
	      this._result[i] = entry;
	    } else if (c === Promise$2) {
	      var promise = new c(noop);
	      handleMaybeThenable(promise, entry, _then);
	      this._willSettleAt(promise, i);
	    } else {
	      this._willSettleAt(new c(function (resolve$$1) {
	        return resolve$$1(entry);
	      }), i);
	    }
	  } else {
	    this._willSettleAt(resolve$$1(entry), i);
	  }
	};

	Enumerator$1.prototype._settledAt = function (state, i, value) {
	  var promise = this.promise;

	  if (promise._state === PENDING) {
	    this._remaining--;

	    if (state === REJECTED) {
	      reject(promise, value);
	    } else {
	      this._result[i] = value;
	    }
	  }

	  if (this._remaining === 0) {
	    fulfill(promise, this._result);
	  }
	};

	Enumerator$1.prototype._willSettleAt = function (promise, i) {
	  var enumerator = this;

	  subscribe(promise, undefined, function (value) {
	    return enumerator._settledAt(FULFILLED, i, value);
	  }, function (reason) {
	    return enumerator._settledAt(REJECTED, i, reason);
	  });
	};

	/**
	  `Promise.all` accepts an array of promises, and returns a new promise which
	  is fulfilled with an array of fulfillment values for the passed promises, or
	  rejected with the reason of the first passed promise to be rejected. It casts all
	  elements of the passed iterable to promises as it runs this algorithm.

	  Example:

	  ```javascript
	  let promise1 = resolve(1);
	  let promise2 = resolve(2);
	  let promise3 = resolve(3);
	  let promises = [ promise1, promise2, promise3 ];

	  Promise.all(promises).then(function(array){
	    // The array here would be [ 1, 2, 3 ];
	  });
	  ```

	  If any of the `promises` given to `all` are rejected, the first promise
	  that is rejected will be given as an argument to the returned promises's
	  rejection handler. For example:

	  Example:

	  ```javascript
	  let promise1 = resolve(1);
	  let promise2 = reject(new Error("2"));
	  let promise3 = reject(new Error("3"));
	  let promises = [ promise1, promise2, promise3 ];

	  Promise.all(promises).then(function(array){
	    // Code here never runs because there are rejected promises!
	  }, function(error) {
	    // error.message === "2"
	  });
	  ```

	  @method all
	  @static
	  @param {Array} entries array of promises
	  @param {String} label optional string for labeling the promise.
	  Useful for tooling.
	  @return {Promise} promise that is fulfilled when all `promises` have been
	  fulfilled, or rejected if any of them become rejected.
	  @static
	*/
	function all$1(entries) {
	  return new Enumerator$1(this, entries).promise;
	}

	/**
	  `Promise.race` returns a new promise which is settled in the same way as the
	  first passed promise to settle.

	  Example:

	  ```javascript
	  let promise1 = new Promise(function(resolve, reject){
	    setTimeout(function(){
	      resolve('promise 1');
	    }, 200);
	  });

	  let promise2 = new Promise(function(resolve, reject){
	    setTimeout(function(){
	      resolve('promise 2');
	    }, 100);
	  });

	  Promise.race([promise1, promise2]).then(function(result){
	    // result === 'promise 2' because it was resolved before promise1
	    // was resolved.
	  });
	  ```

	  `Promise.race` is deterministic in that only the state of the first
	  settled promise matters. For example, even if other promises given to the
	  `promises` array argument are resolved, but the first settled promise has
	  become rejected before the other promises became fulfilled, the returned
	  promise will become rejected:

	  ```javascript
	  let promise1 = new Promise(function(resolve, reject){
	    setTimeout(function(){
	      resolve('promise 1');
	    }, 200);
	  });

	  let promise2 = new Promise(function(resolve, reject){
	    setTimeout(function(){
	      reject(new Error('promise 2'));
	    }, 100);
	  });

	  Promise.race([promise1, promise2]).then(function(result){
	    // Code here never runs
	  }, function(reason){
	    // reason.message === 'promise 2' because promise 2 became rejected before
	    // promise 1 became fulfilled
	  });
	  ```

	  An example real-world use case is implementing timeouts:

	  ```javascript
	  Promise.race([ajax('foo.json'), timeout(5000)])
	  ```

	  @method race
	  @static
	  @param {Array} promises array of promises to observe
	  Useful for tooling.
	  @return {Promise} a promise which settles in the same way as the first passed
	  promise to settle.
	*/
	function race$1(entries) {
	  /*jshint validthis:true */
	  var Constructor = this;

	  if (!isArray(entries)) {
	    return new Constructor(function (_, reject) {
	      return reject(new TypeError('You must pass an array to race.'));
	    });
	  } else {
	    return new Constructor(function (resolve, reject) {
	      var length = entries.length;
	      for (var i = 0; i < length; i++) {
	        Constructor.resolve(entries[i]).then(resolve, reject);
	      }
	    });
	  }
	}

	/**
	  `Promise.reject` returns a promise rejected with the passed `reason`.
	  It is shorthand for the following:

	  ```javascript
	  let promise = new Promise(function(resolve, reject){
	    reject(new Error('WHOOPS'));
	  });

	  promise.then(function(value){
	    // Code here doesn't run because the promise is rejected!
	  }, function(reason){
	    // reason.message === 'WHOOPS'
	  });
	  ```

	  Instead of writing the above, your code now simply becomes the following:

	  ```javascript
	  let promise = Promise.reject(new Error('WHOOPS'));

	  promise.then(function(value){
	    // Code here doesn't run because the promise is rejected!
	  }, function(reason){
	    // reason.message === 'WHOOPS'
	  });
	  ```

	  @method reject
	  @static
	  @param {Any} reason value that the returned promise will be rejected with.
	  Useful for tooling.
	  @return {Promise} a promise rejected with the given `reason`.
	*/
	function reject$1(reason) {
	  /*jshint validthis:true */
	  var Constructor = this;
	  var promise = new Constructor(noop);
	  reject(promise, reason);
	  return promise;
	}

	function needsResolver() {
	  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
	}

	function needsNew() {
	  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
	}

	/**
	  Promise objects represent the eventual result of an asynchronous operation. The
	  primary way of interacting with a promise is through its `then` method, which
	  registers callbacks to receive either a promise's eventual value or the reason
	  why the promise cannot be fulfilled.

	  Terminology
	  -----------

	  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
	  - `thenable` is an object or function that defines a `then` method.
	  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
	  - `exception` is a value that is thrown using the throw statement.
	  - `reason` is a value that indicates why a promise was rejected.
	  - `settled` the final resting state of a promise, fulfilled or rejected.

	  A promise can be in one of three states: pending, fulfilled, or rejected.

	  Promises that are fulfilled have a fulfillment value and are in the fulfilled
	  state.  Promises that are rejected have a rejection reason and are in the
	  rejected state.  A fulfillment value is never a thenable.

	  Promises can also be said to *resolve* a value.  If this value is also a
	  promise, then the original promise's settled state will match the value's
	  settled state.  So a promise that *resolves* a promise that rejects will
	  itself reject, and a promise that *resolves* a promise that fulfills will
	  itself fulfill.


	  Basic Usage:
	  ------------

	  ```js
	  let promise = new Promise(function(resolve, reject) {
	    // on success
	    resolve(value);

	    // on failure
	    reject(reason);
	  });

	  promise.then(function(value) {
	    // on fulfillment
	  }, function(reason) {
	    // on rejection
	  });
	  ```

	  Advanced Usage:
	  ---------------

	  Promises shine when abstracting away asynchronous interactions such as
	  `XMLHttpRequest`s.

	  ```js
	  function getJSON(url) {
	    return new Promise(function(resolve, reject){
	      let xhr = new XMLHttpRequest();

	      xhr.open('GET', url);
	      xhr.onreadystatechange = handler;
	      xhr.responseType = 'json';
	      xhr.setRequestHeader('Accept', 'application/json');
	      xhr.send();

	      function handler() {
	        if (this.readyState === this.DONE) {
	          if (this.status === 200) {
	            resolve(this.response);
	          } else {
	            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
	          }
	        }
	      };
	    });
	  }

	  getJSON('/posts.json').then(function(json) {
	    // on fulfillment
	  }, function(reason) {
	    // on rejection
	  });
	  ```

	  Unlike callbacks, promises are great composable primitives.

	  ```js
	  Promise.all([
	    getJSON('/posts'),
	    getJSON('/comments')
	  ]).then(function(values){
	    values[0] // => postsJSON
	    values[1] // => commentsJSON

	    return values;
	  });
	  ```

	  @class Promise
	  @param {function} resolver
	  Useful for tooling.
	  @constructor
	*/
	function Promise$2(resolver) {
	  this[PROMISE_ID] = nextId();
	  this._result = this._state = undefined;
	  this._subscribers = [];

	  if (noop !== resolver) {
	    typeof resolver !== 'function' && needsResolver();
	    this instanceof Promise$2 ? initializePromise(this, resolver) : needsNew();
	  }
	}

	Promise$2.all = all$1;
	Promise$2.race = race$1;
	Promise$2.resolve = resolve$1;
	Promise$2.reject = reject$1;
	Promise$2._setScheduler = setScheduler;
	Promise$2._setAsap = setAsap;
	Promise$2._asap = asap;

	Promise$2.prototype = {
	  constructor: Promise$2,

	  /**
	    The primary way of interacting with a promise is through its `then` method,
	    which registers callbacks to receive either a promise's eventual value or the
	    reason why the promise cannot be fulfilled.
	  
	    ```js
	    findUser().then(function(user){
	      // user is available
	    }, function(reason){
	      // user is unavailable, and you are given the reason why
	    });
	    ```
	  
	    Chaining
	    --------
	  
	    The return value of `then` is itself a promise.  This second, 'downstream'
	    promise is resolved with the return value of the first promise's fulfillment
	    or rejection handler, or rejected if the handler throws an exception.
	  
	    ```js
	    findUser().then(function (user) {
	      return user.name;
	    }, function (reason) {
	      return 'default name';
	    }).then(function (userName) {
	      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
	      // will be `'default name'`
	    });
	  
	    findUser().then(function (user) {
	      throw new Error('Found user, but still unhappy');
	    }, function (reason) {
	      throw new Error('`findUser` rejected and we're unhappy');
	    }).then(function (value) {
	      // never reached
	    }, function (reason) {
	      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
	      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
	    });
	    ```
	    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.
	  
	    ```js
	    findUser().then(function (user) {
	      throw new PedagogicalException('Upstream error');
	    }).then(function (value) {
	      // never reached
	    }).then(function (value) {
	      // never reached
	    }, function (reason) {
	      // The `PedgagocialException` is propagated all the way down to here
	    });
	    ```
	  
	    Assimilation
	    ------------
	  
	    Sometimes the value you want to propagate to a downstream promise can only be
	    retrieved asynchronously. This can be achieved by returning a promise in the
	    fulfillment or rejection handler. The downstream promise will then be pending
	    until the returned promise is settled. This is called *assimilation*.
	  
	    ```js
	    findUser().then(function (user) {
	      return findCommentsByAuthor(user);
	    }).then(function (comments) {
	      // The user's comments are now available
	    });
	    ```
	  
	    If the assimliated promise rejects, then the downstream promise will also reject.
	  
	    ```js
	    findUser().then(function (user) {
	      return findCommentsByAuthor(user);
	    }).then(function (comments) {
	      // If `findCommentsByAuthor` fulfills, we'll have the value here
	    }, function (reason) {
	      // If `findCommentsByAuthor` rejects, we'll have the reason here
	    });
	    ```
	  
	    Simple Example
	    --------------
	  
	    Synchronous Example
	  
	    ```javascript
	    let result;
	  
	    try {
	      result = findResult();
	      // success
	    } catch(reason) {
	      // failure
	    }
	    ```
	  
	    Errback Example
	  
	    ```js
	    findResult(function(result, err){
	      if (err) {
	        // failure
	      } else {
	        // success
	      }
	    });
	    ```
	  
	    Promise Example;
	  
	    ```javascript
	    findResult().then(function(result){
	      // success
	    }, function(reason){
	      // failure
	    });
	    ```
	  
	    Advanced Example
	    --------------
	  
	    Synchronous Example
	  
	    ```javascript
	    let author, books;
	  
	    try {
	      author = findAuthor();
	      books  = findBooksByAuthor(author);
	      // success
	    } catch(reason) {
	      // failure
	    }
	    ```
	  
	    Errback Example
	  
	    ```js
	  
	    function foundBooks(books) {
	  
	    }
	  
	    function failure(reason) {
	  
	    }
	  
	    findAuthor(function(author, err){
	      if (err) {
	        failure(err);
	        // failure
	      } else {
	        try {
	          findBoooksByAuthor(author, function(books, err) {
	            if (err) {
	              failure(err);
	            } else {
	              try {
	                foundBooks(books);
	              } catch(reason) {
	                failure(reason);
	              }
	            }
	          });
	        } catch(error) {
	          failure(err);
	        }
	        // success
	      }
	    });
	    ```
	  
	    Promise Example;
	  
	    ```javascript
	    findAuthor().
	      then(findBooksByAuthor).
	      then(function(books){
	        // found books
	    }).catch(function(reason){
	      // something went wrong
	    });
	    ```
	  
	    @method then
	    @param {Function} onFulfilled
	    @param {Function} onRejected
	    Useful for tooling.
	    @return {Promise}
	  */
	  then: then,

	  /**
	    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
	    as the catch block of a try/catch statement.
	  
	    ```js
	    function findAuthor(){
	      throw new Error('couldn't find that author');
	    }
	  
	    // synchronous
	    try {
	      findAuthor();
	    } catch(reason) {
	      // something went wrong
	    }
	  
	    // async with promises
	    findAuthor().catch(function(reason){
	      // something went wrong
	    });
	    ```
	  
	    @method catch
	    @param {Function} onRejection
	    Useful for tooling.
	    @return {Promise}
	  */
	  'catch': function _catch(onRejection) {
	    return this.then(null, onRejection);
	  }
	};

	/*global self*/
	function polyfill$1() {
	    var local = undefined;

	    if (typeof global !== 'undefined') {
	        local = global;
	    } else if (typeof self !== 'undefined') {
	        local = self;
	    } else {
	        try {
	            local = Function('return this')();
	        } catch (e) {
	            throw new Error('polyfill failed because global object is unavailable in this environment');
	        }
	    }

	    var P = local.Promise;

	    if (P) {
	        var promiseToString = null;
	        try {
	            promiseToString = Object.prototype.toString.call(P.resolve());
	        } catch (e) {
	            // silently ignored
	        }

	        if (promiseToString === '[object Promise]' && !P.cast) {
	            return;
	        }
	    }

	    local.Promise = Promise$2;
	}

	// Strange compat..
	Promise$2.polyfill = polyfill$1;
	Promise$2.Promise = Promise$2;

	return Promise$2;

	})));

	

	/* WEBPACK VAR INJECTION */}.call(exports, __nested_webpack_require_33164__(7), __nested_webpack_require_33164__(8)));

	/***/ }),
	/* 5 */
	/***/ (function(module, exports) {

	// removed by extract-text-webpack-plugin

	/***/ }),
	/* 6 */
	/***/ (function(module, exports, __nested_webpack_require_62836__) {


	Object.defineProperty(exports, "__esModule", {
	  value: true
	});

	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global VERSION */

	__nested_webpack_require_62836__(5);

	var _es6Promise = __nested_webpack_require_62836__(4);

	var _es6Promise2 = _interopRequireDefault(_es6Promise);

	var _utils = __nested_webpack_require_62836__(0);

	var Utils = _interopRequireWildcard(_utils);

	var _api = __nested_webpack_require_62836__(1);

	var API = _interopRequireWildcard(_api);

	var _button = __nested_webpack_require_62836__(2);

	var _push = __nested_webpack_require_62836__(3);

	function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

	var Noty = function () {
	  /**
	   * @param {object} options
	   * @return {Noty}
	   */
	  function Noty() {
	    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

	    _classCallCheck(this, Noty);

	    this.options = Utils.deepExtend({}, API.Defaults, options);

	    if (API.Store[this.options.id]) {
	      return API.Store[this.options.id];
	    }

	    this.id = this.options.id || Utils.generateID('bar');
	    this.closeTimer = -1;
	    this.barDom = null;
	    this.layoutDom = null;
	    this.progressDom = null;
	    this.showing = false;
	    this.shown = false;
	    this.closed = false;
	    this.closing = false;
	    this.killable = this.options.timeout || this.options.closeWith.length > 0;
	    this.hasSound = this.options.sounds.sources.length > 0;
	    this.soundPlayed = false;
	    this.listeners = {
	      beforeShow: [],
	      onShow: [],
	      afterShow: [],
	      onClose: [],
	      afterClose: [],
	      onClick: [],
	      onHover: [],
	      onTemplate: []
	    };
	    this.promises = {
	      show: null,
	      close: null
	    };
	    this.on('beforeShow', this.options.callbacks.beforeShow);
	    this.on('onShow', this.options.callbacks.onShow);
	    this.on('afterShow', this.options.callbacks.afterShow);
	    this.on('onClose', this.options.callbacks.onClose);
	    this.on('afterClose', this.options.callbacks.afterClose);
	    this.on('onClick', this.options.callbacks.onClick);
	    this.on('onHover', this.options.callbacks.onHover);
	    this.on('onTemplate', this.options.callbacks.onTemplate);

	    return this;
	  }

	  /**
	   * @param {string} eventName
	   * @param {function} cb
	   * @return {Noty}
	   */


	  _createClass(Noty, [{
	    key: 'on',
	    value: function on(eventName) {
	      var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};

	      if (typeof cb === 'function' && this.listeners.hasOwnProperty(eventName)) {
	        this.listeners[eventName].push(cb);
	      }

	      return this;
	    }

	    /**
	     * @return {Noty}
	     */

	  }, {
	    key: 'show',
	    value: function show() {
	      var _this = this;

	      if (this.showing || this.shown) {
	        return this; // preventing multiple show
	      }

	      if (this.options.killer === true) {
	        Noty.closeAll();
	      } else if (typeof this.options.killer === 'string') {
	        Noty.closeAll(this.options.killer);
	      }

	      var queueCounts = API.getQueueCounts(this.options.queue);

	      if (queueCounts.current >= queueCounts.maxVisible || API.PageHidden && this.options.visibilityControl) {
	        API.addToQueue(this);

	        if (API.PageHidden && this.hasSound && Utils.inArray('docHidden', this.options.sounds.conditions)) {
	          Utils.createAudioElements(this);
	        }

	        if (API.PageHidden && Utils.inArray('docHidden', this.options.titleCount.conditions)) {
	          API.docTitle.increment();
	        }

	        return this;
	      }

	      API.Store[this.id] = this;

	      API.fire(this, 'beforeShow');

	      this.showing = true;

	      if (this.closing) {
	        this.showing = false;
	        return this;
	      }

	      API.build(this);
	      API.handleModal(this);

	      if (this.options.force) {
	        this.layoutDom.insertBefore(this.barDom, this.layoutDom.firstChild);
	      } else {
	        this.layoutDom.appendChild(this.barDom);
	      }

	      if (this.hasSound && !this.soundPlayed && Utils.inArray('docVisible', this.options.sounds.conditions)) {
	        Utils.createAudioElements(this);
	      }

	      if (Utils.inArray('docVisible', this.options.titleCount.conditions)) {
	        API.docTitle.increment();
	      }

	      this.shown = true;
	      this.closed = false;

	      // bind button events if any
	      if (API.hasButtons(this)) {
	        Object.keys(this.options.buttons).forEach(function (key) {
	          var btn = _this.barDom.querySelector('#' + _this.options.buttons[key].id);
	          Utils.addListener(btn, 'click', function (e) {
	            Utils.stopPropagation(e);
	            _this.options.buttons[key].cb(_this);
	          });
	        });
	      }

	      this.progressDom = this.barDom.querySelector('.noty_progressbar');

	      if (Utils.inArray('click', this.options.closeWith)) {
	        Utils.addClass(this.barDom, 'noty_close_with_click');
	        Utils.addListener(this.barDom, 'click', function (e) {
	          Utils.stopPropagation(e);
	          API.fire(_this, 'onClick');
	          _this.close();
	        }, false);
	      }

	      Utils.addListener(this.barDom, 'mouseenter', function () {
	        API.fire(_this, 'onHover');
	      }, false);

	      if (this.options.timeout) Utils.addClass(this.barDom, 'noty_has_timeout');
	      if (this.options.progressBar) {
	        Utils.addClass(this.barDom, 'noty_has_progressbar');
	      }

	      if (Utils.inArray('button', this.options.closeWith)) {
	        Utils.addClass(this.barDom, 'noty_close_with_button');

	        var closeButton = document.createElement('div');
	        Utils.addClass(closeButton, 'noty_close_button');
	        closeButton.innerHTML = '×';
	        this.barDom.appendChild(closeButton);

	        Utils.addListener(closeButton, 'click', function (e) {
	          Utils.stopPropagation(e);
	          _this.close();
	        }, false);
	      }

	      API.fire(this, 'onShow');

	      if (this.options.animation.open === null) {
	        this.promises.show = new _es6Promise2.default(function (resolve) {
	          resolve();
	        });
	      } else if (typeof this.options.animation.open === 'function') {
	        this.promises.show = new _es6Promise2.default(this.options.animation.open.bind(this));
	      } else {
	        Utils.addClass(this.barDom, this.options.animation.open);
	        this.promises.show = new _es6Promise2.default(function (resolve) {
	          Utils.addListener(_this.barDom, Utils.animationEndEvents, function () {
	            Utils.removeClass(_this.barDom, _this.options.animation.open);
	            resolve();
	          });
	        });
	      }

	      this.promises.show.then(function () {
	        var _t = _this;
	        setTimeout(function () {
	          API.openFlow(_t);
	        }, 100);
	      });

	      return this;
	    }

	    /**
	     * @return {Noty}
	     */

	  }, {
	    key: 'stop',
	    value: function stop() {
	      API.dequeueClose(this);
	      return this;
	    }

	    /**
	     * @return {Noty}
	     */

	  }, {
	    key: 'resume',
	    value: function resume() {
	      API.queueClose(this);
	      return this;
	    }

	    /**
	     * @param {int|boolean} ms
	     * @return {Noty}
	     */

	  }, {
	    key: 'setTimeout',
	    value: function (_setTimeout) {
	      function setTimeout(_x) {
	        return _setTimeout.apply(this, arguments);
	      }

	      setTimeout.toString = function () {
	        return _setTimeout.toString();
	      };

	      return setTimeout;
	    }(function (ms) {
	      this.stop();
	      this.options.timeout = ms;

	      if (this.barDom) {
	        if (this.options.timeout) {
	          Utils.addClass(this.barDom, 'noty_has_timeout');
	        } else {
	          Utils.removeClass(this.barDom, 'noty_has_timeout');
	        }

	        var _t = this;
	        setTimeout(function () {
	          // ugly fix for progressbar display bug
	          _t.resume();
	        }, 100);
	      }

	      return this;
	    })

	    /**
	     * @param {string} html
	     * @param {boolean} optionsOverride
	     * @return {Noty}
	     */

	  }, {
	    key: 'setText',
	    value: function setText(html) {
	      var optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

	      if (this.barDom) {
	        this.barDom.querySelector('.noty_body').innerHTML = html;
	      }

	      if (optionsOverride) this.options.text = html;

	      return this;
	    }

	    /**
	     * @param {string} type
	     * @param {boolean} optionsOverride
	     * @return {Noty}
	     */

	  }, {
	    key: 'setType',
	    value: function setType(type) {
	      var _this2 = this;

	      var optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

	      if (this.barDom) {
	        var classList = Utils.classList(this.barDom).split(' ');

	        classList.forEach(function (c) {
	          if (c.substring(0, 11) === 'noty_type__') {
	            Utils.removeClass(_this2.barDom, c);
	          }
	        });

	        Utils.addClass(this.barDom, 'noty_type__' + type);
	      }

	      if (optionsOverride) this.options.type = type;

	      return this;
	    }

	    /**
	     * @param {string} theme
	     * @param {boolean} optionsOverride
	     * @return {Noty}
	     */

	  }, {
	    key: 'setTheme',
	    value: function setTheme(theme) {
	      var _this3 = this;

	      var optionsOverride = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

	      if (this.barDom) {
	        var classList = Utils.classList(this.barDom).split(' ');

	        classList.forEach(function (c) {
	          if (c.substring(0, 12) === 'noty_theme__') {
	            Utils.removeClass(_this3.barDom, c);
	          }
	        });

	        Utils.addClass(this.barDom, 'noty_theme__' + theme);
	      }

	      if (optionsOverride) this.options.theme = theme;

	      return this;
	    }

	    /**
	     * @return {Noty}
	     */

	  }, {
	    key: 'close',
	    value: function close() {
	      var _this4 = this;

	      if (this.closed) return this;

	      if (!this.shown) {
	        // it's in the queue
	        API.removeFromQueue(this);
	        return this;
	      }

	      API.fire(this, 'onClose');

	      this.closing = true;

	      if (this.options.animation.close === null || this.options.animation.close === false) {
	        this.promises.close = new _es6Promise2.default(function (resolve) {
	          resolve();
	        });
	      } else if (typeof this.options.animation.close === 'function') {
	        this.promises.close = new _es6Promise2.default(this.options.animation.close.bind(this));
	      } else {
	        Utils.addClass(this.barDom, this.options.animation.close);
	        this.promises.close = new _es6Promise2.default(function (resolve) {
	          Utils.addListener(_this4.barDom, Utils.animationEndEvents, function () {
	            if (_this4.options.force) {
	              Utils.remove(_this4.barDom);
	            } else {
	              API.ghostFix(_this4);
	            }
	            resolve();
	          });
	        });
	      }

	      this.promises.close.then(function () {
	        API.closeFlow(_this4);
	        API.handleModalClose(_this4);
	      });

	      this.closed = true;

	      return this;
	    }

	    // API functions

	    /**
	     * @param {boolean|string} queueName
	     * @return {Noty}
	     */

	  }], [{
	    key: 'closeAll',
	    value: function closeAll() {
	      var queueName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

	      Object.keys(API.Store).forEach(function (id) {
	        if (queueName) {
	          if (API.Store[id].options.queue === queueName && API.Store[id].killable) {
	            API.Store[id].close();
	          }
	        } else if (API.Store[id].killable) {
	          API.Store[id].close();
	        }
	      });
	      return this;
	    }

	    /**
	     * @param {string} queueName
	     * @return {Noty}
	     */

	  }, {
	    key: 'clearQueue',
	    value: function clearQueue() {
	      var queueName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'global';

	      if (API.Queues.hasOwnProperty(queueName)) {
	        API.Queues[queueName].queue = [];
	      }
	      return this;
	    }

	    /**
	     * @return {API.Queues}
	     */

	  }, {
	    key: 'overrideDefaults',


	    /**
	     * @param {Object} obj
	     * @return {Noty}
	     */
	    value: function overrideDefaults(obj) {
	      API.Defaults = Utils.deepExtend({}, API.Defaults, obj);
	      return this;
	    }

	    /**
	     * @param {int} amount
	     * @param {string} queueName
	     * @return {Noty}
	     */

	  }, {
	    key: 'setMaxVisible',
	    value: function setMaxVisible() {
	      var amount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : API.DefaultMaxVisible;
	      var queueName = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'global';

	      if (!API.Queues.hasOwnProperty(queueName)) {
	        API.Queues[queueName] = { maxVisible: amount, queue: [] };
	      }

	      API.Queues[queueName].maxVisible = amount;
	      return this;
	    }

	    /**
	     * @param {string} innerHtml
	     * @param {String} classes
	     * @param {Function} cb
	     * @param {Object} attributes
	     * @return {NotyButton}
	     */

	  }, {
	    key: 'button',
	    value: function button(innerHtml) {
	      var classes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
	      var cb = arguments[2];
	      var attributes = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

	      return new _button.NotyButton(innerHtml, classes, cb, attributes);
	    }

	    /**
	     * @return {string}
	     */

	  }, {
	    key: 'version',
	    value: function version() {
	      return "3.2.0-beta";
	    }

	    /**
	     * @param {String} workerPath
	     * @return {Push}
	     */

	  }, {
	    key: 'Push',
	    value: function Push(workerPath) {
	      return new _push.Push(workerPath);
	    }
	  }, {
	    key: 'Queues',
	    get: function get() {
	      return API.Queues;
	    }

	    /**
	     * @return {API.PageHidden}
	     */

	  }, {
	    key: 'PageHidden',
	    get: function get() {
	      return API.PageHidden;
	    }
	  }]);

	  return Noty;
	}();

	// Document visibility change controller


	exports.default = Noty;
	if (typeof window !== 'undefined') {
	  Utils.visibilityChangeFlow();
	}
	module.exports = exports['default'];

	/***/ }),
	/* 7 */
	/***/ (function(module, exports) {

	// shim for using process in browser
	var process = module.exports = {};

	// cached from whatever global is present so that test runners that stub it
	// don't break things.  But we need to wrap it in a try catch in case it is
	// wrapped in strict mode code which doesn't define any globals.  It's inside a
	// function because try/catches deoptimize in certain engines.

	var cachedSetTimeout;
	var cachedClearTimeout;

	function defaultSetTimout() {
	    throw new Error('setTimeout has not been defined');
	}
	function defaultClearTimeout () {
	    throw new Error('clearTimeout has not been defined');
	}
	(function () {
	    try {
	        if (typeof setTimeout === 'function') {
	            cachedSetTimeout = setTimeout;
	        } else {
	            cachedSetTimeout = defaultSetTimout;
	        }
	    } catch (e) {
	        cachedSetTimeout = defaultSetTimout;
	    }
	    try {
	        if (typeof clearTimeout === 'function') {
	            cachedClearTimeout = clearTimeout;
	        } else {
	            cachedClearTimeout = defaultClearTimeout;
	        }
	    } catch (e) {
	        cachedClearTimeout = defaultClearTimeout;
	    }
	} ());
	function runTimeout(fun) {
	    if (cachedSetTimeout === setTimeout) {
	        //normal enviroments in sane situations
	        return setTimeout(fun, 0);
	    }
	    // if setTimeout wasn't available but was latter defined
	    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
	        cachedSetTimeout = setTimeout;
	        return setTimeout(fun, 0);
	    }
	    try {
	        // when when somebody has screwed with setTimeout but no I.E. maddness
	        return cachedSetTimeout(fun, 0);
	    } catch(e){
	        try {
	            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
	            return cachedSetTimeout.call(null, fun, 0);
	        } catch(e){
	            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
	            return cachedSetTimeout.call(this, fun, 0);
	        }
	    }


	}
	function runClearTimeout(marker) {
	    if (cachedClearTimeout === clearTimeout) {
	        //normal enviroments in sane situations
	        return clearTimeout(marker);
	    }
	    // if clearTimeout wasn't available but was latter defined
	    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
	        cachedClearTimeout = clearTimeout;
	        return clearTimeout(marker);
	    }
	    try {
	        // when when somebody has screwed with setTimeout but no I.E. maddness
	        return cachedClearTimeout(marker);
	    } catch (e){
	        try {
	            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
	            return cachedClearTimeout.call(null, marker);
	        } catch (e){
	            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
	            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
	            return cachedClearTimeout.call(this, marker);
	        }
	    }



	}
	var queue = [];
	var draining = false;
	var currentQueue;
	var queueIndex = -1;

	function cleanUpNextTick() {
	    if (!draining || !currentQueue) {
	        return;
	    }
	    draining = false;
	    if (currentQueue.length) {
	        queue = currentQueue.concat(queue);
	    } else {
	        queueIndex = -1;
	    }
	    if (queue.length) {
	        drainQueue();
	    }
	}

	function drainQueue() {
	    if (draining) {
	        return;
	    }
	    var timeout = runTimeout(cleanUpNextTick);
	    draining = true;

	    var len = queue.length;
	    while(len) {
	        currentQueue = queue;
	        queue = [];
	        while (++queueIndex < len) {
	            if (currentQueue) {
	                currentQueue[queueIndex].run();
	            }
	        }
	        queueIndex = -1;
	        len = queue.length;
	    }
	    currentQueue = null;
	    draining = false;
	    runClearTimeout(timeout);
	}

	process.nextTick = function (fun) {
	    var args = new Array(arguments.length - 1);
	    if (arguments.length > 1) {
	        for (var i = 1; i < arguments.length; i++) {
	            args[i - 1] = arguments[i];
	        }
	    }
	    queue.push(new Item(fun, args));
	    if (queue.length === 1 && !draining) {
	        runTimeout(drainQueue);
	    }
	};

	// v8 likes predictible objects
	function Item(fun, array) {
	    this.fun = fun;
	    this.array = array;
	}
	Item.prototype.run = function () {
	    this.fun.apply(null, this.array);
	};
	process.title = 'browser';
	process.browser = true;
	process.env = {};
	process.argv = [];
	process.version = ''; // empty string to avoid regexp issues
	process.versions = {};

	function noop() {}

	process.on = noop;
	process.addListener = noop;
	process.once = noop;
	process.off = noop;
	process.removeListener = noop;
	process.removeAllListeners = noop;
	process.emit = noop;
	process.prependListener = noop;
	process.prependOnceListener = noop;

	process.listeners = function (name) { return [] };

	process.binding = function (name) {
	    throw new Error('process.binding is not supported');
	};

	process.cwd = function () { return '/' };
	process.chdir = function (dir) {
	    throw new Error('process.chdir is not supported');
	};
	process.umask = function() { return 0; };


	/***/ }),
	/* 8 */
	/***/ (function(module, exports) {

	var g;

	// This works in non-strict mode
	g = (function() {
		return this;
	})();

	try {
		// This works if eval is allowed (see CSP)
		g = g || Function("return this")() || (1,eval)("this");
	} catch(e) {
		// This works if the window reference is available
		if(typeof window === "object")
			g = window;
	}

	// g can still be undefined, but nothing to do about it...
	// We return undefined, instead of nothing here, so it's
	// easier to handle this case. if(!global) { ...}

	module.exports = g;


	/***/ }),
	/* 9 */
	/***/ (function(module, exports) {

	/* (ignored) */

	/***/ })
	/******/ ]);
	});
	
} (noty$1));

var Noty = /*@__PURE__*/getDefaultExportFromCjs(noty$1.exports);

var e=[],t=[];function n(n,r){if(n&&"undefined"!=typeof document){var a,s=!0===r.prepend?"prepend":"append",d=!0===r.singleTag,i="string"==typeof r.container?document.querySelector(r.container):document.getElementsByTagName("head")[0];if(d){var u=e.indexOf(i);-1===u&&(u=e.push(i)-1,t[u]={}),a=t[u]&&t[u][s]?t[u][s]:t[u][s]=c();}else a=c();65279===n.charCodeAt(0)&&(n=n.substring(1)),a.styleSheet?a.styleSheet.cssText+=n:a.appendChild(document.createTextNode(n));}function c(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),r.attributes)for(var t=Object.keys(r.attributes),n=0;n<t.length;n++)e.setAttribute(t[n],r.attributes[t[n]]);var a="prepend"===s?"afterbegin":"beforeend";return i.insertAdjacentElement(a,e),e}}

var css$1 = ".noty_layout_mixin, #noty_layout__top, #noty_layout__topLeft, #noty_layout__topCenter, #noty_layout__topRight, #noty_layout__bottom, #noty_layout__bottomLeft, #noty_layout__bottomCenter, #noty_layout__bottomRight, #noty_layout__center, #noty_layout__centerLeft, #noty_layout__centerRight{\n  position:fixed;\n  margin:0;\n  padding:0;\n  z-index:9999999;\n  -webkit-transform:translateZ(0) scale(1, 1);\n          transform:translateZ(0) scale(1, 1);\n  -webkit-backface-visibility:hidden;\n          backface-visibility:hidden;\n  -webkit-font-smoothing:subpixel-antialiased;\n  filter:blur(0);\n  -webkit-filter:blur(0);\n  max-width:90%; }\n\n#noty_layout__top{\n  top:0;\n  left:5%;\n  width:90%; }\n\n#noty_layout__topLeft{\n  top:20px;\n  left:20px;\n  width:325px; }\n\n#noty_layout__topCenter{\n  top:5%;\n  left:50%;\n  width:325px;\n  -webkit-transform:translate(-webkit-calc(-50% - .5px)) translateZ(0) scale(1, 1);\n          transform:translate(calc(-50% - .5px)) translateZ(0) scale(1, 1); }\n\n#noty_layout__topRight{\n  top:20px;\n  right:20px;\n  width:325px; }\n\n#noty_layout__bottom{\n  bottom:0;\n  left:5%;\n  width:90%; }\n\n#noty_layout__bottomLeft{\n  bottom:20px;\n  left:20px;\n  width:325px; }\n\n#noty_layout__bottomCenter{\n  bottom:5%;\n  left:50%;\n  width:325px;\n  -webkit-transform:translate(-webkit-calc(-50% - .5px)) translateZ(0) scale(1, 1);\n          transform:translate(calc(-50% - .5px)) translateZ(0) scale(1, 1); }\n\n#noty_layout__bottomRight{\n  bottom:20px;\n  right:20px;\n  width:325px; }\n\n#noty_layout__center{\n  top:50%;\n  left:50%;\n  width:325px;\n  -webkit-transform:translate(-webkit-calc(-50% - .5px), -webkit-calc(-50% - .5px)) translateZ(0) scale(1, 1);\n          transform:translate(calc(-50% - .5px), calc(-50% - .5px)) translateZ(0) scale(1, 1); }\n\n#noty_layout__centerLeft{\n  top:50%;\n  left:20px;\n  width:325px;\n  -webkit-transform:translate(0, -webkit-calc(-50% - .5px)) translateZ(0) scale(1, 1);\n          transform:translate(0, calc(-50% - .5px)) translateZ(0) scale(1, 1); }\n\n#noty_layout__centerRight{\n  top:50%;\n  right:20px;\n  width:325px;\n  -webkit-transform:translate(0, -webkit-calc(-50% - .5px)) translateZ(0) scale(1, 1);\n          transform:translate(0, calc(-50% - .5px)) translateZ(0) scale(1, 1); }\n\n.noty_progressbar{\n  display:none; }\n\n.noty_has_timeout.noty_has_progressbar .noty_progressbar{\n  display:block;\n  position:absolute;\n  left:0;\n  bottom:0;\n  height:3px;\n  width:100%;\n  background-color:#646464;\n  opacity:0.2;\n  filter:alpha(opacity=10); }\n\n.noty_bar{\n  -webkit-backface-visibility:hidden;\n  -webkit-transform:translate(0, 0) translateZ(0) scale(1, 1);\n  -ms-transform:translate(0, 0) scale(1, 1);\n      transform:translate(0, 0) scale(1, 1);\n  -webkit-font-smoothing:subpixel-antialiased;\n  overflow:hidden; }\n\n.noty_effects_open{\n  opacity:0;\n  -webkit-transform:translate(50%);\n      -ms-transform:translate(50%);\n          transform:translate(50%);\n  -webkit-animation:noty_anim_in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n          animation:noty_anim_in 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  -webkit-animation-fill-mode:forwards;\n          animation-fill-mode:forwards; }\n\n.noty_effects_close{\n  -webkit-animation:noty_anim_out 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n          animation:noty_anim_out 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);\n  -webkit-animation-fill-mode:forwards;\n          animation-fill-mode:forwards; }\n\n.noty_fix_effects_height{\n  -webkit-animation:noty_anim_height 75ms ease-out;\n          animation:noty_anim_height 75ms ease-out; }\n\n.noty_close_with_click{\n  cursor:pointer; }\n\n.noty_close_button{\n  position:absolute;\n  top:2px;\n  right:2px;\n  font-weight:bold;\n  width:20px;\n  height:20px;\n  text-align:center;\n  line-height:20px;\n  background-color:rgba(0, 0, 0, 0.05);\n  border-radius:2px;\n  cursor:pointer;\n  -webkit-transition:all .2s ease-out;\n  transition:all .2s ease-out; }\n\n.noty_close_button:hover{\n  background-color:rgba(0, 0, 0, 0.1); }\n\n.noty_modal{\n  position:fixed;\n  width:100%;\n  height:100%;\n  background-color:#000;\n  z-index:10000;\n  opacity:.3;\n  left:0;\n  top:0; }\n\n.noty_modal.noty_modal_open{\n  opacity:0;\n  -webkit-animation:noty_modal_in .3s ease-out;\n          animation:noty_modal_in .3s ease-out; }\n\n.noty_modal.noty_modal_close{\n  -webkit-animation:noty_modal_out .3s ease-out;\n          animation:noty_modal_out .3s ease-out;\n  -webkit-animation-fill-mode:forwards;\n          animation-fill-mode:forwards; }\n\n@-webkit-keyframes noty_modal_in{\n  100%{\n    opacity:.3; } }\n\n@keyframes noty_modal_in{\n  100%{\n    opacity:.3; } }\n\n@-webkit-keyframes noty_modal_out{\n  100%{\n    opacity:0; } }\n\n@keyframes noty_modal_out{\n  100%{\n    opacity:0; } }\n\n@keyframes noty_modal_out{\n  100%{\n    opacity:0; } }\n\n@-webkit-keyframes noty_anim_in{\n  100%{\n    -webkit-transform:translate(0);\n            transform:translate(0);\n    opacity:1; } }\n\n@keyframes noty_anim_in{\n  100%{\n    -webkit-transform:translate(0);\n            transform:translate(0);\n    opacity:1; } }\n\n@-webkit-keyframes noty_anim_out{\n  100%{\n    -webkit-transform:translate(50%);\n            transform:translate(50%);\n    opacity:0; } }\n\n@keyframes noty_anim_out{\n  100%{\n    -webkit-transform:translate(50%);\n            transform:translate(50%);\n    opacity:0; } }\n\n@-webkit-keyframes noty_anim_height{\n  100%{\n    height:0; } }\n\n@keyframes noty_anim_height{\n  100%{\n    height:0; } }\n";
n(css$1,{});

var css = ".noty_theme__mint.noty_bar{\n  margin:4px 0;\n  overflow:hidden;\n  border-radius:2px;\n  position:relative; }\n  .noty_theme__mint.noty_bar .noty_body{\n    padding:10px;\n    font-size:14px; }\n  .noty_theme__mint.noty_bar .noty_buttons{\n    padding:10px; }\n\n.noty_theme__mint.noty_type__alert,\n.noty_theme__mint.noty_type__notification{\n  background-color:#fff;\n  border-bottom:1px solid #D1D1D1;\n  color:#2F2F2F; }\n\n.noty_theme__mint.noty_type__warning{\n  background-color:#FFAE42;\n  border-bottom:1px solid #E89F3C;\n  color:#fff; }\n\n.noty_theme__mint.noty_type__error{\n  background-color:#DE636F;\n  border-bottom:1px solid #CA5A65;\n  color:#fff; }\n\n.noty_theme__mint.noty_type__info,\n.noty_theme__mint.noty_type__information{\n  background-color:#7F7EFF;\n  border-bottom:1px solid #7473E8;\n  color:#fff; }\n\n.noty_theme__mint.noty_type__success{\n  background-color:#AFC765;\n  border-bottom:1px solid #A0B55C;\n  color:#fff; }\n";
n(css,{});

var NotyFactory = (function () {
    function NotyFactory() {
    }
    NotyFactory.prototype.success = function (message, title, options) {
        this.flash('success', message, title, options);
    };
    NotyFactory.prototype.info = function (message, title, options) {
        this.flash('info', message, title, options);
    };
    NotyFactory.prototype.warning = function (message, title, options) {
        this.flash('warning', message, title, options);
    };
    NotyFactory.prototype.error = function (message, title, options) {
        this.flash('error', message, title, options);
    };
    NotyFactory.prototype.flash = function (type, message, title, options) {
        var notification = this.createNotification(type, message, title, options);
        this.renderOptions({});
        this.render({ notification: notification });
    };
    NotyFactory.prototype.render = function (envelope) {
        var notification = envelope.notification;
        notification.type = notification.type || 'info';
        var options = __assign({ text: notification.message, type: notification.type }, notification.options);
        new Noty(options).show();
    };
    NotyFactory.prototype.createNotification = function (type, message, title, options) {
        if (typeof type === 'object') {
            options = type;
            type = options.type;
            message = options.message;
            title = options.title;
        }
        else if (typeof message === 'object') {
            options = message;
            message = options.message;
            title = options.title;
        }
        else if (typeof title === 'object') {
            options = title;
            title = options.title;
        }
        if (undefined === message) {
            throw new Error('message option is required');
        }
        return {
            type: type || 'info',
            message: message,
            title: title,
            options: options
        };
    };
    NotyFactory.prototype.renderOptions = function (options) {
        Noty.overrideDefaults(__assign({ timeout: options.timeout || 5000 }, options));
    };
    return NotyFactory;
}());

var noty = new NotyFactory();
flasher__default["default"].addFactory('noty', noty);

module.exports = noty;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfcG5wbV9mbGFzaGVyX2ZsYXNoZXItbm90eV8xXzBfMTFfbm9kZV9tb2R1bGVzX2ZsYXNoZXJfZmxhc2hlci1ub3R5X2Rpc3RfLWI5N2NlNi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBYTs7QUFFYixjQUFjLG1CQUFPLENBQUMsa0hBQWtCOztBQUV4QyxxQ0FBcUMsNERBQTREOztBQUVqRzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQWlELE9BQU87QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0hBQXNILHFCQUFNLG1CQUFtQixxQkFBTTs7QUFFcko7QUFDQTtBQUNBOztBQUVBLGNBQWM7O0FBRWQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLHNDQUFzQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiwrQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMkUsK0JBQW1CO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQkFBbUI7QUFDOUI7QUFDQTtBQUNBLFdBQVcsK0JBQW1CO0FBQzlCO0FBQ0E7QUFDQSxXQUFXLCtCQUFtQix1QkFBdUI7QUFDckQ7QUFDQTtBQUNBLFdBQVcsK0JBQW1CO0FBQzlCLGdCQUFnQiwrQkFBbUI7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtCQUFtQjtBQUM5QjtBQUNBLHFDQUFxQyw0QkFBNEI7QUFDakUsMkNBQTJDO0FBQzNDLFlB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LE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxZQUFZLFFBQVE7QUFDcEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLFlBQVksTUFBTTtBQUNsQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQSxZQUFZLE1BQU07QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLFlBQVksTUFBTTtBQUNsQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxZQUFZLE1BQU07QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFlBQVksTUFBTTtBQUNsQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFlBQVksTUFBTTtBQUNsQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQSxZQUFZLE1BQU07QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG1CQUFtQix3QkFBd0I7QUFDM0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFD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QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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O0FBRUY7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzQkFBc0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FB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aUIseUNBQXlDLDZCQUE2QixvQ0FBb0MsaUJBQWlCO0FBQ3Q4QixRQUFROztBQUVSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0Isc0JBQXNCLDRCQUE0QjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxxREFBcUQ7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxrQ0FBa0M7QUFDM0U7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy8ucG5wbS9AZmxhc2hlcitmbGFzaGVyLW5vdHlAMS4wLjExL25vZGVfbW9kdWxlcy9AZmxhc2hlci9mbGFzaGVyLW5vdHkvZGlzdC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBmbGFzaGVyID0gcmVxdWlyZSgnQGZsYXNoZXIvZmxhc2hlcicpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcERlZmF1bHRMZWdhY3kgKGUpIHsgcmV0dXJuIGUgJiYgdHlwZW9mIGUgPT09ICdvYmplY3QnICYmICdkZWZhdWx0JyBpbiBlID8gZSA6IHsgJ2RlZmF1bHQnOiBlIH07IH1cblxudmFyIGZsYXNoZXJfX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX2ludGVyb3BEZWZhdWx0TGVnYWN5KGZsYXNoZXIpO1xuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbnZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn07XG5cbnZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG5mdW5jdGlvbiBnZXREZWZhdWx0RXhwb3J0RnJvbUNqcyAoeCkge1xuXHRyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4O1xufVxuXG52YXIgbm90eSQxID0ge2V4cG9ydHM6IHt9fTtcblxuLyogXHJcbiAgQHBhY2thZ2UgTk9UWSAtIERlcGVuZGVuY3ktZnJlZSBub3RpZmljYXRpb24gbGlicmFyeSBcclxuICBAdmVyc2lvbiB2ZXJzaW9uOiAzLjIuMC1iZXRhIFxyXG4gIEBjb250cmlidXRvcnMgaHR0cHM6Ly9naXRodWIuY29tL25lZWRpbS9ub3R5L2dyYXBocy9jb250cmlidXRvcnMgXHJcbiAgQGRvY3VtZW50YXRpb24gRXhhbXBsZXMgYW5kIERvY3VtZW50YXRpb24gLSBodHRwczovL25lZC5pbS9ub3R5IFxyXG4gIEBsaWNlbnNlIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZXM6IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwIFxyXG4qL1xuXG4oZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuXHQoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHR9KShjb21tb25qc0dsb2JhbCwgZnVuY3Rpb24oKSB7XG5cdHJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG5cdC8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuXHQvKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cblx0LyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0LyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG5cdC8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXHQvKioqKioqLyBcdFx0fVxuXHQvKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0LyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcblx0LyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG5cdC8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuXHQvKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuXHQvKioqKioqLyBcdFx0fTtcblx0LyoqKioqKi9cblx0LyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHQvKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG5cdC8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHQvKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuXHQvKioqKioqLyBcdH1cblx0LyoqKioqKi9cblx0LyoqKioqKi9cblx0LyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuXHQvKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcblx0LyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXHQvKioqKioqL1xuXHQvKioqKioqLyBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcblx0LyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmkgPSBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWU7IH07XG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG5cdC8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG5cdC8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG5cdC8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG5cdC8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcblx0LyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHQvKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG5cdC8qKioqKiovIFx0XHRcdH0pO1xuXHQvKioqKioqLyBcdFx0fVxuXHQvKioqKioqLyBcdH07XG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcblx0LyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0LyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHQvKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuXHQvKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuXHQvKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuXHQvKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcblx0LyoqKioqKi8gXHR9O1xuXHQvKioqKioqL1xuXHQvKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuXHQvKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblx0LyoqKioqKi9cblx0LyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuXHQvKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cdC8qKioqKiovXG5cdC8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5cdC8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG5cdC8qKioqKiovIH0pXG5cdC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cdC8qKioqKiovIChbXG5cdC8qIDAgKi9cblx0LyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuY3NzID0gZXhwb3J0cy5kZWVwRXh0ZW5kID0gZXhwb3J0cy5hbmltYXRpb25FbmRFdmVudHMgPSB1bmRlZmluZWQ7XG5cblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5cdGV4cG9ydHMuaW5BcnJheSA9IGluQXJyYXk7XG5cdGV4cG9ydHMuc3RvcFByb3BhZ2F0aW9uID0gc3RvcFByb3BhZ2F0aW9uO1xuXHRleHBvcnRzLmdlbmVyYXRlSUQgPSBnZW5lcmF0ZUlEO1xuXHRleHBvcnRzLm91dGVySGVpZ2h0ID0gb3V0ZXJIZWlnaHQ7XG5cdGV4cG9ydHMuYWRkTGlzdGVuZXIgPSBhZGRMaXN0ZW5lcjtcblx0ZXhwb3J0cy5oYXNDbGFzcyA9IGhhc0NsYXNzO1xuXHRleHBvcnRzLmFkZENsYXNzID0gYWRkQ2xhc3M7XG5cdGV4cG9ydHMucmVtb3ZlQ2xhc3MgPSByZW1vdmVDbGFzcztcblx0ZXhwb3J0cy5yZW1vdmUgPSByZW1vdmU7XG5cdGV4cG9ydHMuY2xhc3NMaXN0ID0gY2xhc3NMaXN0O1xuXHRleHBvcnRzLnZpc2liaWxpdHlDaGFuZ2VGbG93ID0gdmlzaWJpbGl0eUNoYW5nZUZsb3c7XG5cdGV4cG9ydHMuY3JlYXRlQXVkaW9FbGVtZW50cyA9IGNyZWF0ZUF1ZGlvRWxlbWVudHM7XG5cblx0dmFyIF9hcGkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cdHZhciBBUEkgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfYXBpKTtcblxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5cdGV4cG9ydHMuYW5pbWF0aW9uRW5kRXZlbnRzID0gJ3dlYmtpdEFuaW1hdGlvbkVuZCBtb3pBbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgb2FuaW1hdGlvbmVuZCBhbmltYXRpb25lbmQnO1xuXG5cdGZ1bmN0aW9uIGluQXJyYXkobmVlZGxlLCBoYXlzdGFjaywgYXJnU3RyaWN0KSB7XG5cdCAgdmFyIGtleSA9IHZvaWQgMDtcblx0ICB2YXIgc3RyaWN0ID0gISFhcmdTdHJpY3Q7XG5cblx0ICBpZiAoc3RyaWN0KSB7XG5cdCAgICBmb3IgKGtleSBpbiBoYXlzdGFjaykge1xuXHQgICAgICBpZiAoaGF5c3RhY2suaGFzT3duUHJvcGVydHkoa2V5KSAmJiBoYXlzdGFja1trZXldID09PSBuZWVkbGUpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBmb3IgKGtleSBpbiBoYXlzdGFjaykge1xuXHQgICAgICBpZiAoaGF5c3RhY2suaGFzT3duUHJvcGVydHkoa2V5KSAmJiBoYXlzdGFja1trZXldID09PSBuZWVkbGUpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24oZXZ0KSB7XG5cdCAgZXZ0ID0gZXZ0IHx8IHdpbmRvdy5ldmVudDtcblxuXHQgIGlmICh0eXBlb2YgZXZ0LnN0b3BQcm9wYWdhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZXZ0LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG5cdCAgfVxuXHR9XG5cblx0ZXhwb3J0cy5kZWVwRXh0ZW5kID0gZnVuY3Rpb24gZGVlcEV4dGVuZChvdXQpIHtcblx0ICBvdXQgPSBvdXQgfHwge307XG5cblx0ICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tpXTtcblxuXHQgICAgaWYgKCFvYmopIGNvbnRpbnVlO1xuXG5cdCAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9ialtrZXldKSkge1xuXHQgICAgICAgICAgb3V0W2tleV0gPSBvYmpba2V5XTtcblx0ICAgICAgICB9IGVsc2UgaWYgKF90eXBlb2Yob2JqW2tleV0pID09PSAnb2JqZWN0JyAmJiBvYmpba2V5XSAhPT0gbnVsbCkge1xuXHQgICAgICAgICAgb3V0W2tleV0gPSBkZWVwRXh0ZW5kKG91dFtrZXldLCBvYmpba2V5XSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG91dFtrZXldID0gb2JqW2tleV07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgcmV0dXJuIG91dDtcblx0fTtcblxuXHRmdW5jdGlvbiBnZW5lcmF0ZUlEKCkge1xuXHQgIHZhciBwcmVmaXggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnO1xuXG5cdCAgdmFyIGlkID0gJ25vdHlfJyArIHByZWZpeCArICdfJztcblxuXHQgIGlkICs9ICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcblx0ICAgIHZhciByID0gTWF0aC5yYW5kb20oKSAqIDE2IHwgMDtcblx0ICAgIHZhciB2ID0gYyA9PT0gJ3gnID8gciA6IHIgJiAweDMgfCAweDg7XG5cdCAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG5cdCAgfSk7XG5cblx0ICByZXR1cm4gaWQ7XG5cdH1cblxuXHRmdW5jdGlvbiBvdXRlckhlaWdodChlbCkge1xuXHQgIHZhciBoZWlnaHQgPSBlbC5vZmZzZXRIZWlnaHQ7XG5cdCAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpO1xuXG5cdCAgaGVpZ2h0ICs9IHBhcnNlSW50KHN0eWxlLm1hcmdpblRvcCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5Cb3R0b20pO1xuXHQgIHJldHVybiBoZWlnaHQ7XG5cdH1cblxuXHRleHBvcnRzLmNzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgY3NzUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdPJywgJ01veicsICdtcyddO1xuXHQgIHZhciBjc3NQcm9wcyA9IHt9O1xuXG5cdCAgZnVuY3Rpb24gY2FtZWxDYXNlKHN0cmluZykge1xuXHQgICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC9eLW1zLS8sICdtcy0nKS5yZXBsYWNlKC8tKFtcXGRhLXpdKS9naSwgZnVuY3Rpb24gKG1hdGNoLCBsZXR0ZXIpIHtcblx0ICAgICAgcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuXHQgICAgfSk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gZ2V0VmVuZG9yUHJvcChuYW1lKSB7XG5cdCAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5ib2R5LnN0eWxlO1xuXHQgICAgaWYgKG5hbWUgaW4gc3R5bGUpIHJldHVybiBuYW1lO1xuXG5cdCAgICB2YXIgaSA9IGNzc1ByZWZpeGVzLmxlbmd0aDtcblx0ICAgIHZhciBjYXBOYW1lID0gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7XG5cdCAgICB2YXIgdmVuZG9yTmFtZSA9IHZvaWQgMDtcblxuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2ZW5kb3JOYW1lID0gY3NzUHJlZml4ZXNbaV0gKyBjYXBOYW1lO1xuXHQgICAgICBpZiAodmVuZG9yTmFtZSBpbiBzdHlsZSkgcmV0dXJuIHZlbmRvck5hbWU7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiBuYW1lO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGdldFN0eWxlUHJvcChuYW1lKSB7XG5cdCAgICBuYW1lID0gY2FtZWxDYXNlKG5hbWUpO1xuXHQgICAgcmV0dXJuIGNzc1Byb3BzW25hbWVdIHx8IChjc3NQcm9wc1tuYW1lXSA9IGdldFZlbmRvclByb3AobmFtZSkpO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIGFwcGx5Q3NzKGVsZW1lbnQsIHByb3AsIHZhbHVlKSB7XG5cdCAgICBwcm9wID0gZ2V0U3R5bGVQcm9wKHByb3ApO1xuXHQgICAgZWxlbWVudC5zdHlsZVtwcm9wXSA9IHZhbHVlO1xuXHQgIH1cblxuXHQgIHJldHVybiBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcGVydGllcykge1xuXHQgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICB2YXIgcHJvcCA9IHZvaWQgMDtcblx0ICAgIHZhciB2YWx1ZSA9IHZvaWQgMDtcblxuXHQgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAyKSB7XG5cdCAgICAgIGZvciAocHJvcCBpbiBwcm9wZXJ0aWVzKSB7XG5cdCAgICAgICAgaWYgKHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcblx0ICAgICAgICAgIHZhbHVlID0gcHJvcGVydGllc1twcm9wXTtcblx0ICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcblx0ICAgICAgICAgICAgYXBwbHlDc3MoZWxlbWVudCwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYXBwbHlDc3MoZWxlbWVudCwgYXJnc1sxXSwgYXJnc1syXSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fSgpO1xuXG5cdGZ1bmN0aW9uIGFkZExpc3RlbmVyKGVsLCBldmVudHMsIGNiKSB7XG5cdCAgdmFyIHVzZUNhcHR1cmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZhbHNlO1xuXG5cdCAgZXZlbnRzID0gZXZlbnRzLnNwbGl0KCcgJyk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSB7XG5cdCAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzW2ldLCBjYiwgdXNlQ2FwdHVyZSk7XG5cdCAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmF0dGFjaEV2ZW50KSB7XG5cdCAgICAgIGVsLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudHNbaV0sIGNiKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiBoYXNDbGFzcyhlbGVtZW50LCBuYW1lKSB7XG5cdCAgdmFyIGxpc3QgPSB0eXBlb2YgZWxlbWVudCA9PT0gJ3N0cmluZycgPyBlbGVtZW50IDogY2xhc3NMaXN0KGVsZW1lbnQpO1xuXHQgIHJldHVybiBsaXN0LmluZGV4T2YoJyAnICsgbmFtZSArICcgJykgPj0gMDtcblx0fVxuXG5cdGZ1bmN0aW9uIGFkZENsYXNzKGVsZW1lbnQsIG5hbWUpIHtcblx0ICB2YXIgb2xkTGlzdCA9IGNsYXNzTGlzdChlbGVtZW50KTtcblx0ICB2YXIgbmV3TGlzdCA9IG9sZExpc3QgKyBuYW1lO1xuXG5cdCAgaWYgKGhhc0NsYXNzKG9sZExpc3QsIG5hbWUpKSByZXR1cm47XG5cblx0ICAvLyBUcmltIHRoZSBvcGVuaW5nIHNwYWNlLlxuXHQgIGVsZW1lbnQuY2xhc3NOYW1lID0gbmV3TGlzdC5zdWJzdHJpbmcoMSk7XG5cdH1cblxuXHRmdW5jdGlvbiByZW1vdmVDbGFzcyhlbGVtZW50LCBuYW1lKSB7XG5cdCAgdmFyIG9sZExpc3QgPSBjbGFzc0xpc3QoZWxlbWVudCk7XG5cdCAgdmFyIG5ld0xpc3QgPSB2b2lkIDA7XG5cblx0ICBpZiAoIWhhc0NsYXNzKGVsZW1lbnQsIG5hbWUpKSByZXR1cm47XG5cblx0ICAvLyBSZXBsYWNlIHRoZSBjbGFzcyBuYW1lLlxuXHQgIG5ld0xpc3QgPSBvbGRMaXN0LnJlcGxhY2UoJyAnICsgbmFtZSArICcgJywgJyAnKTtcblxuXHQgIC8vIFRyaW0gdGhlIG9wZW5pbmcgYW5kIGNsb3Npbmcgc3BhY2VzLlxuXHQgIGVsZW1lbnQuY2xhc3NOYW1lID0gbmV3TGlzdC5zdWJzdHJpbmcoMSwgbmV3TGlzdC5sZW5ndGggLSAxKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZShlbGVtZW50KSB7XG5cdCAgaWYgKGVsZW1lbnQucGFyZW50Tm9kZSkge1xuXHQgICAgZWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW1lbnQpO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNsYXNzTGlzdChlbGVtZW50KSB7XG5cdCAgcmV0dXJuICgnICcgKyAoZWxlbWVudCAmJiBlbGVtZW50LmNsYXNzTmFtZSB8fCAnJykgKyAnICcpLnJlcGxhY2UoL1xccysvZ2ksICcgJyk7XG5cdH1cblxuXHRmdW5jdGlvbiB2aXNpYmlsaXR5Q2hhbmdlRmxvdygpIHtcblx0ICB2YXIgaGlkZGVuID0gdm9pZCAwO1xuXHQgIHZhciB2aXNpYmlsaXR5Q2hhbmdlID0gdm9pZCAwO1xuXHQgIGlmICh0eXBlb2YgZG9jdW1lbnQuaGlkZGVuICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgLy8gT3BlcmEgMTIuMTAgYW5kIEZpcmVmb3ggMTggYW5kIGxhdGVyIHN1cHBvcnRcblx0ICAgIGhpZGRlbiA9ICdoaWRkZW4nO1xuXHQgICAgdmlzaWJpbGl0eUNoYW5nZSA9ICd2aXNpYmlsaXR5Y2hhbmdlJztcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC5tc0hpZGRlbiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIGhpZGRlbiA9ICdtc0hpZGRlbic7XG5cdCAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ21zdmlzaWJpbGl0eWNoYW5nZSc7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQud2Via2l0SGlkZGVuICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgaGlkZGVuID0gJ3dlYmtpdEhpZGRlbic7XG5cdCAgICB2aXNpYmlsaXR5Q2hhbmdlID0gJ3dlYmtpdHZpc2liaWxpdHljaGFuZ2UnO1xuXHQgIH1cblxuXHQgIGZ1bmN0aW9uIG9uVmlzaWJpbGl0eUNoYW5nZSgpIHtcblx0ICAgIEFQSS5QYWdlSGlkZGVuID0gZG9jdW1lbnRbaGlkZGVuXTtcblx0ICAgIGhhbmRsZVZpc2liaWxpdHlDaGFuZ2UoKTtcblx0ICB9XG5cblx0ICBmdW5jdGlvbiBvbkJsdXIoKSB7XG5cdCAgICBBUEkuUGFnZUhpZGRlbiA9IHRydWU7XG5cdCAgICBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gb25Gb2N1cygpIHtcblx0ICAgIEFQSS5QYWdlSGlkZGVuID0gZmFsc2U7XG5cdCAgICBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKCk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gaGFuZGxlVmlzaWJpbGl0eUNoYW5nZSgpIHtcblx0ICAgIGlmIChBUEkuUGFnZUhpZGRlbikgc3RvcEFsbCgpO2Vsc2UgcmVzdW1lQWxsKCk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gc3RvcEFsbCgpIHtcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICBPYmplY3Qua2V5cyhBUEkuU3RvcmUpLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgaWYgKEFQSS5TdG9yZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcblx0ICAgICAgICAgIGlmIChBUEkuU3RvcmVbaWRdLm9wdGlvbnMudmlzaWJpbGl0eUNvbnRyb2wpIHtcblx0ICAgICAgICAgICAgQVBJLlN0b3JlW2lkXS5zdG9wKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0sIDEwMCk7XG5cdCAgfVxuXG5cdCAgZnVuY3Rpb24gcmVzdW1lQWxsKCkge1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIE9iamVjdC5rZXlzKEFQSS5TdG9yZSkuZm9yRWFjaChmdW5jdGlvbiAoaWQpIHtcblx0ICAgICAgICBpZiAoQVBJLlN0b3JlLmhhc093blByb3BlcnR5KGlkKSkge1xuXHQgICAgICAgICAgaWYgKEFQSS5TdG9yZVtpZF0ub3B0aW9ucy52aXNpYmlsaXR5Q29udHJvbCkge1xuXHQgICAgICAgICAgICBBUEkuU3RvcmVbaWRdLnJlc3VtZSgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIEFQSS5xdWV1ZVJlbmRlckFsbCgpO1xuXHQgICAgfSwgMTAwKTtcblx0ICB9XG5cblx0ICBpZiAodmlzaWJpbGl0eUNoYW5nZSkge1xuXHQgICAgYWRkTGlzdGVuZXIoZG9jdW1lbnQsIHZpc2liaWxpdHlDaGFuZ2UsIG9uVmlzaWJpbGl0eUNoYW5nZSk7XG5cdCAgfVxuXG5cdCAgYWRkTGlzdGVuZXIod2luZG93LCAnYmx1cicsIG9uQmx1cik7XG5cdCAgYWRkTGlzdGVuZXIod2luZG93LCAnZm9jdXMnLCBvbkZvY3VzKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZUF1ZGlvRWxlbWVudHMocmVmKSB7XG5cdCAgaWYgKHJlZi5oYXNTb3VuZCkge1xuXHQgICAgdmFyIGF1ZGlvRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG5cblx0ICAgIHJlZi5vcHRpb25zLnNvdW5kcy5zb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcblx0ICAgICAgdmFyIHNvdXJjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NvdXJjZScpO1xuXHQgICAgICBzb3VyY2Uuc3JjID0gcztcblx0ICAgICAgc291cmNlLnR5cGUgPSAnYXVkaW8vJyArIGdldEV4dGVuc2lvbihzKTtcblx0ICAgICAgYXVkaW9FbGVtZW50LmFwcGVuZENoaWxkKHNvdXJjZSk7XG5cdCAgICB9KTtcblxuXHQgICAgaWYgKHJlZi5iYXJEb20pIHtcblx0ICAgICAgcmVmLmJhckRvbS5hcHBlbmRDaGlsZChhdWRpb0VsZW1lbnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmFwcGVuZENoaWxkKGF1ZGlvRWxlbWVudCk7XG5cdCAgICB9XG5cblx0ICAgIGF1ZGlvRWxlbWVudC52b2x1bWUgPSByZWYub3B0aW9ucy5zb3VuZHMudm9sdW1lO1xuXG5cdCAgICBpZiAoIXJlZi5zb3VuZFBsYXllZCkge1xuXHQgICAgICBhdWRpb0VsZW1lbnQucGxheSgpO1xuXHQgICAgICByZWYuc291bmRQbGF5ZWQgPSB0cnVlO1xuXHQgICAgfVxuXG5cdCAgICBhdWRpb0VsZW1lbnQub25lbmRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmVtb3ZlKGF1ZGlvRWxlbWVudCk7XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIGdldEV4dGVuc2lvbihmaWxlTmFtZSkge1xuXHQgIHJldHVybiBmaWxlTmFtZS5tYXRjaCgvXFwuKFteLl0rKSQvKVsxXTtcblx0fVxuXG5cdC8qKiovIH0pLFxuXHQvKiAxICovXG5cdC8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLkRlZmF1bHRzID0gZXhwb3J0cy5TdG9yZSA9IGV4cG9ydHMuUXVldWVzID0gZXhwb3J0cy5EZWZhdWx0TWF4VmlzaWJsZSA9IGV4cG9ydHMuZG9jVGl0bGUgPSBleHBvcnRzLkRvY01vZGFsQ291bnQgPSBleHBvcnRzLlBhZ2VIaWRkZW4gPSB1bmRlZmluZWQ7XG5cdGV4cG9ydHMuZ2V0UXVldWVDb3VudHMgPSBnZXRRdWV1ZUNvdW50cztcblx0ZXhwb3J0cy5hZGRUb1F1ZXVlID0gYWRkVG9RdWV1ZTtcblx0ZXhwb3J0cy5yZW1vdmVGcm9tUXVldWUgPSByZW1vdmVGcm9tUXVldWU7XG5cdGV4cG9ydHMucXVldWVSZW5kZXIgPSBxdWV1ZVJlbmRlcjtcblx0ZXhwb3J0cy5xdWV1ZVJlbmRlckFsbCA9IHF1ZXVlUmVuZGVyQWxsO1xuXHRleHBvcnRzLmdob3N0Rml4ID0gZ2hvc3RGaXg7XG5cdGV4cG9ydHMuYnVpbGQgPSBidWlsZDtcblx0ZXhwb3J0cy5oYXNCdXR0b25zID0gaGFzQnV0dG9ucztcblx0ZXhwb3J0cy5oYW5kbGVNb2RhbCA9IGhhbmRsZU1vZGFsO1xuXHRleHBvcnRzLmhhbmRsZU1vZGFsQ2xvc2UgPSBoYW5kbGVNb2RhbENsb3NlO1xuXHRleHBvcnRzLnF1ZXVlQ2xvc2UgPSBxdWV1ZUNsb3NlO1xuXHRleHBvcnRzLmRlcXVldWVDbG9zZSA9IGRlcXVldWVDbG9zZTtcblx0ZXhwb3J0cy5maXJlID0gZmlyZTtcblx0ZXhwb3J0cy5vcGVuRmxvdyA9IG9wZW5GbG93O1xuXHRleHBvcnRzLmNsb3NlRmxvdyA9IGNsb3NlRmxvdztcblxuXHR2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXHR2YXIgVXRpbHMgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChfdXRpbHMpO1xuXG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cblx0ZXhwb3J0cy5QYWdlSGlkZGVuID0gZmFsc2U7XG5cdHZhciBEb2NNb2RhbENvdW50ID0gZXhwb3J0cy5Eb2NNb2RhbENvdW50ID0gMDtcblxuXHR2YXIgRG9jVGl0bGVQcm9wcyA9IHtcblx0ICBvcmlnaW5hbFRpdGxlOiBudWxsLFxuXHQgIGNvdW50OiAwLFxuXHQgIGNoYW5nZWQ6IGZhbHNlLFxuXHQgIHRpbWVyOiAtMVxuXHR9O1xuXG5cdHZhciBkb2NUaXRsZSA9IGV4cG9ydHMuZG9jVGl0bGUgPSB7XG5cdCAgaW5jcmVtZW50OiBmdW5jdGlvbiBpbmNyZW1lbnQoKSB7XG5cdCAgICBEb2NUaXRsZVByb3BzLmNvdW50Kys7XG5cblx0ICAgIGRvY1RpdGxlLl91cGRhdGUoKTtcblx0ICB9LFxuXG5cdCAgZGVjcmVtZW50OiBmdW5jdGlvbiBkZWNyZW1lbnQoKSB7XG5cdCAgICBEb2NUaXRsZVByb3BzLmNvdW50LS07XG5cblx0ICAgIGlmIChEb2NUaXRsZVByb3BzLmNvdW50IDw9IDApIHtcblx0ICAgICAgZG9jVGl0bGUuX2NsZWFyKCk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblxuXHQgICAgZG9jVGl0bGUuX3VwZGF0ZSgpO1xuXHQgIH0sXG5cblx0ICBfdXBkYXRlOiBmdW5jdGlvbiBfdXBkYXRlKCkge1xuXHQgICAgdmFyIHRpdGxlID0gZG9jdW1lbnQudGl0bGU7XG5cblx0ICAgIGlmICghRG9jVGl0bGVQcm9wcy5jaGFuZ2VkKSB7XG5cdCAgICAgIERvY1RpdGxlUHJvcHMub3JpZ2luYWxUaXRsZSA9IHRpdGxlO1xuXHQgICAgICBkb2N1bWVudC50aXRsZSA9ICcoJyArIERvY1RpdGxlUHJvcHMuY291bnQgKyAnKSAnICsgdGl0bGU7XG5cdCAgICAgIERvY1RpdGxlUHJvcHMuY2hhbmdlZCA9IHRydWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkb2N1bWVudC50aXRsZSA9ICcoJyArIERvY1RpdGxlUHJvcHMuY291bnQgKyAnKSAnICsgRG9jVGl0bGVQcm9wcy5vcmlnaW5hbFRpdGxlO1xuXHQgICAgfVxuXHQgIH0sXG5cblx0ICBfY2xlYXI6IGZ1bmN0aW9uIF9jbGVhcigpIHtcblx0ICAgIGlmIChEb2NUaXRsZVByb3BzLmNoYW5nZWQpIHtcblx0ICAgICAgRG9jVGl0bGVQcm9wcy5jb3VudCA9IDA7XG5cdCAgICAgIGRvY3VtZW50LnRpdGxlID0gRG9jVGl0bGVQcm9wcy5vcmlnaW5hbFRpdGxlO1xuXHQgICAgICBEb2NUaXRsZVByb3BzLmNoYW5nZWQgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cblx0dmFyIERlZmF1bHRNYXhWaXNpYmxlID0gZXhwb3J0cy5EZWZhdWx0TWF4VmlzaWJsZSA9IDU7XG5cblx0dmFyIFF1ZXVlcyA9IGV4cG9ydHMuUXVldWVzID0ge1xuXHQgIGdsb2JhbDoge1xuXHQgICAgbWF4VmlzaWJsZTogRGVmYXVsdE1heFZpc2libGUsXG5cdCAgICBxdWV1ZTogW11cblx0ICB9XG5cdH07XG5cblx0dmFyIFN0b3JlID0gZXhwb3J0cy5TdG9yZSA9IHt9O1xuXG5cdGV4cG9ydHMuRGVmYXVsdHMgPSB7XG5cdCAgdHlwZTogJ2FsZXJ0Jyxcblx0ICBsYXlvdXQ6ICd0b3BSaWdodCcsXG5cdCAgdGhlbWU6ICdtaW50Jyxcblx0ICB0ZXh0OiAnJyxcblx0ICB0aW1lb3V0OiBmYWxzZSxcblx0ICBwcm9ncmVzc0JhcjogdHJ1ZSxcblx0ICBjbG9zZVdpdGg6IFsnY2xpY2snXSxcblx0ICBhbmltYXRpb246IHtcblx0ICAgIG9wZW46ICdub3R5X2VmZmVjdHNfb3BlbicsXG5cdCAgICBjbG9zZTogJ25vdHlfZWZmZWN0c19jbG9zZSdcblx0ICB9LFxuXHQgIGlkOiBmYWxzZSxcblx0ICBmb3JjZTogZmFsc2UsXG5cdCAga2lsbGVyOiBmYWxzZSxcblx0ICBxdWV1ZTogJ2dsb2JhbCcsXG5cdCAgY29udGFpbmVyOiBmYWxzZSxcblx0ICBidXR0b25zOiBbXSxcblx0ICBjYWxsYmFja3M6IHtcblx0ICAgIGJlZm9yZVNob3c6IG51bGwsXG5cdCAgICBvblNob3c6IG51bGwsXG5cdCAgICBhZnRlclNob3c6IG51bGwsXG5cdCAgICBvbkNsb3NlOiBudWxsLFxuXHQgICAgYWZ0ZXJDbG9zZTogbnVsbCxcblx0ICAgIG9uQ2xpY2s6IG51bGwsXG5cdCAgICBvbkhvdmVyOiBudWxsLFxuXHQgICAgb25UZW1wbGF0ZTogbnVsbFxuXHQgIH0sXG5cdCAgc291bmRzOiB7XG5cdCAgICBzb3VyY2VzOiBbXSxcblx0ICAgIHZvbHVtZTogMSxcblx0ICAgIGNvbmRpdGlvbnM6IFtdXG5cdCAgfSxcblx0ICB0aXRsZUNvdW50OiB7XG5cdCAgICBjb25kaXRpb25zOiBbXVxuXHQgIH0sXG5cdCAgbW9kYWw6IGZhbHNlLFxuXHQgIHZpc2liaWxpdHlDb250cm9sOiBmYWxzZVxuXG5cdCAgLyoqXHJcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gcXVldWVOYW1lXHJcblx0ICAgKiBAcmV0dXJuIHtvYmplY3R9XHJcblx0ICAgKi9cblx0fTtmdW5jdGlvbiBnZXRRdWV1ZUNvdW50cygpIHtcblx0ICB2YXIgcXVldWVOYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnZ2xvYmFsJztcblxuXHQgIHZhciBjb3VudCA9IDA7XG5cdCAgdmFyIG1heCA9IERlZmF1bHRNYXhWaXNpYmxlO1xuXG5cdCAgaWYgKFF1ZXVlcy5oYXNPd25Qcm9wZXJ0eShxdWV1ZU5hbWUpKSB7XG5cdCAgICBtYXggPSBRdWV1ZXNbcXVldWVOYW1lXS5tYXhWaXNpYmxlO1xuXHQgICAgT2JqZWN0LmtleXMoU3RvcmUpLmZvckVhY2goZnVuY3Rpb24gKGkpIHtcblx0ICAgICAgaWYgKFN0b3JlW2ldLm9wdGlvbnMucXVldWUgPT09IHF1ZXVlTmFtZSAmJiAhU3RvcmVbaV0uY2xvc2VkKSBjb3VudCsrO1xuXHQgICAgfSk7XG5cdCAgfVxuXG5cdCAgcmV0dXJuIHtcblx0ICAgIGN1cnJlbnQ6IGNvdW50LFxuXHQgICAgbWF4VmlzaWJsZTogbWF4XG5cdCAgfTtcblx0fVxuXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7Tm90eX0gcmVmXHJcblx0ICogQHJldHVybiB7dm9pZH1cclxuXHQgKi9cblx0ZnVuY3Rpb24gYWRkVG9RdWV1ZShyZWYpIHtcblx0ICBpZiAoIVF1ZXVlcy5oYXNPd25Qcm9wZXJ0eShyZWYub3B0aW9ucy5xdWV1ZSkpIHtcblx0ICAgIFF1ZXVlc1tyZWYub3B0aW9ucy5xdWV1ZV0gPSB7IG1heFZpc2libGU6IERlZmF1bHRNYXhWaXNpYmxlLCBxdWV1ZTogW10gfTtcblx0ICB9XG5cblx0ICBRdWV1ZXNbcmVmLm9wdGlvbnMucXVldWVdLnF1ZXVlLnB1c2gocmVmKTtcblx0fVxuXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7Tm90eX0gcmVmXHJcblx0ICogQHJldHVybiB7dm9pZH1cclxuXHQgKi9cblx0ZnVuY3Rpb24gcmVtb3ZlRnJvbVF1ZXVlKHJlZikge1xuXHQgIGlmIChRdWV1ZXMuaGFzT3duUHJvcGVydHkocmVmLm9wdGlvbnMucXVldWUpKSB7XG5cdCAgICB2YXIgcXVldWUgPSBbXTtcblx0ICAgIE9iamVjdC5rZXlzKFF1ZXVlc1tyZWYub3B0aW9ucy5xdWV1ZV0ucXVldWUpLmZvckVhY2goZnVuY3Rpb24gKGkpIHtcblx0ICAgICAgaWYgKFF1ZXVlc1tyZWYub3B0aW9ucy5xdWV1ZV0ucXVldWVbaV0uaWQgIT09IHJlZi5pZCkge1xuXHQgICAgICAgIHF1ZXVlLnB1c2goUXVldWVzW3JlZi5vcHRpb25zLnF1ZXVlXS5xdWV1ZVtpXSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgICAgUXVldWVzW3JlZi5vcHRpb25zLnF1ZXVlXS5xdWV1ZSA9IHF1ZXVlO1xuXHQgIH1cblx0fVxuXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZU5hbWVcclxuXHQgKiBAcmV0dXJuIHt2b2lkfVxyXG5cdCAqL1xuXHRmdW5jdGlvbiBxdWV1ZVJlbmRlcigpIHtcblx0ICB2YXIgcXVldWVOYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnZ2xvYmFsJztcblxuXHQgIGlmIChRdWV1ZXMuaGFzT3duUHJvcGVydHkocXVldWVOYW1lKSkge1xuXHQgICAgdmFyIG5vdHkgPSBRdWV1ZXNbcXVldWVOYW1lXS5xdWV1ZS5zaGlmdCgpO1xuXG5cdCAgICBpZiAobm90eSkgbm90eS5zaG93KCk7XG5cdCAgfVxuXHR9XG5cblx0LyoqXHJcblx0ICogQHJldHVybiB7dm9pZH1cclxuXHQgKi9cblx0ZnVuY3Rpb24gcXVldWVSZW5kZXJBbGwoKSB7XG5cdCAgT2JqZWN0LmtleXMoUXVldWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChxdWV1ZU5hbWUpIHtcblx0ICAgIHF1ZXVlUmVuZGVyKHF1ZXVlTmFtZSk7XG5cdCAgfSk7XG5cdH1cblxuXHQvKipcclxuXHQgKiBAcGFyYW0ge05vdHl9IHJlZlxyXG5cdCAqIEByZXR1cm4ge3ZvaWR9XHJcblx0ICovXG5cdGZ1bmN0aW9uIGdob3N0Rml4KHJlZikge1xuXHQgIHZhciBnaG9zdElEID0gVXRpbHMuZ2VuZXJhdGVJRCgnZ2hvc3QnKTtcblx0ICB2YXIgZ2hvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICBnaG9zdC5zZXRBdHRyaWJ1dGUoJ2lkJywgZ2hvc3RJRCk7XG5cdCAgVXRpbHMuY3NzKGdob3N0LCB7XG5cdCAgICBoZWlnaHQ6IFV0aWxzLm91dGVySGVpZ2h0KHJlZi5iYXJEb20pICsgJ3B4J1xuXHQgIH0pO1xuXG5cdCAgcmVmLmJhckRvbS5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyZW5kJywgZ2hvc3Qub3V0ZXJIVE1MKTtcblxuXHQgIFV0aWxzLnJlbW92ZShyZWYuYmFyRG9tKTtcblx0ICBnaG9zdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdob3N0SUQpO1xuXHQgIFV0aWxzLmFkZENsYXNzKGdob3N0LCAnbm90eV9maXhfZWZmZWN0c19oZWlnaHQnKTtcblx0ICBVdGlscy5hZGRMaXN0ZW5lcihnaG9zdCwgVXRpbHMuYW5pbWF0aW9uRW5kRXZlbnRzLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBVdGlscy5yZW1vdmUoZ2hvc3QpO1xuXHQgIH0pO1xuXHR9XG5cblx0LyoqXHJcblx0ICogQHBhcmFtIHtOb3R5fSByZWZcclxuXHQgKiBAcmV0dXJuIHt2b2lkfVxyXG5cdCAqL1xuXHRmdW5jdGlvbiBidWlsZChyZWYpIHtcblx0ICBmaW5kT3JDcmVhdGVDb250YWluZXIocmVmKTtcblxuXHQgIHZhciBtYXJrdXAgPSAnPGRpdiBjbGFzcz1cIm5vdHlfYm9keVwiPicgKyByZWYub3B0aW9ucy50ZXh0ICsgJzwvZGl2PicgKyBidWlsZEJ1dHRvbnMocmVmKSArICc8ZGl2IGNsYXNzPVwibm90eV9wcm9ncmVzc2JhclwiPjwvZGl2Pic7XG5cblx0ICByZWYuYmFyRG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgcmVmLmJhckRvbS5zZXRBdHRyaWJ1dGUoJ2lkJywgcmVmLmlkKTtcblx0ICBVdGlscy5hZGRDbGFzcyhyZWYuYmFyRG9tLCAnbm90eV9iYXIgbm90eV90eXBlX18nICsgcmVmLm9wdGlvbnMudHlwZSArICcgbm90eV90aGVtZV9fJyArIHJlZi5vcHRpb25zLnRoZW1lKTtcblxuXHQgIHJlZi5iYXJEb20uaW5uZXJIVE1MID0gbWFya3VwO1xuXG5cdCAgZmlyZShyZWYsICdvblRlbXBsYXRlJyk7XG5cdH1cblxuXHQvKipcclxuXHQgKiBAcGFyYW0ge05vdHl9IHJlZlxyXG5cdCAqIEByZXR1cm4ge2Jvb2xlYW59XHJcblx0ICovXG5cdGZ1bmN0aW9uIGhhc0J1dHRvbnMocmVmKSB7XG5cdCAgcmV0dXJuICEhKHJlZi5vcHRpb25zLmJ1dHRvbnMgJiYgT2JqZWN0LmtleXMocmVmLm9wdGlvbnMuYnV0dG9ucykubGVuZ3RoKTtcblx0fVxuXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7Tm90eX0gcmVmXHJcblx0ICogQHJldHVybiB7c3RyaW5nfVxyXG5cdCAqL1xuXHRmdW5jdGlvbiBidWlsZEJ1dHRvbnMocmVmKSB7XG5cdCAgaWYgKGhhc0J1dHRvbnMocmVmKSkge1xuXHQgICAgdmFyIGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIFV0aWxzLmFkZENsYXNzKGJ1dHRvbnMsICdub3R5X2J1dHRvbnMnKTtcblxuXHQgICAgT2JqZWN0LmtleXMocmVmLm9wdGlvbnMuYnV0dG9ucykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIGJ1dHRvbnMuYXBwZW5kQ2hpbGQocmVmLm9wdGlvbnMuYnV0dG9uc1trZXldLmRvbSk7XG5cdCAgICB9KTtcblxuXHQgICAgcmVmLm9wdGlvbnMuYnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uIChidG4pIHtcblx0ICAgICAgYnV0dG9ucy5hcHBlbmRDaGlsZChidG4uZG9tKTtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIGJ1dHRvbnMub3V0ZXJIVE1MO1xuXHQgIH1cblx0ICByZXR1cm4gJyc7XG5cdH1cblxuXHQvKipcclxuXHQgKiBAcGFyYW0ge05vdHl9IHJlZlxyXG5cdCAqIEByZXR1cm4ge3ZvaWR9XHJcblx0ICovXG5cdGZ1bmN0aW9uIGhhbmRsZU1vZGFsKHJlZikge1xuXHQgIGlmIChyZWYub3B0aW9ucy5tb2RhbCkge1xuXHQgICAgaWYgKERvY01vZGFsQ291bnQgPT09IDApIHtcblx0ICAgICAgY3JlYXRlTW9kYWwoKTtcblx0ICAgIH1cblxuXHQgICAgZXhwb3J0cy5Eb2NNb2RhbENvdW50ID0gRG9jTW9kYWxDb3VudCArPSAxO1xuXHQgIH1cblx0fVxuXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7Tm90eX0gcmVmXHJcblx0ICogQHJldHVybiB7dm9pZH1cclxuXHQgKi9cblx0ZnVuY3Rpb24gaGFuZGxlTW9kYWxDbG9zZShyZWYpIHtcblx0ICBpZiAocmVmLm9wdGlvbnMubW9kYWwgJiYgRG9jTW9kYWxDb3VudCA+IDApIHtcblx0ICAgIGV4cG9ydHMuRG9jTW9kYWxDb3VudCA9IERvY01vZGFsQ291bnQgLT0gMTtcblxuXHQgICAgaWYgKERvY01vZGFsQ291bnQgPD0gMCkge1xuXHQgICAgICB2YXIgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90eV9tb2RhbCcpO1xuXG5cdCAgICAgIGlmIChtb2RhbCkge1xuXHQgICAgICAgIFV0aWxzLnJlbW92ZUNsYXNzKG1vZGFsLCAnbm90eV9tb2RhbF9vcGVuJyk7XG5cdCAgICAgICAgVXRpbHMuYWRkQ2xhc3MobW9kYWwsICdub3R5X21vZGFsX2Nsb3NlJyk7XG5cdCAgICAgICAgVXRpbHMuYWRkTGlzdGVuZXIobW9kYWwsIFV0aWxzLmFuaW1hdGlvbkVuZEV2ZW50cywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgVXRpbHMucmVtb3ZlKG1vZGFsKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXG5cdC8qKlxyXG5cdCAqIEByZXR1cm4ge3ZvaWR9XHJcblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZU1vZGFsKCkge1xuXHQgIHZhciBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXHQgIHZhciBtb2RhbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgIFV0aWxzLmFkZENsYXNzKG1vZGFsLCAnbm90eV9tb2RhbCcpO1xuXHQgIGJvZHkuaW5zZXJ0QmVmb3JlKG1vZGFsLCBib2R5LmZpcnN0Q2hpbGQpO1xuXHQgIFV0aWxzLmFkZENsYXNzKG1vZGFsLCAnbm90eV9tb2RhbF9vcGVuJyk7XG5cblx0ICBVdGlscy5hZGRMaXN0ZW5lcihtb2RhbCwgVXRpbHMuYW5pbWF0aW9uRW5kRXZlbnRzLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBVdGlscy5yZW1vdmVDbGFzcyhtb2RhbCwgJ25vdHlfbW9kYWxfb3BlbicpO1xuXHQgIH0pO1xuXHR9XG5cblx0LyoqXHJcblx0ICogQHBhcmFtIHtOb3R5fSByZWZcclxuXHQgKiBAcmV0dXJuIHt2b2lkfVxyXG5cdCAqL1xuXHRmdW5jdGlvbiBmaW5kT3JDcmVhdGVDb250YWluZXIocmVmKSB7XG5cdCAgaWYgKHJlZi5vcHRpb25zLmNvbnRhaW5lcikge1xuXHQgICAgcmVmLmxheW91dERvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocmVmLm9wdGlvbnMuY29udGFpbmVyKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cblx0ICB2YXIgbGF5b3V0SUQgPSAnbm90eV9sYXlvdXRfXycgKyByZWYub3B0aW9ucy5sYXlvdXQ7XG5cdCAgcmVmLmxheW91dERvbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2RpdiMnICsgbGF5b3V0SUQpO1xuXG5cdCAgaWYgKCFyZWYubGF5b3V0RG9tKSB7XG5cdCAgICByZWYubGF5b3V0RG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICByZWYubGF5b3V0RG9tLnNldEF0dHJpYnV0ZSgnaWQnLCBsYXlvdXRJRCk7XG5cdCAgICByZWYubGF5b3V0RG9tLnNldEF0dHJpYnV0ZSgncm9sZScsICdhbGVydCcpO1xuXHQgICAgcmVmLmxheW91dERvbS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsICdwb2xpdGUnKTtcblx0ICAgIFV0aWxzLmFkZENsYXNzKHJlZi5sYXlvdXREb20sICdub3R5X2xheW91dCcpO1xuXHQgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmFwcGVuZENoaWxkKHJlZi5sYXlvdXREb20pO1xuXHQgIH1cblx0fVxuXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7Tm90eX0gcmVmXHJcblx0ICogQHJldHVybiB7dm9pZH1cclxuXHQgKi9cblx0ZnVuY3Rpb24gcXVldWVDbG9zZShyZWYpIHtcblx0ICBpZiAocmVmLm9wdGlvbnMudGltZW91dCkge1xuXHQgICAgaWYgKHJlZi5vcHRpb25zLnByb2dyZXNzQmFyICYmIHJlZi5wcm9ncmVzc0RvbSkge1xuXHQgICAgICBVdGlscy5jc3MocmVmLnByb2dyZXNzRG9tLCB7XG5cdCAgICAgICAgdHJhbnNpdGlvbjogJ3dpZHRoICcgKyByZWYub3B0aW9ucy50aW1lb3V0ICsgJ21zIGxpbmVhcicsXG5cdCAgICAgICAgd2lkdGg6ICcwJSdcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cblx0ICAgIGNsZWFyVGltZW91dChyZWYuY2xvc2VUaW1lcik7XG5cblx0ICAgIHJlZi5jbG9zZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJlZi5jbG9zZSgpO1xuXHQgICAgfSwgcmVmLm9wdGlvbnMudGltZW91dCk7XG5cdCAgfVxuXHR9XG5cblx0LyoqXHJcblx0ICogQHBhcmFtIHtOb3R5fSByZWZcclxuXHQgKiBAcmV0dXJuIHt2b2lkfVxyXG5cdCAqL1xuXHRmdW5jdGlvbiBkZXF1ZXVlQ2xvc2UocmVmKSB7XG5cdCAgaWYgKHJlZi5vcHRpb25zLnRpbWVvdXQgJiYgcmVmLmNsb3NlVGltZXIpIHtcblx0ICAgIGNsZWFyVGltZW91dChyZWYuY2xvc2VUaW1lcik7XG5cdCAgICByZWYuY2xvc2VUaW1lciA9IC0xO1xuXG5cdCAgICBpZiAocmVmLm9wdGlvbnMucHJvZ3Jlc3NCYXIgJiYgcmVmLnByb2dyZXNzRG9tKSB7XG5cdCAgICAgIFV0aWxzLmNzcyhyZWYucHJvZ3Jlc3NEb20sIHtcblx0ICAgICAgICB0cmFuc2l0aW9uOiAnd2lkdGggMG1zIGxpbmVhcicsXG5cdCAgICAgICAgd2lkdGg6ICcxMDAlJ1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblxuXHQvKipcclxuXHQgKiBAcGFyYW0ge05vdHl9IHJlZlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuXHQgKiBAcmV0dXJuIHt2b2lkfVxyXG5cdCAqL1xuXHRmdW5jdGlvbiBmaXJlKHJlZiwgZXZlbnROYW1lKSB7XG5cdCAgaWYgKHJlZi5saXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSkge1xuXHQgICAgcmVmLmxpc3RlbmVyc1tldmVudE5hbWVdLmZvckVhY2goZnVuY3Rpb24gKGNiKSB7XG5cdCAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBjYi5hcHBseShyZWYpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblxuXHQvKipcclxuXHQgKiBAcGFyYW0ge05vdHl9IHJlZlxyXG5cdCAqIEByZXR1cm4ge3ZvaWR9XHJcblx0ICovXG5cdGZ1bmN0aW9uIG9wZW5GbG93KHJlZikge1xuXHQgIGZpcmUocmVmLCAnYWZ0ZXJTaG93Jyk7XG5cdCAgcXVldWVDbG9zZShyZWYpO1xuXG5cdCAgVXRpbHMuYWRkTGlzdGVuZXIocmVmLmJhckRvbSwgJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBkZXF1ZXVlQ2xvc2UocmVmKTtcblx0ICB9KTtcblxuXHQgIFV0aWxzLmFkZExpc3RlbmVyKHJlZi5iYXJEb20sICdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkge1xuXHQgICAgcXVldWVDbG9zZShyZWYpO1xuXHQgIH0pO1xuXHR9XG5cblx0LyoqXHJcblx0ICogQHBhcmFtIHtOb3R5fSByZWZcclxuXHQgKiBAcmV0dXJuIHt2b2lkfVxyXG5cdCAqL1xuXHRmdW5jdGlvbiBjbG9zZUZsb3cocmVmKSB7XG5cdCAgZGVsZXRlIFN0b3JlW3JlZi5pZF07XG5cdCAgcmVmLmNsb3NpbmcgPSBmYWxzZTtcblx0ICBmaXJlKHJlZiwgJ2FmdGVyQ2xvc2UnKTtcblxuXHQgIFV0aWxzLnJlbW92ZShyZWYuYmFyRG9tKTtcblxuXHQgIGlmIChyZWYubGF5b3V0RG9tLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ub3R5X2JhcicpLmxlbmd0aCA9PT0gMCAmJiAhcmVmLm9wdGlvbnMuY29udGFpbmVyKSB7XG5cdCAgICBVdGlscy5yZW1vdmUocmVmLmxheW91dERvbSk7XG5cdCAgfVxuXG5cdCAgaWYgKFV0aWxzLmluQXJyYXkoJ2RvY1Zpc2libGUnLCByZWYub3B0aW9ucy50aXRsZUNvdW50LmNvbmRpdGlvbnMpIHx8IFV0aWxzLmluQXJyYXkoJ2RvY0hpZGRlbicsIHJlZi5vcHRpb25zLnRpdGxlQ291bnQuY29uZGl0aW9ucykpIHtcblx0ICAgIGRvY1RpdGxlLmRlY3JlbWVudCgpO1xuXHQgIH1cblxuXHQgIHF1ZXVlUmVuZGVyKHJlZi5vcHRpb25zLnF1ZXVlKTtcblx0fVxuXG5cdC8qKiovIH0pLFxuXHQvKiAyICovXG5cdC8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLk5vdHlCdXR0b24gPSB1bmRlZmluZWQ7XG5cblx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblx0dmFyIFV0aWxzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3V0aWxzKTtcblxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChvYmopIHsgaWYgKG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGVsc2UgeyB2YXIgbmV3T2JqID0ge307IGlmIChvYmogIT0gbnVsbCkgeyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gbmV3T2JqLmRlZmF1bHQgPSBvYmo7IHJldHVybiBuZXdPYmo7IH0gfVxuXG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cblx0ZXhwb3J0cy5Ob3R5QnV0dG9uID0gZnVuY3Rpb24gTm90eUJ1dHRvbihodG1sLCBjbGFzc2VzLCBjYikge1xuXHQgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICB2YXIgYXR0cmlidXRlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG5cblx0ICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm90eUJ1dHRvbik7XG5cblx0ICB0aGlzLmRvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuXHQgIHRoaXMuZG9tLmlubmVySFRNTCA9IGh0bWw7XG5cdCAgdGhpcy5pZCA9IGF0dHJpYnV0ZXMuaWQgPSBhdHRyaWJ1dGVzLmlkIHx8IFV0aWxzLmdlbmVyYXRlSUQoJ2J1dHRvbicpO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eU5hbWUpIHtcblx0ICAgIF90aGlzLmRvbS5zZXRBdHRyaWJ1dGUocHJvcGVydHlOYW1lLCBhdHRyaWJ1dGVzW3Byb3BlcnR5TmFtZV0pO1xuXHQgIH0pO1xuXHQgIFV0aWxzLmFkZENsYXNzKHRoaXMuZG9tLCBjbGFzc2VzIHx8ICdub3R5X2J0bicpO1xuXG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cblx0LyoqKi8gfSksXG5cdC8qIDMgKi9cblx0LyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5cdGV4cG9ydHMuUHVzaCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBQdXNoKCkge1xuXHQgICAgdmFyIHdvcmtlclBhdGggPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcvc2VydmljZS13b3JrZXIuanMnO1xuXG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHVzaCk7XG5cblx0ICAgIHRoaXMuc3ViRGF0YSA9IHt9O1xuXHQgICAgdGhpcy53b3JrZXJQYXRoID0gd29ya2VyUGF0aDtcblx0ICAgIHRoaXMubGlzdGVuZXJzID0ge1xuXHQgICAgICBvblBlcm1pc3Npb25HcmFudGVkOiBbXSxcblx0ICAgICAgb25QZXJtaXNzaW9uRGVuaWVkOiBbXSxcblx0ICAgICAgb25TdWJzY3JpcHRpb25TdWNjZXNzOiBbXSxcblx0ICAgICAgb25TdWJzY3JpcHRpb25DYW5jZWw6IFtdLFxuXHQgICAgICBvbldvcmtlckVycm9yOiBbXSxcblx0ICAgICAgb25Xb3JrZXJTdWNjZXNzOiBbXSxcblx0ICAgICAgb25Xb3JrZXJOb3RTdXBwb3J0ZWQ6IFtdXG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXG5cdCAgLyoqXHJcblx0ICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lXHJcblx0ICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYlxyXG5cdCAgICogQHJldHVybiB7UHVzaH1cclxuXHQgICAqL1xuXG5cblx0ICBfY3JlYXRlQ2xhc3MoUHVzaCwgW3tcblx0ICAgIGtleTogJ29uJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvbihldmVudE5hbWUpIHtcblx0ICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmdW5jdGlvbiAoKSB7fTtcblxuXHQgICAgICBpZiAodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nICYmIHRoaXMubGlzdGVuZXJzLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHtcblx0ICAgICAgICB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdLnB1c2goY2IpO1xuXHQgICAgICB9XG5cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZmlyZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZmlyZShldmVudE5hbWUpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTtcblxuXHQgICAgICBpZiAodGhpcy5saXN0ZW5lcnMuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSkge1xuXHQgICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0uZm9yRWFjaChmdW5jdGlvbiAoY2IpIHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2IuYXBwbHkoX3RoaXMsIHBhcmFtcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdjcmVhdGUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcblx0ICAgICAgY29uc29sZS5sb2coJ05PVCBJTVBMRU1FTlRFRCBZRVQnKTtcblx0ICAgIH1cblxuXHQgICAgLyoqXHJcblx0ICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XHJcblx0ICAgICAqL1xuXG5cdCAgfSwge1xuXHQgICAga2V5OiAnaXNTdXBwb3J0ZWQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGlzU3VwcG9ydGVkKCkge1xuXHQgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXN1bHQgPSB3aW5kb3cuTm90aWZpY2F0aW9uIHx8IHdpbmRvdy53ZWJraXROb3RpZmljYXRpb25zIHx8IG5hdmlnYXRvci5tb3pOb3RpZmljYXRpb24gfHwgd2luZG93LmV4dGVybmFsICYmIHdpbmRvdy5leHRlcm5hbC5tc0lzU2l0ZU1vZGUoKSAhPT0gdW5kZWZpbmVkO1xuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXG5cdCAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICB9XG5cblx0ICAgIC8qKlxyXG5cdCAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XHJcblx0ICAgICAqL1xuXG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0UGVybWlzc2lvblN0YXR1cycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0UGVybWlzc2lvblN0YXR1cygpIHtcblx0ICAgICAgdmFyIHBlcm0gPSAnZGVmYXVsdCc7XG5cblx0ICAgICAgaWYgKHdpbmRvdy5Ob3RpZmljYXRpb24gJiYgd2luZG93Lk5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uTGV2ZWwpIHtcblx0ICAgICAgICBwZXJtID0gd2luZG93Lk5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uTGV2ZWw7XG5cdCAgICAgIH0gZWxzZSBpZiAod2luZG93LndlYmtpdE5vdGlmaWNhdGlvbnMgJiYgd2luZG93LndlYmtpdE5vdGlmaWNhdGlvbnMuY2hlY2tQZXJtaXNzaW9uKSB7XG5cdCAgICAgICAgc3dpdGNoICh3aW5kb3cud2Via2l0Tm90aWZpY2F0aW9ucy5jaGVja1Blcm1pc3Npb24oKSkge1xuXHQgICAgICAgICAgY2FzZSAxOlxuXHQgICAgICAgICAgICBwZXJtID0gJ2RlZmF1bHQnO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIGNhc2UgMDpcblx0ICAgICAgICAgICAgcGVybSA9ICdncmFudGVkJztcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgICBwZXJtID0gJ2RlbmllZCc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5Ob3RpZmljYXRpb24gJiYgd2luZG93Lk5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uKSB7XG5cdCAgICAgICAgcGVybSA9IHdpbmRvdy5Ob3RpZmljYXRpb24ucGVybWlzc2lvbjtcblx0ICAgICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IubW96Tm90aWZpY2F0aW9uKSB7XG5cdCAgICAgICAgcGVybSA9ICdncmFudGVkJztcblx0ICAgICAgfSBlbHNlIGlmICh3aW5kb3cuZXh0ZXJuYWwgJiYgd2luZG93LmV4dGVybmFsLm1zSXNTaXRlTW9kZSgpICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBwZXJtID0gd2luZG93LmV4dGVybmFsLm1zSXNTaXRlTW9kZSgpID8gJ2dyYW50ZWQnIDogJ2RlZmF1bHQnO1xuXHQgICAgICB9XG5cblx0ICAgICAgcmV0dXJuIHBlcm0udG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgfVxuXG5cdCAgICAvKipcclxuXHQgICAgICogQHJldHVybiB7c3RyaW5nfVxyXG5cdCAgICAgKi9cblxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldEVuZHBvaW50Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFbmRwb2ludChzdWJzY3JpcHRpb24pIHtcblx0ICAgICAgdmFyIGVuZHBvaW50ID0gc3Vic2NyaXB0aW9uLmVuZHBvaW50O1xuXHQgICAgICB2YXIgc3Vic2NyaXB0aW9uSWQgPSBzdWJzY3JpcHRpb24uc3Vic2NyaXB0aW9uSWQ7XG5cblx0ICAgICAgLy8gZml4IGZvciBDaHJvbWUgPCA0NVxuXHQgICAgICBpZiAoc3Vic2NyaXB0aW9uSWQgJiYgZW5kcG9pbnQuaW5kZXhPZihzdWJzY3JpcHRpb25JZCkgPT09IC0xKSB7XG5cdCAgICAgICAgZW5kcG9pbnQgKz0gJy8nICsgc3Vic2NyaXB0aW9uSWQ7XG5cdCAgICAgIH1cblxuXHQgICAgICByZXR1cm4gZW5kcG9pbnQ7XG5cdCAgICB9XG5cblx0ICAgIC8qKlxyXG5cdCAgICAgKiBAcmV0dXJuIHtib29sZWFufVxyXG5cdCAgICAgKi9cblxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2lzU1dSZWdpc3RlcmVkJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBpc1NXUmVnaXN0ZXJlZCgpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuY29udHJvbGxlci5zdGF0ZSA9PT0gJ2FjdGl2YXRlZCc7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgLyoqXHJcblx0ICAgICAqIEByZXR1cm4ge3ZvaWR9XHJcblx0ICAgICAqL1xuXG5cdCAgfSwge1xuXHQgICAga2V5OiAndW5yZWdpc3RlcldvcmtlcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdW5yZWdpc3RlcldvcmtlcigpIHtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuXHQgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbnMoKS50aGVuKGZ1bmN0aW9uIChyZWdpc3RyYXRpb25zKSB7XG5cdCAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG5cdCAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gcmVnaXN0cmF0aW9uc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcblx0ICAgICAgICAgICAgICB2YXIgcmVnaXN0cmF0aW9uID0gX3N0ZXAudmFsdWU7XG5cblx0ICAgICAgICAgICAgICByZWdpc3RyYXRpb24udW5yZWdpc3RlcigpO1xuXHQgICAgICAgICAgICAgIHNlbGYuZmlyZSgnb25TdWJzY3JpcHRpb25DYW5jZWwnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcblx0ICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG5cdCAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG5cdCAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgLyoqXHJcblx0ICAgICAqIEByZXR1cm4ge3ZvaWR9XHJcblx0ICAgICAqL1xuXG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVxdWVzdFN1YnNjcmlwdGlvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcmVxdWVzdFN1YnNjcmlwdGlvbigpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cblx0ICAgICAgdmFyIHVzZXJWaXNpYmxlT25seSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdHJ1ZTtcblxuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIHZhciBjdXJyZW50ID0gdGhpcy5nZXRQZXJtaXNzaW9uU3RhdHVzKCk7XG5cdCAgICAgIHZhciBjYiA9IGZ1bmN0aW9uIGNiKHJlc3VsdCkge1xuXHQgICAgICAgIGlmIChyZXN1bHQgPT09ICdncmFudGVkJykge1xuXHQgICAgICAgICAgX3RoaXMyLmZpcmUoJ29uUGVybWlzc2lvbkdyYW50ZWQnKTtcblxuXHQgICAgICAgICAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcblx0ICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoX3RoaXMyLndvcmtlclBhdGgpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5LnRoZW4oZnVuY3Rpb24gKHNlcnZpY2VXb3JrZXJSZWdpc3RyYXRpb24pIHtcblx0ICAgICAgICAgICAgICAgIHNlbGYuZmlyZSgnb25Xb3JrZXJTdWNjZXNzJyk7XG5cdCAgICAgICAgICAgICAgICBzZXJ2aWNlV29ya2VyUmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLnN1YnNjcmliZSh7XG5cdCAgICAgICAgICAgICAgICAgIHVzZXJWaXNpYmxlT25seTogdXNlclZpc2libGVPbmx5XG5cdCAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcblx0ICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHN1YnNjcmlwdGlvbi5nZXRLZXkoJ3AyNTZkaCcpO1xuXHQgICAgICAgICAgICAgICAgICB2YXIgdG9rZW4gPSBzdWJzY3JpcHRpb24uZ2V0S2V5KCdhdXRoJyk7XG5cblx0ICAgICAgICAgICAgICAgICAgc2VsZi5zdWJEYXRhID0ge1xuXHQgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiBzZWxmLmdldEVuZHBvaW50KHN1YnNjcmlwdGlvbiksXG5cdCAgICAgICAgICAgICAgICAgICAgcDI1NmRoOiBrZXkgPyB3aW5kb3cuYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KGtleSkpKSA6IG51bGwsXG5cdCAgICAgICAgICAgICAgICAgICAgYXV0aDogdG9rZW4gPyB3aW5kb3cuYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KHRva2VuKSkpIDogbnVsbFxuXHQgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgIHNlbGYuZmlyZSgnb25TdWJzY3JpcHRpb25TdWNjZXNzJywgW3NlbGYuc3ViRGF0YV0pO1xuXHQgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuXHQgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUoJ29uV29ya2VyRXJyb3InLCBbZXJyXSk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBzZWxmLmZpcmUoJ29uV29ya2VyTm90U3VwcG9ydGVkJyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09ICdkZW5pZWQnKSB7XG5cdCAgICAgICAgICBfdGhpczIuZmlyZSgnb25QZXJtaXNzaW9uRGVuaWVkJyk7XG5cdCAgICAgICAgICBfdGhpczIudW5yZWdpc3RlcldvcmtlcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblxuXHQgICAgICBpZiAoY3VycmVudCA9PT0gJ2RlZmF1bHQnKSB7XG5cdCAgICAgICAgaWYgKHdpbmRvdy5Ob3RpZmljYXRpb24gJiYgd2luZG93Lk5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbikge1xuXHQgICAgICAgICAgd2luZG93Lk5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbihjYik7XG5cdCAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cud2Via2l0Tm90aWZpY2F0aW9ucyAmJiB3aW5kb3cud2Via2l0Tm90aWZpY2F0aW9ucy5jaGVja1Blcm1pc3Npb24pIHtcblx0ICAgICAgICAgIHdpbmRvdy53ZWJraXROb3RpZmljYXRpb25zLnJlcXVlc3RQZXJtaXNzaW9uKGNiKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY2IoY3VycmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XSk7XG5cblx0ICByZXR1cm4gUHVzaDtcblx0fSgpO1xuXG5cdC8qKiovIH0pLFxuXHQvKiA0ICovXG5cdC8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2VzcywgZ2xvYmFsKSB7dmFyIHJlcXVpcmU7LyohXG5cdCAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cblx0ICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcblx0ICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuXHQgKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG5cdCAqIEB2ZXJzaW9uICAgNC4xLjFcblx0ICovXG5cblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0XHQgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgO1xuXHR9KHRoaXMsIChmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuXHQgIHZhciB0eXBlID0gdHlwZW9mIHg7XG5cdCAgcmV0dXJuIHggIT09IG51bGwgJiYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpO1xuXHR9XG5cblx0ZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cblx0dmFyIF9pc0FycmF5ID0gdW5kZWZpbmVkO1xuXHRpZiAoQXJyYXkuaXNBcnJheSkge1xuXHQgIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0fSBlbHNlIHtcblx0ICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuXHQgIH07XG5cdH1cblxuXHR2YXIgaXNBcnJheSA9IF9pc0FycmF5O1xuXG5cdHZhciBsZW4gPSAwO1xuXHR2YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkO1xuXHR2YXIgY3VzdG9tU2NoZWR1bGVyRm4gPSB1bmRlZmluZWQ7XG5cblx0dmFyIGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcblx0ICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG5cdCAgcXVldWVbbGVuICsgMV0gPSBhcmc7XG5cdCAgbGVuICs9IDI7XG5cdCAgaWYgKGxlbiA9PT0gMikge1xuXHQgICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuXHQgICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcblx0ICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cblx0ICAgIGlmIChjdXN0b21TY2hlZHVsZXJGbikge1xuXHQgICAgICBjdXN0b21TY2hlZHVsZXJGbihmbHVzaCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzY2hlZHVsZUZsdXNoKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cdGZ1bmN0aW9uIHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XG5cdCAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2V0QXNhcChhc2FwRm4pIHtcblx0ICBhc2FwID0gYXNhcEZuO1xuXHR9XG5cblx0dmFyIGJyb3dzZXJXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcblx0dmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xuXHR2YXIgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuXHR2YXIgaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAoe30pLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblxuXHQvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxuXHR2YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG5cdC8vIG5vZGVcblx0ZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG5cdCAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG5cdCAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcblx0ICB9O1xuXHR9XG5cblx0Ly8gdmVydHhcblx0ZnVuY3Rpb24gdXNlVmVydHhUaW1lcigpIHtcblx0ICBpZiAodHlwZW9mIHZlcnR4TmV4dCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZlcnR4TmV4dChmbHVzaCk7XG5cdCAgICB9O1xuXHQgIH1cblxuXHQgIHJldHVybiB1c2VTZXRUaW1lb3V0KCk7XG5cdH1cblxuXHRmdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuXHQgIHZhciBpdGVyYXRpb25zID0gMDtcblx0ICB2YXIgb2JzZXJ2ZXIgPSBuZXcgQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIoZmx1c2gpO1xuXHQgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuXHQgIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyO1xuXHQgIH07XG5cdH1cblxuXHQvLyB3ZWIgd29ya2VyXG5cdGZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuXHQgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG5cdCAgfTtcblx0fVxuXG5cdGZ1bmN0aW9uIHVzZVNldFRpbWVvdXQoKSB7XG5cdCAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gZXM2LXByb21pc2Ugd2lsbCBiZSB1bmFmZmVjdGVkIGJ5XG5cdCAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG5cdCAgdmFyIGdsb2JhbFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XG5cdCAgfTtcblx0fVxuXG5cdHZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcblx0ZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuXHQgICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG5cdCAgICB2YXIgYXJnID0gcXVldWVbaSArIDFdO1xuXG5cdCAgICBjYWxsYmFjayhhcmcpO1xuXG5cdCAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcblx0ICAgIHF1ZXVlW2kgKyAxXSA9IHVuZGVmaW5lZDtcblx0ICB9XG5cblx0ICBsZW4gPSAwO1xuXHR9XG5cblx0ZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgciA9IHJlcXVpcmU7XG5cdCAgICB2YXIgdmVydHggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQgICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcblx0ICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcblx0ICB9XG5cdH1cblxuXHR2YXIgc2NoZWR1bGVGbHVzaCA9IHVuZGVmaW5lZDtcblx0Ly8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcblx0aWYgKGlzTm9kZSkge1xuXHQgIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xuXHR9IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG5cdCAgc2NoZWR1bGVGbHVzaCA9IHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcblx0fSBlbHNlIGlmIChpc1dvcmtlcikge1xuXHQgIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xuXHR9IGVsc2UgaWYgKGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiBcImZ1bmN0aW9uXCIgPT09ICdmdW5jdGlvbicpIHtcblx0ICBzY2hlZHVsZUZsdXNoID0gYXR0ZW1wdFZlcnR4KCk7XG5cdH0gZWxzZSB7XG5cdCAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcblx0ICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50cztcblxuXHQgIHZhciBwYXJlbnQgPSB0aGlzO1xuXG5cdCAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cblx0ICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgbWFrZVByb21pc2UoY2hpbGQpO1xuXHQgIH1cblxuXHQgIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG5cdCAgaWYgKF9zdGF0ZSkge1xuXHQgICAgKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGNhbGxiYWNrID0gX2FyZ3VtZW50c1tfc3RhdGUgLSAxXTtcblx0ICAgICAgYXNhcChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSkoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcblx0ICB9XG5cblx0ICByZXR1cm4gY2hpbGQ7XG5cdH1cblxuXHQvKipcblx0ICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG5cdCAgcGFzc2VkIGB2YWx1ZWAuIEl0IGlzIHNob3J0aGFuZCBmb3IgdGhlIGZvbGxvd2luZzpcblxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICByZXNvbHZlKDEpO1xuXHQgIH0pO1xuXG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIHZhbHVlID09PSAxXG5cdCAgfSk7XG5cdCAgYGBgXG5cblx0ICBJbnN0ZWFkIG9mIHdyaXRpbmcgdGhlIGFib3ZlLCB5b3VyIGNvZGUgbm93IHNpbXBseSBiZWNvbWVzIHRoZSBmb2xsb3dpbmc6XG5cblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XG5cblx0ICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuXHQgICAgLy8gdmFsdWUgPT09IDFcblx0ICB9KTtcblx0ICBgYGBcblxuXHQgIEBtZXRob2QgcmVzb2x2ZVxuXHQgIEBzdGF0aWNcblx0ICBAcGFyYW0ge0FueX0gdmFsdWUgdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlc29sdmVkIHdpdGhcblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG5cdCAgYHZhbHVlYFxuXHQqL1xuXHRmdW5jdGlvbiByZXNvbHZlJDEob2JqZWN0KSB7XG5cdCAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG5cdCAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG5cdCAgICByZXR1cm4gb2JqZWN0O1xuXHQgIH1cblxuXHQgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXHQgIHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcblx0ICByZXR1cm4gcHJvbWlzZTtcblx0fVxuXG5cdHZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblxuXHRmdW5jdGlvbiBub29wKCkge31cblxuXHR2YXIgUEVORElORyA9IHZvaWQgMDtcblx0dmFyIEZVTEZJTExFRCA9IDE7XG5cdHZhciBSRUpFQ1RFRCA9IDI7XG5cblx0dmFyIEdFVF9USEVOX0VSUk9SID0gbmV3IEVycm9yT2JqZWN0KCk7XG5cblx0ZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuXHQgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcblx0ICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiBwcm9taXNlLnRoZW47XG5cdCAgfSBjYXRjaCAoZXJyb3IpIHtcblx0ICAgIEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG5cdCAgICByZXR1cm4gR0VUX1RIRU5fRVJST1I7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gdHJ5VGhlbih0aGVuJCQxLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHRoZW4kJDEuY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICByZXR1cm4gZTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4kJDEpIHtcblx0ICBhc2FwKGZ1bmN0aW9uIChwcm9taXNlKSB7XG5cdCAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG5cdCAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4kJDEsIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgaWYgKHNlYWxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBzZWFsZWQgPSB0cnVlO1xuXHQgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG5cdCAgICAgICAgcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgaWYgKHNlYWxlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBzZWFsZWQgPSB0cnVlO1xuXG5cdCAgICAgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuXHQgICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcblx0ICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0ICAgICAgcmVqZWN0KHByb21pc2UsIGVycm9yKTtcblx0ICAgIH1cblx0ICB9LCBwcm9taXNlKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG5cdCAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG5cdCAgICBmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuXHQgIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuXHQgICAgcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKSB7XG5cdCAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiYgdGhlbiQkMSA9PT0gdGhlbiAmJiBtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yLnJlc29sdmUgPT09IHJlc29sdmUkMSkge1xuXHQgICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmICh0aGVuJCQxID09PSBHRVRfVEhFTl9FUlJPUikge1xuXHQgICAgICByZWplY3QocHJvbWlzZSwgR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuXHQgICAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IG51bGw7XG5cdCAgICB9IGVsc2UgaWYgKHRoZW4kJDEgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoZW4kJDEpKSB7XG5cdCAgICAgIGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQxKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuXHQgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuXHQgICAgcmVqZWN0KHByb21pc2UsIHNlbGZGdWxmaWxsbWVudCgpKTtcblx0ICB9IGVsc2UgaWYgKG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuXHQgIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG5cdCAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG5cdCAgfVxuXG5cdCAgcHVibGlzaChwcm9taXNlKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcblx0ICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cblx0ICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcblx0ICBwcm9taXNlLl9zdGF0ZSA9IEZVTEZJTExFRDtcblxuXHQgIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHtcblx0ICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuXHQgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBwcm9taXNlLl9zdGF0ZSA9IFJFSkVDVEVEO1xuXHQgIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblxuXHQgIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcblx0ICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcblx0ICB2YXIgbGVuZ3RoID0gX3N1YnNjcmliZXJzLmxlbmd0aDtcblxuXHQgIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cblx0ICBfc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuXHQgIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcblx0ICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cblx0ICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcblx0ICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcblx0ICB9XG5cdH1cblxuXHRmdW5jdGlvbiBwdWJsaXNoKHByb21pc2UpIHtcblx0ICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcblx0ICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG5cdCAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblxuXHQgIHZhciBjaGlsZCA9IHVuZGVmaW5lZCxcblx0ICAgICAgY2FsbGJhY2sgPSB1bmRlZmluZWQsXG5cdCAgICAgIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcblx0ICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG5cdCAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuXHQgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG5cdCAgICB9XG5cdCAgfVxuXG5cdCAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcblx0fVxuXG5cdGZ1bmN0aW9uIEVycm9yT2JqZWN0KCkge1xuXHQgIHRoaXMuZXJyb3IgPSBudWxsO1xuXHR9XG5cblx0dmFyIFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBFcnJvck9iamVjdCgpO1xuXG5cdGZ1bmN0aW9uIHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcblx0ICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuXHQgIHZhciBoYXNDYWxsYmFjayA9IGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuXHQgICAgICB2YWx1ZSA9IHVuZGVmaW5lZCxcblx0ICAgICAgZXJyb3IgPSB1bmRlZmluZWQsXG5cdCAgICAgIHN1Y2NlZWRlZCA9IHVuZGVmaW5lZCxcblx0ICAgICAgZmFpbGVkID0gdW5kZWZpbmVkO1xuXG5cdCAgaWYgKGhhc0NhbGxiYWNrKSB7XG5cdCAgICB2YWx1ZSA9IHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG5cdCAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuXHQgICAgICBmYWlsZWQgPSB0cnVlO1xuXHQgICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuXHQgICAgICB2YWx1ZS5lcnJvciA9IG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuXHQgICAgfVxuXG5cdCAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcblx0ICAgICAgcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YWx1ZSA9IGRldGFpbDtcblx0ICAgIHN1Y2NlZWRlZCA9IHRydWU7XG5cdCAgfVxuXG5cdCAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSA7IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuXHQgICAgICByZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG5cdCAgICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG5cdCAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IEZVTEZJTExFRCkge1xuXHQgICAgICBmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gUkVKRUNURUQpIHtcblx0ICAgICAgcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcblx0ICAgIH1cblx0fVxuXG5cdGZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKSB7XG5cdCAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcblx0ICAgICAgcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICByZWplY3QocHJvbWlzZSwgZSk7XG5cdCAgfVxuXHR9XG5cblx0dmFyIGlkID0gMDtcblx0ZnVuY3Rpb24gbmV4dElkKCkge1xuXHQgIHJldHVybiBpZCsrO1xuXHR9XG5cblx0ZnVuY3Rpb24gbWFrZVByb21pc2UocHJvbWlzZSkge1xuXHQgIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuXHQgIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuXHQgIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcblx0ICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xuXHR9XG5cblx0ZnVuY3Rpb24gRW51bWVyYXRvciQxKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuXHQgIHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3IgPSBDb25zdHJ1Y3Rvcjtcblx0ICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG5cblx0ICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkge1xuXHQgICAgbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcblx0ICB9XG5cblx0ICBpZiAoaXNBcnJheShpbnB1dCkpIHtcblx0ICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuXHQgICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG5cdCAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG5cdCAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG5cdCAgICAgIHRoaXMuX2VudW1lcmF0ZShpbnB1dCk7XG5cdCAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcblx0ICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7XG5cdCAgfVxuXHR9XG5cblx0ZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xuXHQgIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xuXHR9XG5cblx0RW51bWVyYXRvciQxLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gKGlucHV0KSB7XG5cdCAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBQRU5ESU5HICYmIGkgPCBpbnB1dC5sZW5ndGg7IGkrKykge1xuXHQgICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTtcblx0ICB9XG5cdH07XG5cblx0RW51bWVyYXRvciQxLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5LCBpKSB7XG5cdCAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuXHQgIHZhciByZXNvbHZlJCQxID0gYy5yZXNvbHZlO1xuXG5cdCAgaWYgKHJlc29sdmUkJDEgPT09IHJlc29sdmUkMSkge1xuXHQgICAgdmFyIF90aGVuID0gZ2V0VGhlbihlbnRyeSk7XG5cblx0ICAgIGlmIChfdGhlbiA9PT0gdGhlbiAmJiBlbnRyeS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcblx0ICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBfdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblx0ICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG5cdCAgICB9IGVsc2UgaWYgKGMgPT09IFByb21pc2UkMikge1xuXHQgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuXHQgICAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCBfdGhlbik7XG5cdCAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbiAocmVzb2x2ZSQkMSkge1xuXHQgICAgICAgIHJldHVybiByZXNvbHZlJCQxKGVudHJ5KTtcblx0ICAgICAgfSksIGkpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZSQkMShlbnRyeSksIGkpO1xuXHQgIH1cblx0fTtcblxuXHRFbnVtZXJhdG9yJDEucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiAoc3RhdGUsIGksIHZhbHVlKSB7XG5cdCAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cblx0ICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcblx0ICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG5cdCAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG5cdCAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcblx0ICAgIH1cblx0ICB9XG5cblx0ICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG5cdCAgfVxuXHR9O1xuXG5cdEVudW1lcmF0b3IkMS5wcm90b3R5cGUuX3dpbGxTZXR0bGVBdCA9IGZ1bmN0aW9uIChwcm9taXNlLCBpKSB7XG5cdCAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG5cdCAgc3Vic2NyaWJlKHByb21pc2UsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuXHQgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoUkVKRUNURUQsIGksIHJlYXNvbik7XG5cdCAgfSk7XG5cdH07XG5cblx0LyoqXG5cdCAgYFByb21pc2UuYWxsYCBhY2NlcHRzIGFuIGFycmF5IG9mIHByb21pc2VzLCBhbmQgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoXG5cdCAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuXHQgIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuXHQgIGVsZW1lbnRzIG9mIHRoZSBwYXNzZWQgaXRlcmFibGUgdG8gcHJvbWlzZXMgYXMgaXQgcnVucyB0aGlzIGFsZ29yaXRobS5cblxuXHQgIEV4YW1wbGU6XG5cblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UxID0gcmVzb2x2ZSgxKTtcblx0ICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpO1xuXHQgIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG5cdCAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cblx0ICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG5cdCAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcblx0ICB9KTtcblx0ICBgYGBcblxuXHQgIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG5cdCAgdGhhdCBpcyByZWplY3RlZCB3aWxsIGJlIGdpdmVuIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSByZXR1cm5lZCBwcm9taXNlcydzXG5cdCAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxuXG5cdCAgRXhhbXBsZTpcblxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuXHQgIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcblx0ICBsZXQgcHJvbWlzZTMgPSByZWplY3QobmV3IEVycm9yKFwiM1wiKSk7XG5cdCAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cblx0ICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG5cdCAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVucyBiZWNhdXNlIHRoZXJlIGFyZSByZWplY3RlZCBwcm9taXNlcyFcblx0ICB9LCBmdW5jdGlvbihlcnJvcikge1xuXHQgICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcblx0ICB9KTtcblx0ICBgYGBcblxuXHQgIEBtZXRob2QgYWxsXG5cdCAgQHN0YXRpY1xuXHQgIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXNcblx0ICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxuXHQgIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuXHQgIEBzdGF0aWNcblx0Ki9cblx0ZnVuY3Rpb24gYWxsJDEoZW50cmllcykge1xuXHQgIHJldHVybiBuZXcgRW51bWVyYXRvciQxKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG5cdH1cblxuXHQvKipcblx0ICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG5cdCAgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gc2V0dGxlLlxuXG5cdCAgRXhhbXBsZTpcblxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcblx0ICAgIH0sIDIwMCk7XG5cdCAgfSk7XG5cblx0ICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcblx0ICAgIH0sIDEwMCk7XG5cdCAgfSk7XG5cblx0ICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG5cdCAgICAvLyB3YXMgcmVzb2x2ZWQuXG5cdCAgfSk7XG5cdCAgYGBgXG5cblx0ICBgUHJvbWlzZS5yYWNlYCBpcyBkZXRlcm1pbmlzdGljIGluIHRoYXQgb25seSB0aGUgc3RhdGUgb2YgdGhlIGZpcnN0XG5cdCAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuXHQgIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcblx0ICBiZWNvbWUgcmVqZWN0ZWQgYmVmb3JlIHRoZSBvdGhlciBwcm9taXNlcyBiZWNhbWUgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcblx0ICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG5cdCAgYGBgamF2YXNjcmlwdFxuXHQgIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuXHQgICAgfSwgMjAwKTtcblx0ICB9KTtcblxuXHQgIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcblx0ICAgIH0sIDEwMCk7XG5cdCAgfSk7XG5cblx0ICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG5cdCAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG5cdCAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuXHQgIH0pO1xuXHQgIGBgYFxuXG5cdCAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuXHQgIGBgYFxuXG5cdCAgQG1ldGhvZCByYWNlXG5cdCAgQHN0YXRpY1xuXHQgIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcblx0ICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcblx0ICBwcm9taXNlIHRvIHNldHRsZS5cblx0Ki9cblx0ZnVuY3Rpb24gcmFjZSQxKGVudHJpZXMpIHtcblx0ICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuXHQgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cblx0ICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcblx0ICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuXHQgICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG5cdCAgICB9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblxuXHQvKipcblx0ICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cblx0ICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cblx0ICBgYGBqYXZhc2NyaXB0XG5cdCAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuXHQgIH0pO1xuXG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcblx0ICB9KTtcblx0ICBgYGBcblxuXHQgIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuXHQgIGBgYGphdmFzY3JpcHRcblx0ICBsZXQgcHJvbWlzZSA9IFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuXG5cdCAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcblx0ICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcblx0ICB9KTtcblx0ICBgYGBcblxuXHQgIEBtZXRob2QgcmVqZWN0XG5cdCAgQHN0YXRpY1xuXHQgIEBwYXJhbSB7QW55fSByZWFzb24gdmFsdWUgdGhhdCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGguXG5cdCAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cblx0Ki9cblx0ZnVuY3Rpb24gcmVqZWN0JDEocmVhc29uKSB7XG5cdCAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXHQgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuXHQgIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgIHJldHVybiBwcm9taXNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcblx0ICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG5cdH1cblxuXHRmdW5jdGlvbiBuZWVkc05ldygpIHtcblx0ICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xuXHR9XG5cblx0LyoqXG5cdCAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuXHQgIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsIHdoaWNoXG5cdCAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG5cdCAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cblx0ICBUZXJtaW5vbG9neVxuXHQgIC0tLS0tLS0tLS0tXG5cblx0ICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuXHQgIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cblx0ICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG5cdCAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG5cdCAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuXHQgIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG5cdCAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG5cdCAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcblx0ICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG5cdCAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cblx0ICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcblx0ICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG5cdCAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG5cdCAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuXHQgIGl0c2VsZiBmdWxmaWxsLlxuXG5cblx0ICBCYXNpYyBVc2FnZTpcblx0ICAtLS0tLS0tLS0tLS1cblxuXHQgIGBgYGpzXG5cdCAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgIC8vIG9uIHN1Y2Nlc3Ncblx0ICAgIHJlc29sdmUodmFsdWUpO1xuXG5cdCAgICAvLyBvbiBmYWlsdXJlXG5cdCAgICByZWplY3QocmVhc29uKTtcblx0ICB9KTtcblxuXHQgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgLy8gb24gZnVsZmlsbG1lbnRcblx0ICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgIC8vIG9uIHJlamVjdGlvblxuXHQgIH0pO1xuXHQgIGBgYFxuXG5cdCAgQWR2YW5jZWQgVXNhZ2U6XG5cdCAgLS0tLS0tLS0tLS0tLS0tXG5cblx0ICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG5cdCAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cblx0ICBgYGBqc1xuXHQgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdCAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuXHQgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcblx0ICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcblx0ICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cdCAgICAgIHhoci5zZW5kKCk7XG5cblx0ICAgICAgZnVuY3Rpb24gaGFuZGxlcigpIHtcblx0ICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcblx0ICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG5cdCAgICAgICAgICAgIHJlc29sdmUodGhpcy5yZXNwb25zZSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH0pO1xuXHQgIH1cblxuXHQgIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG5cdCAgICAvLyBvbiBmdWxmaWxsbWVudFxuXHQgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgLy8gb24gcmVqZWN0aW9uXG5cdCAgfSk7XG5cdCAgYGBgXG5cblx0ICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG5cdCAgYGBganNcblx0ICBQcm9taXNlLmFsbChbXG5cdCAgICBnZXRKU09OKCcvcG9zdHMnKSxcblx0ICAgIGdldEpTT04oJy9jb21tZW50cycpXG5cdCAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuXHQgICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuXHQgICAgdmFsdWVzWzFdIC8vID0+IGNvbW1lbnRzSlNPTlxuXG5cdCAgICByZXR1cm4gdmFsdWVzO1xuXHQgIH0pO1xuXHQgIGBgYFxuXG5cdCAgQGNsYXNzIFByb21pc2Vcblx0ICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxuXHQgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICBAY29uc3RydWN0b3Jcblx0Ki9cblx0ZnVuY3Rpb24gUHJvbWlzZSQyKHJlc29sdmVyKSB7XG5cdCAgdGhpc1tQUk9NSVNFX0lEXSA9IG5leHRJZCgpO1xuXHQgIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cblx0ICBpZiAobm9vcCAhPT0gcmVzb2x2ZXIpIHtcblx0ICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBuZWVkc1Jlc29sdmVyKCk7XG5cdCAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSQyID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcblx0ICB9XG5cdH1cblxuXHRQcm9taXNlJDIuYWxsID0gYWxsJDE7XG5cdFByb21pc2UkMi5yYWNlID0gcmFjZSQxO1xuXHRQcm9taXNlJDIucmVzb2x2ZSA9IHJlc29sdmUkMTtcblx0UHJvbWlzZSQyLnJlamVjdCA9IHJlamVjdCQxO1xuXHRQcm9taXNlJDIuX3NldFNjaGVkdWxlciA9IHNldFNjaGVkdWxlcjtcblx0UHJvbWlzZSQyLl9zZXRBc2FwID0gc2V0QXNhcDtcblx0UHJvbWlzZSQyLl9hc2FwID0gYXNhcDtcblxuXHRQcm9taXNlJDIucHJvdG90eXBlID0ge1xuXHQgIGNvbnN0cnVjdG9yOiBQcm9taXNlJDIsXG5cblx0ICAvKipcblx0ICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuXHQgICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcblx0ICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblx0ICBcblx0ICAgIGBgYGpzXG5cdCAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG5cdCAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG5cdCAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuXHQgICAgfSk7XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIENoYWluaW5nXG5cdCAgICAtLS0tLS0tLVxuXHQgIFxuXHQgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcblx0ICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcblx0ICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuXHQgIFxuXHQgICAgYGBganNcblx0ICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICByZXR1cm4gdXNlci5uYW1lO1xuXHQgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG5cdCAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuXHQgICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG5cdCAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuXHQgICAgfSk7XG5cdCAgXG5cdCAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuXHQgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknKTtcblx0ICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cblx0ICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG5cdCAgICB9KTtcblx0ICAgIGBgYFxuXHQgICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG5cdCAgXG5cdCAgICBgYGBqc1xuXHQgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcblx0ICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcblx0ICAgIH0pO1xuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBBc3NpbWlsYXRpb25cblx0ICAgIC0tLS0tLS0tLS0tLVxuXHQgIFxuXHQgICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcblx0ICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcblx0ICAgIGZ1bGZpbGxtZW50IG9yIHJlamVjdGlvbiBoYW5kbGVyLiBUaGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgdGhlbiBiZSBwZW5kaW5nXG5cdCAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cblx0ICBcblx0ICAgIGBgYGpzXG5cdCAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuXHQgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcblx0ICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuXHQgICAgfSk7XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuXHQgIFxuXHQgICAgYGBganNcblx0ICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG5cdCAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuXHQgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG5cdCAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcblx0ICAgIH0pO1xuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBTaW1wbGUgRXhhbXBsZVxuXHQgICAgLS0tLS0tLS0tLS0tLS1cblx0ICBcblx0ICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcblx0ICBcblx0ICAgIGBgYGphdmFzY3JpcHRcblx0ICAgIGxldCByZXN1bHQ7XG5cdCAgXG5cdCAgICB0cnkge1xuXHQgICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG5cdCAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgIC8vIGZhaWx1cmVcblx0ICAgIH1cblx0ICAgIGBgYFxuXHQgIFxuXHQgICAgRXJyYmFjayBFeGFtcGxlXG5cdCAgXG5cdCAgICBgYGBqc1xuXHQgICAgZmluZFJlc3VsdChmdW5jdGlvbihyZXN1bHQsIGVycil7XG5cdCAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAvLyBmYWlsdXJlXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICAgIGBgYFxuXHQgIFxuXHQgICAgUHJvbWlzZSBFeGFtcGxlO1xuXHQgIFxuXHQgICAgYGBgamF2YXNjcmlwdFxuXHQgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgLy8gZmFpbHVyZVxuXHQgICAgfSk7XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIEFkdmFuY2VkIEV4YW1wbGVcblx0ICAgIC0tLS0tLS0tLS0tLS0tXG5cdCAgXG5cdCAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdCAgXG5cdCAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICBsZXQgYXV0aG9yLCBib29rcztcblx0ICBcblx0ICAgIHRyeSB7XG5cdCAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcblx0ICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcblx0ICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgfSBjYXRjaChyZWFzb24pIHtcblx0ICAgICAgLy8gZmFpbHVyZVxuXHQgICAgfVxuXHQgICAgYGBgXG5cdCAgXG5cdCAgICBFcnJiYWNrIEV4YW1wbGVcblx0ICBcblx0ICAgIGBgYGpzXG5cdCAgXG5cdCAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG5cdCAgXG5cdCAgICB9XG5cdCAgXG5cdCAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuXHQgIFxuXHQgICAgfVxuXHQgIFxuXHQgICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG5cdCAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICBmYWlsdXJlKGVycik7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG5cdCAgICAgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuXHQgICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG5cdCAgICAgICAgICBmYWlsdXJlKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIFByb21pc2UgRXhhbXBsZTtcblx0ICBcblx0ICAgIGBgYGphdmFzY3JpcHRcblx0ICAgIGZpbmRBdXRob3IoKS5cblx0ICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG5cdCAgICAgIHRoZW4oZnVuY3Rpb24oYm9va3Mpe1xuXHQgICAgICAgIC8vIGZvdW5kIGJvb2tzXG5cdCAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgICAgfSk7XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIEBtZXRob2QgdGhlblxuXHQgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcblx0ICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcblx0ICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgIEByZXR1cm4ge1Byb21pc2V9XG5cdCAgKi9cblx0ICB0aGVuOiB0aGVuLFxuXG5cdCAgLyoqXG5cdCAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG5cdCAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuXHQgIFxuXHQgICAgYGBganNcblx0ICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG5cdCAgICB9XG5cdCAgXG5cdCAgICAvLyBzeW5jaHJvbm91c1xuXHQgICAgdHJ5IHtcblx0ICAgICAgZmluZEF1dGhvcigpO1xuXHQgICAgfSBjYXRjaChyZWFzb24pIHtcblx0ICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICAgIH1cblx0ICBcblx0ICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcblx0ICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgICAgfSk7XG5cdCAgICBgYGBcblx0ICBcblx0ICAgIEBtZXRob2QgY2F0Y2hcblx0ICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG5cdCAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgICBAcmV0dXJuIHtQcm9taXNlfVxuXHQgICovXG5cdCAgJ2NhdGNoJzogZnVuY3Rpb24gX2NhdGNoKG9uUmVqZWN0aW9uKSB7XG5cdCAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcblx0ICB9XG5cdH07XG5cblx0LypnbG9iYWwgc2VsZiovXG5cdGZ1bmN0aW9uIHBvbHlmaWxsJDEoKSB7XG5cdCAgICB2YXIgbG9jYWwgPSB1bmRlZmluZWQ7XG5cblx0ICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICBsb2NhbCA9IHNlbGY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cblx0ICAgIGlmIChQKSB7XG5cdCAgICAgICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgcHJvbWlzZVRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWRcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBpZiAocHJvbWlzZVRvU3RyaW5nID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZSQyO1xuXHR9XG5cblx0Ly8gU3RyYW5nZSBjb21wYXQuLlxuXHRQcm9taXNlJDIucG9seWZpbGwgPSBwb2x5ZmlsbCQxO1xuXHRQcm9taXNlJDIuUHJvbWlzZSA9IFByb21pc2UkMjtcblxuXHRyZXR1cm4gUHJvbWlzZSQyO1xuXG5cdH0pKSk7XG5cblx0XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oNyksIF9fd2VicGFja19yZXF1aXJlX18oOCkpKTtcblxuXHQvKioqLyB9KSxcblx0LyogNSAqL1xuXHQvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXHQvKioqLyB9KSxcblx0LyogNiAqL1xuXHQvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpOyAvKiBnbG9iYWwgVkVSU0lPTiAqL1xuXG5cdF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cblx0dmFyIF9lczZQcm9taXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuXHR2YXIgX2VzNlByb21pc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXM2UHJvbWlzZSk7XG5cblx0dmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblx0dmFyIFV0aWxzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQoX3V0aWxzKTtcblxuXHR2YXIgX2FwaSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cblx0dmFyIEFQSSA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKF9hcGkpO1xuXG5cdHZhciBfYnV0dG9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxuXHR2YXIgX3B1c2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gZWxzZSB7IHZhciBuZXdPYmogPSB7fTsgaWYgKG9iaiAhPSBudWxsKSB7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgcmV0dXJuIG5ld09iajsgfSB9XG5cblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5cdHZhciBOb3R5ID0gZnVuY3Rpb24gKCkge1xuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zXG5cdCAgICogQHJldHVybiB7Tm90eX1cblx0ICAgKi9cblx0ICBmdW5jdGlvbiBOb3R5KCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuXG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTm90eSk7XG5cblx0ICAgIHRoaXMub3B0aW9ucyA9IFV0aWxzLmRlZXBFeHRlbmQoe30sIEFQSS5EZWZhdWx0cywgb3B0aW9ucyk7XG5cblx0ICAgIGlmIChBUEkuU3RvcmVbdGhpcy5vcHRpb25zLmlkXSkge1xuXHQgICAgICByZXR1cm4gQVBJLlN0b3JlW3RoaXMub3B0aW9ucy5pZF07XG5cdCAgICB9XG5cblx0ICAgIHRoaXMuaWQgPSB0aGlzLm9wdGlvbnMuaWQgfHwgVXRpbHMuZ2VuZXJhdGVJRCgnYmFyJyk7XG5cdCAgICB0aGlzLmNsb3NlVGltZXIgPSAtMTtcblx0ICAgIHRoaXMuYmFyRG9tID0gbnVsbDtcblx0ICAgIHRoaXMubGF5b3V0RG9tID0gbnVsbDtcblx0ICAgIHRoaXMucHJvZ3Jlc3NEb20gPSBudWxsO1xuXHQgICAgdGhpcy5zaG93aW5nID0gZmFsc2U7XG5cdCAgICB0aGlzLnNob3duID0gZmFsc2U7XG5cdCAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuXHQgICAgdGhpcy5jbG9zaW5nID0gZmFsc2U7XG5cdCAgICB0aGlzLmtpbGxhYmxlID0gdGhpcy5vcHRpb25zLnRpbWVvdXQgfHwgdGhpcy5vcHRpb25zLmNsb3NlV2l0aC5sZW5ndGggPiAwO1xuXHQgICAgdGhpcy5oYXNTb3VuZCA9IHRoaXMub3B0aW9ucy5zb3VuZHMuc291cmNlcy5sZW5ndGggPiAwO1xuXHQgICAgdGhpcy5zb3VuZFBsYXllZCA9IGZhbHNlO1xuXHQgICAgdGhpcy5saXN0ZW5lcnMgPSB7XG5cdCAgICAgIGJlZm9yZVNob3c6IFtdLFxuXHQgICAgICBvblNob3c6IFtdLFxuXHQgICAgICBhZnRlclNob3c6IFtdLFxuXHQgICAgICBvbkNsb3NlOiBbXSxcblx0ICAgICAgYWZ0ZXJDbG9zZTogW10sXG5cdCAgICAgIG9uQ2xpY2s6IFtdLFxuXHQgICAgICBvbkhvdmVyOiBbXSxcblx0ICAgICAgb25UZW1wbGF0ZTogW11cblx0ICAgIH07XG5cdCAgICB0aGlzLnByb21pc2VzID0ge1xuXHQgICAgICBzaG93OiBudWxsLFxuXHQgICAgICBjbG9zZTogbnVsbFxuXHQgICAgfTtcblx0ICAgIHRoaXMub24oJ2JlZm9yZVNob3cnLCB0aGlzLm9wdGlvbnMuY2FsbGJhY2tzLmJlZm9yZVNob3cpO1xuXHQgICAgdGhpcy5vbignb25TaG93JywgdGhpcy5vcHRpb25zLmNhbGxiYWNrcy5vblNob3cpO1xuXHQgICAgdGhpcy5vbignYWZ0ZXJTaG93JywgdGhpcy5vcHRpb25zLmNhbGxiYWNrcy5hZnRlclNob3cpO1xuXHQgICAgdGhpcy5vbignb25DbG9zZScsIHRoaXMub3B0aW9ucy5jYWxsYmFja3Mub25DbG9zZSk7XG5cdCAgICB0aGlzLm9uKCdhZnRlckNsb3NlJywgdGhpcy5vcHRpb25zLmNhbGxiYWNrcy5hZnRlckNsb3NlKTtcblx0ICAgIHRoaXMub24oJ29uQ2xpY2snLCB0aGlzLm9wdGlvbnMuY2FsbGJhY2tzLm9uQ2xpY2spO1xuXHQgICAgdGhpcy5vbignb25Ib3ZlcicsIHRoaXMub3B0aW9ucy5jYWxsYmFja3Mub25Ib3Zlcik7XG5cdCAgICB0aGlzLm9uKCdvblRlbXBsYXRlJywgdGhpcy5vcHRpb25zLmNhbGxiYWNrcy5vblRlbXBsYXRlKTtcblxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXG5cdCAgLyoqXG5cdCAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxuXHQgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiXG5cdCAgICogQHJldHVybiB7Tm90eX1cblx0ICAgKi9cblxuXG5cdCAgX2NyZWF0ZUNsYXNzKE5vdHksIFt7XG5cdCAgICBrZXk6ICdvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnROYW1lKSB7XG5cdCAgICAgIHZhciBjYiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZnVuY3Rpb24gKCkge307XG5cblx0ICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyAmJiB0aGlzLmxpc3RlbmVycy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XG5cdCAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXS5wdXNoKGNiKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge05vdHl9XG5cdCAgICAgKi9cblxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3Nob3cnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3coKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgaWYgKHRoaXMuc2hvd2luZyB8fCB0aGlzLnNob3duKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7IC8vIHByZXZlbnRpbmcgbXVsdGlwbGUgc2hvd1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKHRoaXMub3B0aW9ucy5raWxsZXIgPT09IHRydWUpIHtcblx0ICAgICAgICBOb3R5LmNsb3NlQWxsKCk7XG5cdCAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5raWxsZXIgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgTm90eS5jbG9zZUFsbCh0aGlzLm9wdGlvbnMua2lsbGVyKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIHZhciBxdWV1ZUNvdW50cyA9IEFQSS5nZXRRdWV1ZUNvdW50cyh0aGlzLm9wdGlvbnMucXVldWUpO1xuXG5cdCAgICAgIGlmIChxdWV1ZUNvdW50cy5jdXJyZW50ID49IHF1ZXVlQ291bnRzLm1heFZpc2libGUgfHwgQVBJLlBhZ2VIaWRkZW4gJiYgdGhpcy5vcHRpb25zLnZpc2liaWxpdHlDb250cm9sKSB7XG5cdCAgICAgICAgQVBJLmFkZFRvUXVldWUodGhpcyk7XG5cblx0ICAgICAgICBpZiAoQVBJLlBhZ2VIaWRkZW4gJiYgdGhpcy5oYXNTb3VuZCAmJiBVdGlscy5pbkFycmF5KCdkb2NIaWRkZW4nLCB0aGlzLm9wdGlvbnMuc291bmRzLmNvbmRpdGlvbnMpKSB7XG5cdCAgICAgICAgICBVdGlscy5jcmVhdGVBdWRpb0VsZW1lbnRzKHRoaXMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIGlmIChBUEkuUGFnZUhpZGRlbiAmJiBVdGlscy5pbkFycmF5KCdkb2NIaWRkZW4nLCB0aGlzLm9wdGlvbnMudGl0bGVDb3VudC5jb25kaXRpb25zKSkge1xuXHQgICAgICAgICAgQVBJLmRvY1RpdGxlLmluY3JlbWVudCgpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cblx0ICAgICAgQVBJLlN0b3JlW3RoaXMuaWRdID0gdGhpcztcblxuXHQgICAgICBBUEkuZmlyZSh0aGlzLCAnYmVmb3JlU2hvdycpO1xuXG5cdCAgICAgIHRoaXMuc2hvd2luZyA9IHRydWU7XG5cblx0ICAgICAgaWYgKHRoaXMuY2xvc2luZykge1xuXHQgICAgICAgIHRoaXMuc2hvd2luZyA9IGZhbHNlO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgICB9XG5cblx0ICAgICAgQVBJLmJ1aWxkKHRoaXMpO1xuXHQgICAgICBBUEkuaGFuZGxlTW9kYWwodGhpcyk7XG5cblx0ICAgICAgaWYgKHRoaXMub3B0aW9ucy5mb3JjZSkge1xuXHQgICAgICAgIHRoaXMubGF5b3V0RG9tLmluc2VydEJlZm9yZSh0aGlzLmJhckRvbSwgdGhpcy5sYXlvdXREb20uZmlyc3RDaGlsZCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5sYXlvdXREb20uYXBwZW5kQ2hpbGQodGhpcy5iYXJEb20pO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKHRoaXMuaGFzU291bmQgJiYgIXRoaXMuc291bmRQbGF5ZWQgJiYgVXRpbHMuaW5BcnJheSgnZG9jVmlzaWJsZScsIHRoaXMub3B0aW9ucy5zb3VuZHMuY29uZGl0aW9ucykpIHtcblx0ICAgICAgICBVdGlscy5jcmVhdGVBdWRpb0VsZW1lbnRzKHRoaXMpO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKFV0aWxzLmluQXJyYXkoJ2RvY1Zpc2libGUnLCB0aGlzLm9wdGlvbnMudGl0bGVDb3VudC5jb25kaXRpb25zKSkge1xuXHQgICAgICAgIEFQSS5kb2NUaXRsZS5pbmNyZW1lbnQoKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIHRoaXMuc2hvd24gPSB0cnVlO1xuXHQgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuXG5cdCAgICAgIC8vIGJpbmQgYnV0dG9uIGV2ZW50cyBpZiBhbnlcblx0ICAgICAgaWYgKEFQSS5oYXNCdXR0b25zKHRoaXMpKSB7XG5cdCAgICAgICAgT2JqZWN0LmtleXModGhpcy5vcHRpb25zLmJ1dHRvbnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgICAgdmFyIGJ0biA9IF90aGlzLmJhckRvbS5xdWVyeVNlbGVjdG9yKCcjJyArIF90aGlzLm9wdGlvbnMuYnV0dG9uc1trZXldLmlkKTtcblx0ICAgICAgICAgIFV0aWxzLmFkZExpc3RlbmVyKGJ0biwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgICAgVXRpbHMuc3RvcFByb3BhZ2F0aW9uKGUpO1xuXHQgICAgICAgICAgICBfdGhpcy5vcHRpb25zLmJ1dHRvbnNba2V5XS5jYihfdGhpcyk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXG5cdCAgICAgIHRoaXMucHJvZ3Jlc3NEb20gPSB0aGlzLmJhckRvbS5xdWVyeVNlbGVjdG9yKCcubm90eV9wcm9ncmVzc2JhcicpO1xuXG5cdCAgICAgIGlmIChVdGlscy5pbkFycmF5KCdjbGljaycsIHRoaXMub3B0aW9ucy5jbG9zZVdpdGgpKSB7XG5cdCAgICAgICAgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sICdub3R5X2Nsb3NlX3dpdGhfY2xpY2snKTtcblx0ICAgICAgICBVdGlscy5hZGRMaXN0ZW5lcih0aGlzLmJhckRvbSwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgIFV0aWxzLnN0b3BQcm9wYWdhdGlvbihlKTtcblx0ICAgICAgICAgIEFQSS5maXJlKF90aGlzLCAnb25DbGljaycpO1xuXHQgICAgICAgICAgX3RoaXMuY2xvc2UoKTtcblx0ICAgICAgICB9LCBmYWxzZSk7XG5cdCAgICAgIH1cblxuXHQgICAgICBVdGlscy5hZGRMaXN0ZW5lcih0aGlzLmJhckRvbSwgJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgQVBJLmZpcmUoX3RoaXMsICdvbkhvdmVyJyk7XG5cdCAgICAgIH0sIGZhbHNlKTtcblxuXHQgICAgICBpZiAodGhpcy5vcHRpb25zLnRpbWVvdXQpIFV0aWxzLmFkZENsYXNzKHRoaXMuYmFyRG9tLCAnbm90eV9oYXNfdGltZW91dCcpO1xuXHQgICAgICBpZiAodGhpcy5vcHRpb25zLnByb2dyZXNzQmFyKSB7XG5cdCAgICAgICAgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sICdub3R5X2hhc19wcm9ncmVzc2JhcicpO1xuXHQgICAgICB9XG5cblx0ICAgICAgaWYgKFV0aWxzLmluQXJyYXkoJ2J1dHRvbicsIHRoaXMub3B0aW9ucy5jbG9zZVdpdGgpKSB7XG5cdCAgICAgICAgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sICdub3R5X2Nsb3NlX3dpdGhfYnV0dG9uJyk7XG5cblx0ICAgICAgICB2YXIgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgICAgICBVdGlscy5hZGRDbGFzcyhjbG9zZUJ1dHRvbiwgJ25vdHlfY2xvc2VfYnV0dG9uJyk7XG5cdCAgICAgICAgY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gJ8OXJztcblx0ICAgICAgICB0aGlzLmJhckRvbS5hcHBlbmRDaGlsZChjbG9zZUJ1dHRvbik7XG5cblx0ICAgICAgICBVdGlscy5hZGRMaXN0ZW5lcihjbG9zZUJ1dHRvbiwgJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICAgIFV0aWxzLnN0b3BQcm9wYWdhdGlvbihlKTtcblx0ICAgICAgICAgIF90aGlzLmNsb3NlKCk7XG5cdCAgICAgICAgfSwgZmFsc2UpO1xuXHQgICAgICB9XG5cblx0ICAgICAgQVBJLmZpcmUodGhpcywgJ29uU2hvdycpO1xuXG5cdCAgICAgIGlmICh0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLm9wZW4gPT09IG51bGwpIHtcblx0ICAgICAgICB0aGlzLnByb21pc2VzLnNob3cgPSBuZXcgX2VzNlByb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0ICAgICAgICAgIHJlc29sdmUoKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmFuaW1hdGlvbi5vcGVuID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgdGhpcy5wcm9taXNlcy5zaG93ID0gbmV3IF9lczZQcm9taXNlMi5kZWZhdWx0KHRoaXMub3B0aW9ucy5hbmltYXRpb24ub3Blbi5iaW5kKHRoaXMpKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBVdGlscy5hZGRDbGFzcyh0aGlzLmJhckRvbSwgdGhpcy5vcHRpb25zLmFuaW1hdGlvbi5vcGVuKTtcblx0ICAgICAgICB0aGlzLnByb21pc2VzLnNob3cgPSBuZXcgX2VzNlByb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0ICAgICAgICAgIFV0aWxzLmFkZExpc3RlbmVyKF90aGlzLmJhckRvbSwgVXRpbHMuYW5pbWF0aW9uRW5kRXZlbnRzLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIFV0aWxzLnJlbW92ZUNsYXNzKF90aGlzLmJhckRvbSwgX3RoaXMub3B0aW9ucy5hbmltYXRpb24ub3Blbik7XG5cdCAgICAgICAgICAgIHJlc29sdmUoKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cblx0ICAgICAgdGhpcy5wcm9taXNlcy5zaG93LnRoZW4oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfdCA9IF90aGlzO1xuXHQgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgQVBJLm9wZW5GbG93KF90KTtcblx0ICAgICAgICB9LCAxMDApO1xuXHQgICAgICB9KTtcblxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblxuXHQgICAgLyoqXG5cdCAgICAgKiBAcmV0dXJuIHtOb3R5fVxuXHQgICAgICovXG5cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzdG9wJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICBBUEkuZGVxdWV1ZUNsb3NlKHRoaXMpO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblxuXHQgICAgLyoqXG5cdCAgICAgKiBAcmV0dXJuIHtOb3R5fVxuXHQgICAgICovXG5cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZXN1bWUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc3VtZSgpIHtcblx0ICAgICAgQVBJLnF1ZXVlQ2xvc2UodGhpcyk7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7aW50fGJvb2xlYW59IG1zXG5cdCAgICAgKiBAcmV0dXJuIHtOb3R5fVxuXHQgICAgICovXG5cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRUaW1lb3V0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiAoX3NldFRpbWVvdXQpIHtcblx0ICAgICAgZnVuY3Rpb24gc2V0VGltZW91dChfeCkge1xuXHQgICAgICAgIHJldHVybiBfc2V0VGltZW91dC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICB9XG5cblx0ICAgICAgc2V0VGltZW91dC50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gX3NldFRpbWVvdXQudG9TdHJpbmcoKTtcblx0ICAgICAgfTtcblxuXHQgICAgICByZXR1cm4gc2V0VGltZW91dDtcblx0ICAgIH0oZnVuY3Rpb24gKG1zKSB7XG5cdCAgICAgIHRoaXMuc3RvcCgpO1xuXHQgICAgICB0aGlzLm9wdGlvbnMudGltZW91dCA9IG1zO1xuXG5cdCAgICAgIGlmICh0aGlzLmJhckRvbSkge1xuXHQgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudGltZW91dCkge1xuXHQgICAgICAgICAgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sICdub3R5X2hhc190aW1lb3V0Jyk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIFV0aWxzLnJlbW92ZUNsYXNzKHRoaXMuYmFyRG9tLCAnbm90eV9oYXNfdGltZW91dCcpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIHZhciBfdCA9IHRoaXM7XG5cdCAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAvLyB1Z2x5IGZpeCBmb3IgcHJvZ3Jlc3NiYXIgZGlzcGxheSBidWdcblx0ICAgICAgICAgIF90LnJlc3VtZSgpO1xuXHQgICAgICAgIH0sIDEwMCk7XG5cdCAgICAgIH1cblxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0pXG5cblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGh0bWxcblx0ICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9uc092ZXJyaWRlXG5cdCAgICAgKiBAcmV0dXJuIHtOb3R5fVxuXHQgICAgICovXG5cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRUZXh0Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUZXh0KGh0bWwpIHtcblx0ICAgICAgdmFyIG9wdGlvbnNPdmVycmlkZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cblx0ICAgICAgaWYgKHRoaXMuYmFyRG9tKSB7XG5cdCAgICAgICAgdGhpcy5iYXJEb20ucXVlcnlTZWxlY3RvcignLm5vdHlfYm9keScpLmlubmVySFRNTCA9IGh0bWw7XG5cdCAgICAgIH1cblxuXHQgICAgICBpZiAob3B0aW9uc092ZXJyaWRlKSB0aGlzLm9wdGlvbnMudGV4dCA9IGh0bWw7XG5cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcblx0ICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9uc092ZXJyaWRlXG5cdCAgICAgKiBAcmV0dXJuIHtOb3R5fVxuXHQgICAgICovXG5cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRUeXBlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUeXBlKHR5cGUpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cblx0ICAgICAgdmFyIG9wdGlvbnNPdmVycmlkZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cblx0ICAgICAgaWYgKHRoaXMuYmFyRG9tKSB7XG5cdCAgICAgICAgdmFyIGNsYXNzTGlzdCA9IFV0aWxzLmNsYXNzTGlzdCh0aGlzLmJhckRvbSkuc3BsaXQoJyAnKTtcblxuXHQgICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG5cdCAgICAgICAgICBpZiAoYy5zdWJzdHJpbmcoMCwgMTEpID09PSAnbm90eV90eXBlX18nKSB7XG5cdCAgICAgICAgICAgIFV0aWxzLnJlbW92ZUNsYXNzKF90aGlzMi5iYXJEb20sIGMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sICdub3R5X3R5cGVfXycgKyB0eXBlKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmIChvcHRpb25zT3ZlcnJpZGUpIHRoaXMub3B0aW9ucy50eXBlID0gdHlwZTtcblxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGhlbWVcblx0ICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9uc092ZXJyaWRlXG5cdCAgICAgKiBAcmV0dXJuIHtOb3R5fVxuXHQgICAgICovXG5cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRUaGVtZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VGhlbWUodGhlbWUpIHtcblx0ICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cblx0ICAgICAgdmFyIG9wdGlvbnNPdmVycmlkZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7XG5cblx0ICAgICAgaWYgKHRoaXMuYmFyRG9tKSB7XG5cdCAgICAgICAgdmFyIGNsYXNzTGlzdCA9IFV0aWxzLmNsYXNzTGlzdCh0aGlzLmJhckRvbSkuc3BsaXQoJyAnKTtcblxuXHQgICAgICAgIGNsYXNzTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7XG5cdCAgICAgICAgICBpZiAoYy5zdWJzdHJpbmcoMCwgMTIpID09PSAnbm90eV90aGVtZV9fJykge1xuXHQgICAgICAgICAgICBVdGlscy5yZW1vdmVDbGFzcyhfdGhpczMuYmFyRG9tLCBjKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIFV0aWxzLmFkZENsYXNzKHRoaXMuYmFyRG9tLCAnbm90eV90aGVtZV9fJyArIHRoZW1lKTtcblx0ICAgICAgfVxuXG5cdCAgICAgIGlmIChvcHRpb25zT3ZlcnJpZGUpIHRoaXMub3B0aW9ucy50aGVtZSA9IHRoZW1lO1xuXG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge05vdHl9XG5cdCAgICAgKi9cblxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2Nsb3NlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHtcblx0ICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cblx0ICAgICAgaWYgKHRoaXMuY2xvc2VkKSByZXR1cm4gdGhpcztcblxuXHQgICAgICBpZiAoIXRoaXMuc2hvd24pIHtcblx0ICAgICAgICAvLyBpdCdzIGluIHRoZSBxdWV1ZVxuXHQgICAgICAgIEFQSS5yZW1vdmVGcm9tUXVldWUodGhpcyk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblxuXHQgICAgICBBUEkuZmlyZSh0aGlzLCAnb25DbG9zZScpO1xuXG5cdCAgICAgIHRoaXMuY2xvc2luZyA9IHRydWU7XG5cblx0ICAgICAgaWYgKHRoaXMub3B0aW9ucy5hbmltYXRpb24uY2xvc2UgPT09IG51bGwgfHwgdGhpcy5vcHRpb25zLmFuaW1hdGlvbi5jbG9zZSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICB0aGlzLnByb21pc2VzLmNsb3NlID0gbmV3IF9lczZQcm9taXNlMi5kZWZhdWx0KGZ1bmN0aW9uIChyZXNvbHZlKSB7XG5cdCAgICAgICAgICByZXNvbHZlKCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5hbmltYXRpb24uY2xvc2UgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICB0aGlzLnByb21pc2VzLmNsb3NlID0gbmV3IF9lczZQcm9taXNlMi5kZWZhdWx0KHRoaXMub3B0aW9ucy5hbmltYXRpb24uY2xvc2UuYmluZCh0aGlzKSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgVXRpbHMuYWRkQ2xhc3ModGhpcy5iYXJEb20sIHRoaXMub3B0aW9ucy5hbmltYXRpb24uY2xvc2UpO1xuXHQgICAgICAgIHRoaXMucHJvbWlzZXMuY2xvc2UgPSBuZXcgX2VzNlByb21pc2UyLmRlZmF1bHQoZnVuY3Rpb24gKHJlc29sdmUpIHtcblx0ICAgICAgICAgIFV0aWxzLmFkZExpc3RlbmVyKF90aGlzNC5iYXJEb20sIFV0aWxzLmFuaW1hdGlvbkVuZEV2ZW50cywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBpZiAoX3RoaXM0Lm9wdGlvbnMuZm9yY2UpIHtcblx0ICAgICAgICAgICAgICBVdGlscy5yZW1vdmUoX3RoaXM0LmJhckRvbSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgQVBJLmdob3N0Rml4KF90aGlzNCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmVzb2x2ZSgpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblxuXHQgICAgICB0aGlzLnByb21pc2VzLmNsb3NlLnRoZW4oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIEFQSS5jbG9zZUZsb3coX3RoaXM0KTtcblx0ICAgICAgICBBUEkuaGFuZGxlTW9kYWxDbG9zZShfdGhpczQpO1xuXHQgICAgICB9KTtcblxuXHQgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG5cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cblx0ICAgIC8vIEFQSSBmdW5jdGlvbnNcblxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge2Jvb2xlYW58c3RyaW5nfSBxdWV1ZU5hbWVcblx0ICAgICAqIEByZXR1cm4ge05vdHl9XG5cdCAgICAgKi9cblxuXHQgIH1dLCBbe1xuXHQgICAga2V5OiAnY2xvc2VBbGwnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlQWxsKCkge1xuXHQgICAgICB2YXIgcXVldWVOYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBmYWxzZTtcblxuXHQgICAgICBPYmplY3Qua2V5cyhBUEkuU3RvcmUpLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7XG5cdCAgICAgICAgaWYgKHF1ZXVlTmFtZSkge1xuXHQgICAgICAgICAgaWYgKEFQSS5TdG9yZVtpZF0ub3B0aW9ucy5xdWV1ZSA9PT0gcXVldWVOYW1lICYmIEFQSS5TdG9yZVtpZF0ua2lsbGFibGUpIHtcblx0ICAgICAgICAgICAgQVBJLlN0b3JlW2lkXS5jbG9zZSgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoQVBJLlN0b3JlW2lkXS5raWxsYWJsZSkge1xuXHQgICAgICAgICAgQVBJLlN0b3JlW2lkXS5jbG9zZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZU5hbWVcblx0ICAgICAqIEByZXR1cm4ge05vdHl9XG5cdCAgICAgKi9cblxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2NsZWFyUXVldWUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyUXVldWUoKSB7XG5cdCAgICAgIHZhciBxdWV1ZU5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICdnbG9iYWwnO1xuXG5cdCAgICAgIGlmIChBUEkuUXVldWVzLmhhc093blByb3BlcnR5KHF1ZXVlTmFtZSkpIHtcblx0ICAgICAgICBBUEkuUXVldWVzW3F1ZXVlTmFtZV0ucXVldWUgPSBbXTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblxuXHQgICAgLyoqXG5cdCAgICAgKiBAcmV0dXJuIHtBUEkuUXVldWVzfVxuXHQgICAgICovXG5cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvdmVycmlkZURlZmF1bHRzJyxcblxuXG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICAgICAqIEByZXR1cm4ge05vdHl9XG5cdCAgICAgKi9cblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvdmVycmlkZURlZmF1bHRzKG9iaikge1xuXHQgICAgICBBUEkuRGVmYXVsdHMgPSBVdGlscy5kZWVwRXh0ZW5kKHt9LCBBUEkuRGVmYXVsdHMsIG9iaik7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbSB7aW50fSBhbW91bnRcblx0ICAgICAqIEBwYXJhbSB7c3RyaW5nfSBxdWV1ZU5hbWVcblx0ICAgICAqIEByZXR1cm4ge05vdHl9XG5cdCAgICAgKi9cblxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3NldE1heFZpc2libGUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldE1heFZpc2libGUoKSB7XG5cdCAgICAgIHZhciBhbW91bnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IEFQSS5EZWZhdWx0TWF4VmlzaWJsZTtcblx0ICAgICAgdmFyIHF1ZXVlTmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2dsb2JhbCc7XG5cblx0ICAgICAgaWYgKCFBUEkuUXVldWVzLmhhc093blByb3BlcnR5KHF1ZXVlTmFtZSkpIHtcblx0ICAgICAgICBBUEkuUXVldWVzW3F1ZXVlTmFtZV0gPSB7IG1heFZpc2libGU6IGFtb3VudCwgcXVldWU6IFtdIH07XG5cdCAgICAgIH1cblxuXHQgICAgICBBUEkuUXVldWVzW3F1ZXVlTmFtZV0ubWF4VmlzaWJsZSA9IGFtb3VudDtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtIHtzdHJpbmd9IGlubmVySHRtbFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzZXNcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gYXR0cmlidXRlc1xuXHQgICAgICogQHJldHVybiB7Tm90eUJ1dHRvbn1cblx0ICAgICAqL1xuXG5cdCAgfSwge1xuXHQgICAga2V5OiAnYnV0dG9uJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBidXR0b24oaW5uZXJIdG1sKSB7XG5cdCAgICAgIHZhciBjbGFzc2VzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsO1xuXHQgICAgICB2YXIgY2IgPSBhcmd1bWVudHNbMl07XG5cdCAgICAgIHZhciBhdHRyaWJ1dGVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcblxuXHQgICAgICByZXR1cm4gbmV3IF9idXR0b24uTm90eUJ1dHRvbihpbm5lckh0bWwsIGNsYXNzZXMsIGNiLCBhdHRyaWJ1dGVzKTtcblx0ICAgIH1cblxuXHQgICAgLyoqXG5cdCAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG5cdCAgICAgKi9cblxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3ZlcnNpb24nLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHZlcnNpb24oKSB7XG5cdCAgICAgIHJldHVybiBcIjMuMi4wLWJldGFcIjtcblx0ICAgIH1cblxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gd29ya2VyUGF0aFxuXHQgICAgICogQHJldHVybiB7UHVzaH1cblx0ICAgICAqL1xuXG5cdCAgfSwge1xuXHQgICAga2V5OiAnUHVzaCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gUHVzaCh3b3JrZXJQYXRoKSB7XG5cdCAgICAgIHJldHVybiBuZXcgX3B1c2guUHVzaCh3b3JrZXJQYXRoKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdRdWV1ZXMnLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiBBUEkuUXVldWVzO1xuXHQgICAgfVxuXG5cdCAgICAvKipcblx0ICAgICAqIEByZXR1cm4ge0FQSS5QYWdlSGlkZGVufVxuXHQgICAgICovXG5cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdQYWdlSGlkZGVuJyxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gQVBJLlBhZ2VIaWRkZW47XG5cdCAgICB9XG5cdCAgfV0pO1xuXG5cdCAgcmV0dXJuIE5vdHk7XG5cdH0oKTtcblxuXHQvLyBEb2N1bWVudCB2aXNpYmlsaXR5IGNoYW5nZSBjb250cm9sbGVyXG5cblxuXHRleHBvcnRzLmRlZmF1bHQgPSBOb3R5O1xuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICBVdGlscy52aXNpYmlsaXR5Q2hhbmdlRmxvdygpO1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO1xuXG5cdC8qKiovIH0pLFxuXHQvKiA3ICovXG5cdC8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG5cdHZhciBjYWNoZWRTZXRUaW1lb3V0O1xuXHR2YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5cdGZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHRmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0gKCkpO1xuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cblxuXHR9XG5cdGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcblx0ICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpe1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cblx0ICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cblxuXG5cdH1cblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZShsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0fVxuXG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdHByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxuXHRwcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9O1xuXG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXHQvKioqLyB9KSxcblx0LyogOCAqL1xuXHQvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIGc7XHJcblxyXG5cdC8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcblx0ZyA9IChmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0pKCk7XHJcblxyXG5cdHRyeSB7XHJcblx0XHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRcdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcblx0fSBjYXRjaChlKSB7XHJcblx0XHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdFx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdFx0ZyA9IHdpbmRvdztcclxuXHR9XHJcblxyXG5cdC8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuXHQvLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG5cdC8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcblx0bW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuXHQvKioqLyB9KSxcblx0LyogOSAqL1xuXHQvKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogKGlnbm9yZWQpICovXG5cblx0LyoqKi8gfSlcblx0LyoqKioqKi8gXSk7XG5cdH0pO1xuXHRcbn0gKG5vdHkkMSkpO1xuXG52YXIgTm90eSA9IC8qQF9fUFVSRV9fKi9nZXREZWZhdWx0RXhwb3J0RnJvbUNqcyhub3R5JDEuZXhwb3J0cyk7XG5cbnZhciBlPVtdLHQ9W107ZnVuY3Rpb24gbihuLHIpe2lmKG4mJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCl7dmFyIGEscz0hMD09PXIucHJlcGVuZD9cInByZXBlbmRcIjpcImFwcGVuZFwiLGQ9ITA9PT1yLnNpbmdsZVRhZyxpPVwic3RyaW5nXCI9PXR5cGVvZiByLmNvbnRhaW5lcj9kb2N1bWVudC5xdWVyeVNlbGVjdG9yKHIuY29udGFpbmVyKTpkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07aWYoZCl7dmFyIHU9ZS5pbmRleE9mKGkpOy0xPT09dSYmKHU9ZS5wdXNoKGkpLTEsdFt1XT17fSksYT10W3VdJiZ0W3VdW3NdP3RbdV1bc106dFt1XVtzXT1jKCk7fWVsc2UgYT1jKCk7NjUyNzk9PT1uLmNoYXJDb2RlQXQoMCkmJihuPW4uc3Vic3RyaW5nKDEpKSxhLnN0eWxlU2hlZXQ/YS5zdHlsZVNoZWV0LmNzc1RleHQrPW46YS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuKSk7fWZ1bmN0aW9uIGMoKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7aWYoZS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0L2Nzc1wiKSxyLmF0dHJpYnV0ZXMpZm9yKHZhciB0PU9iamVjdC5rZXlzKHIuYXR0cmlidXRlcyksbj0wO248dC5sZW5ndGg7bisrKWUuc2V0QXR0cmlidXRlKHRbbl0sci5hdHRyaWJ1dGVzW3Rbbl1dKTt2YXIgYT1cInByZXBlbmRcIj09PXM/XCJhZnRlcmJlZ2luXCI6XCJiZWZvcmVlbmRcIjtyZXR1cm4gaS5pbnNlcnRBZGphY2VudEVsZW1lbnQoYSxlKSxlfX1cblxudmFyIGNzcyQxID0gXCIubm90eV9sYXlvdXRfbWl4aW4sICNub3R5X2xheW91dF9fdG9wLCAjbm90eV9sYXlvdXRfX3RvcExlZnQsICNub3R5X2xheW91dF9fdG9wQ2VudGVyLCAjbm90eV9sYXlvdXRfX3RvcFJpZ2h0LCAjbm90eV9sYXlvdXRfX2JvdHRvbSwgI25vdHlfbGF5b3V0X19ib3R0b21MZWZ0LCAjbm90eV9sYXlvdXRfX2JvdHRvbUNlbnRlciwgI25vdHlfbGF5b3V0X19ib3R0b21SaWdodCwgI25vdHlfbGF5b3V0X19jZW50ZXIsICNub3R5X2xheW91dF9fY2VudGVyTGVmdCwgI25vdHlfbGF5b3V0X19jZW50ZXJSaWdodHtcXG4gIHBvc2l0aW9uOmZpeGVkO1xcbiAgbWFyZ2luOjA7XFxuICBwYWRkaW5nOjA7XFxuICB6LWluZGV4Ojk5OTk5OTk7XFxuICAtd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVaKDApIHNjYWxlKDEsIDEpO1xcbiAgICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlWigwKSBzY2FsZSgxLCAxKTtcXG4gIC13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47XFxuICAgICAgICAgIGJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO1xcbiAgLXdlYmtpdC1mb250LXNtb290aGluZzpzdWJwaXhlbC1hbnRpYWxpYXNlZDtcXG4gIGZpbHRlcjpibHVyKDApO1xcbiAgLXdlYmtpdC1maWx0ZXI6Ymx1cigwKTtcXG4gIG1heC13aWR0aDo5MCU7IH1cXG5cXG4jbm90eV9sYXlvdXRfX3RvcHtcXG4gIHRvcDowO1xcbiAgbGVmdDo1JTtcXG4gIHdpZHRoOjkwJTsgfVxcblxcbiNub3R5X2xheW91dF9fdG9wTGVmdHtcXG4gIHRvcDoyMHB4O1xcbiAgbGVmdDoyMHB4O1xcbiAgd2lkdGg6MzI1cHg7IH1cXG5cXG4jbm90eV9sYXlvdXRfX3RvcENlbnRlcntcXG4gIHRvcDo1JTtcXG4gIGxlZnQ6NTAlO1xcbiAgd2lkdGg6MzI1cHg7XFxuICAtd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoLXdlYmtpdC1jYWxjKC01MCUgLSAuNXB4KSkgdHJhbnNsYXRlWigwKSBzY2FsZSgxLCAxKTtcXG4gICAgICAgICAgdHJhbnNmb3JtOnRyYW5zbGF0ZShjYWxjKC01MCUgLSAuNXB4KSkgdHJhbnNsYXRlWigwKSBzY2FsZSgxLCAxKTsgfVxcblxcbiNub3R5X2xheW91dF9fdG9wUmlnaHR7XFxuICB0b3A6MjBweDtcXG4gIHJpZ2h0OjIwcHg7XFxuICB3aWR0aDozMjVweDsgfVxcblxcbiNub3R5X2xheW91dF9fYm90dG9te1xcbiAgYm90dG9tOjA7XFxuICBsZWZ0OjUlO1xcbiAgd2lkdGg6OTAlOyB9XFxuXFxuI25vdHlfbGF5b3V0X19ib3R0b21MZWZ0e1xcbiAgYm90dG9tOjIwcHg7XFxuICBsZWZ0OjIwcHg7XFxuICB3aWR0aDozMjVweDsgfVxcblxcbiNub3R5X2xheW91dF9fYm90dG9tQ2VudGVye1xcbiAgYm90dG9tOjUlO1xcbiAgbGVmdDo1MCU7XFxuICB3aWR0aDozMjVweDtcXG4gIC13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSgtd2Via2l0LWNhbGMoLTUwJSAtIC41cHgpKSB0cmFuc2xhdGVaKDApIHNjYWxlKDEsIDEpO1xcbiAgICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKGNhbGMoLTUwJSAtIC41cHgpKSB0cmFuc2xhdGVaKDApIHNjYWxlKDEsIDEpOyB9XFxuXFxuI25vdHlfbGF5b3V0X19ib3R0b21SaWdodHtcXG4gIGJvdHRvbToyMHB4O1xcbiAgcmlnaHQ6MjBweDtcXG4gIHdpZHRoOjMyNXB4OyB9XFxuXFxuI25vdHlfbGF5b3V0X19jZW50ZXJ7XFxuICB0b3A6NTAlO1xcbiAgbGVmdDo1MCU7XFxuICB3aWR0aDozMjVweDtcXG4gIC13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSgtd2Via2l0LWNhbGMoLTUwJSAtIC41cHgpLCAtd2Via2l0LWNhbGMoLTUwJSAtIC41cHgpKSB0cmFuc2xhdGVaKDApIHNjYWxlKDEsIDEpO1xcbiAgICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKGNhbGMoLTUwJSAtIC41cHgpLCBjYWxjKC01MCUgLSAuNXB4KSkgdHJhbnNsYXRlWigwKSBzY2FsZSgxLCAxKTsgfVxcblxcbiNub3R5X2xheW91dF9fY2VudGVyTGVmdHtcXG4gIHRvcDo1MCU7XFxuICBsZWZ0OjIwcHg7XFxuICB3aWR0aDozMjVweDtcXG4gIC13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSgwLCAtd2Via2l0LWNhbGMoLTUwJSAtIC41cHgpKSB0cmFuc2xhdGVaKDApIHNjYWxlKDEsIDEpO1xcbiAgICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKDAsIGNhbGMoLTUwJSAtIC41cHgpKSB0cmFuc2xhdGVaKDApIHNjYWxlKDEsIDEpOyB9XFxuXFxuI25vdHlfbGF5b3V0X19jZW50ZXJSaWdodHtcXG4gIHRvcDo1MCU7XFxuICByaWdodDoyMHB4O1xcbiAgd2lkdGg6MzI1cHg7XFxuICAtd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoMCwgLXdlYmtpdC1jYWxjKC01MCUgLSAuNXB4KSkgdHJhbnNsYXRlWigwKSBzY2FsZSgxLCAxKTtcXG4gICAgICAgICAgdHJhbnNmb3JtOnRyYW5zbGF0ZSgwLCBjYWxjKC01MCUgLSAuNXB4KSkgdHJhbnNsYXRlWigwKSBzY2FsZSgxLCAxKTsgfVxcblxcbi5ub3R5X3Byb2dyZXNzYmFye1xcbiAgZGlzcGxheTpub25lOyB9XFxuXFxuLm5vdHlfaGFzX3RpbWVvdXQubm90eV9oYXNfcHJvZ3Jlc3NiYXIgLm5vdHlfcHJvZ3Jlc3NiYXJ7XFxuICBkaXNwbGF5OmJsb2NrO1xcbiAgcG9zaXRpb246YWJzb2x1dGU7XFxuICBsZWZ0OjA7XFxuICBib3R0b206MDtcXG4gIGhlaWdodDozcHg7XFxuICB3aWR0aDoxMDAlO1xcbiAgYmFja2dyb3VuZC1jb2xvcjojNjQ2NDY0O1xcbiAgb3BhY2l0eTowLjI7XFxuICBmaWx0ZXI6YWxwaGEob3BhY2l0eT0xMCk7IH1cXG5cXG4ubm90eV9iYXJ7XFxuICAtd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVuO1xcbiAgLXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlKDAsIDApIHRyYW5zbGF0ZVooMCkgc2NhbGUoMSwgMSk7XFxuICAtbXMtdHJhbnNmb3JtOnRyYW5zbGF0ZSgwLCAwKSBzY2FsZSgxLCAxKTtcXG4gICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKDAsIDApIHNjYWxlKDEsIDEpO1xcbiAgLXdlYmtpdC1mb250LXNtb290aGluZzpzdWJwaXhlbC1hbnRpYWxpYXNlZDtcXG4gIG92ZXJmbG93OmhpZGRlbjsgfVxcblxcbi5ub3R5X2VmZmVjdHNfb3BlbntcXG4gIG9wYWNpdHk6MDtcXG4gIC13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSg1MCUpO1xcbiAgICAgIC1tcy10cmFuc2Zvcm06dHJhbnNsYXRlKDUwJSk7XFxuICAgICAgICAgIHRyYW5zZm9ybTp0cmFuc2xhdGUoNTAlKTtcXG4gIC13ZWJraXQtYW5pbWF0aW9uOm5vdHlfYW5pbV9pbiAwLjVzIGN1YmljLWJlemllcigwLjY4LCAtMC41NSwgMC4yNjUsIDEuNTUpO1xcbiAgICAgICAgICBhbmltYXRpb246bm90eV9hbmltX2luIDAuNXMgY3ViaWMtYmV6aWVyKDAuNjgsIC0wLjU1LCAwLjI2NSwgMS41NSk7XFxuICAtd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6Zm9yd2FyZHM7XFxuICAgICAgICAgIGFuaW1hdGlvbi1maWxsLW1vZGU6Zm9yd2FyZHM7IH1cXG5cXG4ubm90eV9lZmZlY3RzX2Nsb3Nle1xcbiAgLXdlYmtpdC1hbmltYXRpb246bm90eV9hbmltX291dCAwLjVzIGN1YmljLWJlemllcigwLjY4LCAtMC41NSwgMC4yNjUsIDEuNTUpO1xcbiAgICAgICAgICBhbmltYXRpb246bm90eV9hbmltX291dCAwLjVzIGN1YmljLWJlemllcigwLjY4LCAtMC41NSwgMC4yNjUsIDEuNTUpO1xcbiAgLXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOmZvcndhcmRzO1xcbiAgICAgICAgICBhbmltYXRpb24tZmlsbC1tb2RlOmZvcndhcmRzOyB9XFxuXFxuLm5vdHlfZml4X2VmZmVjdHNfaGVpZ2h0e1xcbiAgLXdlYmtpdC1hbmltYXRpb246bm90eV9hbmltX2hlaWdodCA3NW1zIGVhc2Utb3V0O1xcbiAgICAgICAgICBhbmltYXRpb246bm90eV9hbmltX2hlaWdodCA3NW1zIGVhc2Utb3V0OyB9XFxuXFxuLm5vdHlfY2xvc2Vfd2l0aF9jbGlja3tcXG4gIGN1cnNvcjpwb2ludGVyOyB9XFxuXFxuLm5vdHlfY2xvc2VfYnV0dG9ue1xcbiAgcG9zaXRpb246YWJzb2x1dGU7XFxuICB0b3A6MnB4O1xcbiAgcmlnaHQ6MnB4O1xcbiAgZm9udC13ZWlnaHQ6Ym9sZDtcXG4gIHdpZHRoOjIwcHg7XFxuICBoZWlnaHQ6MjBweDtcXG4gIHRleHQtYWxpZ246Y2VudGVyO1xcbiAgbGluZS1oZWlnaHQ6MjBweDtcXG4gIGJhY2tncm91bmQtY29sb3I6cmdiYSgwLCAwLCAwLCAwLjA1KTtcXG4gIGJvcmRlci1yYWRpdXM6MnB4O1xcbiAgY3Vyc29yOnBvaW50ZXI7XFxuICAtd2Via2l0LXRyYW5zaXRpb246YWxsIC4ycyBlYXNlLW91dDtcXG4gIHRyYW5zaXRpb246YWxsIC4ycyBlYXNlLW91dDsgfVxcblxcbi5ub3R5X2Nsb3NlX2J1dHRvbjpob3ZlcntcXG4gIGJhY2tncm91bmQtY29sb3I6cmdiYSgwLCAwLCAwLCAwLjEpOyB9XFxuXFxuLm5vdHlfbW9kYWx7XFxuICBwb3NpdGlvbjpmaXhlZDtcXG4gIHdpZHRoOjEwMCU7XFxuICBoZWlnaHQ6MTAwJTtcXG4gIGJhY2tncm91bmQtY29sb3I6IzAwMDtcXG4gIHotaW5kZXg6MTAwMDA7XFxuICBvcGFjaXR5Oi4zO1xcbiAgbGVmdDowO1xcbiAgdG9wOjA7IH1cXG5cXG4ubm90eV9tb2RhbC5ub3R5X21vZGFsX29wZW57XFxuICBvcGFjaXR5OjA7XFxuICAtd2Via2l0LWFuaW1hdGlvbjpub3R5X21vZGFsX2luIC4zcyBlYXNlLW91dDtcXG4gICAgICAgICAgYW5pbWF0aW9uOm5vdHlfbW9kYWxfaW4gLjNzIGVhc2Utb3V0OyB9XFxuXFxuLm5vdHlfbW9kYWwubm90eV9tb2RhbF9jbG9zZXtcXG4gIC13ZWJraXQtYW5pbWF0aW9uOm5vdHlfbW9kYWxfb3V0IC4zcyBlYXNlLW91dDtcXG4gICAgICAgICAgYW5pbWF0aW9uOm5vdHlfbW9kYWxfb3V0IC4zcyBlYXNlLW91dDtcXG4gIC13ZWJraXQtYW5pbWF0aW9uLWZpbGwtbW9kZTpmb3J3YXJkcztcXG4gICAgICAgICAgYW5pbWF0aW9uLWZpbGwtbW9kZTpmb3J3YXJkczsgfVxcblxcbkAtd2Via2l0LWtleWZyYW1lcyBub3R5X21vZGFsX2lue1xcbiAgMTAwJXtcXG4gICAgb3BhY2l0eTouMzsgfSB9XFxuXFxuQGtleWZyYW1lcyBub3R5X21vZGFsX2lue1xcbiAgMTAwJXtcXG4gICAgb3BhY2l0eTouMzsgfSB9XFxuXFxuQC13ZWJraXQta2V5ZnJhbWVzIG5vdHlfbW9kYWxfb3V0e1xcbiAgMTAwJXtcXG4gICAgb3BhY2l0eTowOyB9IH1cXG5cXG5Aa2V5ZnJhbWVzIG5vdHlfbW9kYWxfb3V0e1xcbiAgMTAwJXtcXG4gICAgb3BhY2l0eTowOyB9IH1cXG5cXG5Aa2V5ZnJhbWVzIG5vdHlfbW9kYWxfb3V0e1xcbiAgMTAwJXtcXG4gICAgb3BhY2l0eTowOyB9IH1cXG5cXG5ALXdlYmtpdC1rZXlmcmFtZXMgbm90eV9hbmltX2lue1xcbiAgMTAwJXtcXG4gICAgLXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlKDApO1xcbiAgICAgICAgICAgIHRyYW5zZm9ybTp0cmFuc2xhdGUoMCk7XFxuICAgIG9wYWNpdHk6MTsgfSB9XFxuXFxuQGtleWZyYW1lcyBub3R5X2FuaW1faW57XFxuICAxMDAle1xcbiAgICAtd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoMCk7XFxuICAgICAgICAgICAgdHJhbnNmb3JtOnRyYW5zbGF0ZSgwKTtcXG4gICAgb3BhY2l0eToxOyB9IH1cXG5cXG5ALXdlYmtpdC1rZXlmcmFtZXMgbm90eV9hbmltX291dHtcXG4gIDEwMCV7XFxuICAgIC13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSg1MCUpO1xcbiAgICAgICAgICAgIHRyYW5zZm9ybTp0cmFuc2xhdGUoNTAlKTtcXG4gICAgb3BhY2l0eTowOyB9IH1cXG5cXG5Aa2V5ZnJhbWVzIG5vdHlfYW5pbV9vdXR7XFxuICAxMDAle1xcbiAgICAtd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoNTAlKTtcXG4gICAgICAgICAgICB0cmFuc2Zvcm06dHJhbnNsYXRlKDUwJSk7XFxuICAgIG9wYWNpdHk6MDsgfSB9XFxuXFxuQC13ZWJraXQta2V5ZnJhbWVzIG5vdHlfYW5pbV9oZWlnaHR7XFxuICAxMDAle1xcbiAgICBoZWlnaHQ6MDsgfSB9XFxuXFxuQGtleWZyYW1lcyBub3R5X2FuaW1faGVpZ2h0e1xcbiAgMTAwJXtcXG4gICAgaGVpZ2h0OjA7IH0gfVxcblwiO1xubihjc3MkMSx7fSk7XG5cbnZhciBjc3MgPSBcIi5ub3R5X3RoZW1lX19taW50Lm5vdHlfYmFye1xcbiAgbWFyZ2luOjRweCAwO1xcbiAgb3ZlcmZsb3c6aGlkZGVuO1xcbiAgYm9yZGVyLXJhZGl1czoycHg7XFxuICBwb3NpdGlvbjpyZWxhdGl2ZTsgfVxcbiAgLm5vdHlfdGhlbWVfX21pbnQubm90eV9iYXIgLm5vdHlfYm9keXtcXG4gICAgcGFkZGluZzoxMHB4O1xcbiAgICBmb250LXNpemU6MTRweDsgfVxcbiAgLm5vdHlfdGhlbWVfX21pbnQubm90eV9iYXIgLm5vdHlfYnV0dG9uc3tcXG4gICAgcGFkZGluZzoxMHB4OyB9XFxuXFxuLm5vdHlfdGhlbWVfX21pbnQubm90eV90eXBlX19hbGVydCxcXG4ubm90eV90aGVtZV9fbWludC5ub3R5X3R5cGVfX25vdGlmaWNhdGlvbntcXG4gIGJhY2tncm91bmQtY29sb3I6I2ZmZjtcXG4gIGJvcmRlci1ib3R0b206MXB4IHNvbGlkICNEMUQxRDE7XFxuICBjb2xvcjojMkYyRjJGOyB9XFxuXFxuLm5vdHlfdGhlbWVfX21pbnQubm90eV90eXBlX193YXJuaW5ne1xcbiAgYmFja2dyb3VuZC1jb2xvcjojRkZBRTQyO1xcbiAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI0U4OUYzQztcXG4gIGNvbG9yOiNmZmY7IH1cXG5cXG4ubm90eV90aGVtZV9fbWludC5ub3R5X3R5cGVfX2Vycm9ye1xcbiAgYmFja2dyb3VuZC1jb2xvcjojREU2MzZGO1xcbiAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI0NBNUE2NTtcXG4gIGNvbG9yOiNmZmY7IH1cXG5cXG4ubm90eV90aGVtZV9fbWludC5ub3R5X3R5cGVfX2luZm8sXFxuLm5vdHlfdGhlbWVfX21pbnQubm90eV90eXBlX19pbmZvcm1hdGlvbntcXG4gIGJhY2tncm91bmQtY29sb3I6IzdGN0VGRjtcXG4gIGJvcmRlci1ib3R0b206MXB4IHNvbGlkICM3NDczRTg7XFxuICBjb2xvcjojZmZmOyB9XFxuXFxuLm5vdHlfdGhlbWVfX21pbnQubm90eV90eXBlX19zdWNjZXNze1xcbiAgYmFja2dyb3VuZC1jb2xvcjojQUZDNzY1O1xcbiAgYm9yZGVyLWJvdHRvbToxcHggc29saWQgI0EwQjU1QztcXG4gIGNvbG9yOiNmZmY7IH1cXG5cIjtcbm4oY3NzLHt9KTtcblxudmFyIE5vdHlGYWN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOb3R5RmFjdG9yeSgpIHtcbiAgICB9XG4gICAgTm90eUZhY3RvcnkucHJvdG90eXBlLnN1Y2Nlc3MgPSBmdW5jdGlvbiAobWVzc2FnZSwgdGl0bGUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5mbGFzaCgnc3VjY2VzcycsIG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIE5vdHlGYWN0b3J5LnByb3RvdHlwZS5pbmZvID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZmxhc2goJ2luZm8nLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucyk7XG4gICAgfTtcbiAgICBOb3R5RmFjdG9yeS5wcm90b3R5cGUud2FybmluZyA9IGZ1bmN0aW9uIChtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLmZsYXNoKCd3YXJuaW5nJywgbWVzc2FnZSwgdGl0bGUsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgTm90eUZhY3RvcnkucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuZmxhc2goJ2Vycm9yJywgbWVzc2FnZSwgdGl0bGUsIG9wdGlvbnMpO1xuICAgIH07XG4gICAgTm90eUZhY3RvcnkucHJvdG90eXBlLmZsYXNoID0gZnVuY3Rpb24gKHR5cGUsIG1lc3NhZ2UsIHRpdGxlLCBvcHRpb25zKSB7XG4gICAgICAgIHZhciBub3RpZmljYXRpb24gPSB0aGlzLmNyZWF0ZU5vdGlmaWNhdGlvbih0eXBlLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMucmVuZGVyT3B0aW9ucyh7fSk7XG4gICAgICAgIHRoaXMucmVuZGVyKHsgbm90aWZpY2F0aW9uOiBub3RpZmljYXRpb24gfSk7XG4gICAgfTtcbiAgICBOb3R5RmFjdG9yeS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGVudmVsb3BlKSB7XG4gICAgICAgIHZhciBub3RpZmljYXRpb24gPSBlbnZlbG9wZS5ub3RpZmljYXRpb247XG4gICAgICAgIG5vdGlmaWNhdGlvbi50eXBlID0gbm90aWZpY2F0aW9uLnR5cGUgfHwgJ2luZm8nO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IF9fYXNzaWduKHsgdGV4dDogbm90aWZpY2F0aW9uLm1lc3NhZ2UsIHR5cGU6IG5vdGlmaWNhdGlvbi50eXBlIH0sIG5vdGlmaWNhdGlvbi5vcHRpb25zKTtcbiAgICAgICAgbmV3IE5vdHkob3B0aW9ucykuc2hvdygpO1xuICAgIH07XG4gICAgTm90eUZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZU5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlLCB0aXRsZSwgb3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBvcHRpb25zID0gdHlwZTtcbiAgICAgICAgICAgIHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gICAgICAgICAgICBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xuICAgICAgICAgICAgdGl0bGUgPSBvcHRpb25zLnRpdGxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IG1lc3NhZ2U7XG4gICAgICAgICAgICBtZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xuICAgICAgICAgICAgdGl0bGUgPSBvcHRpb25zLnRpdGxlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB0aXRsZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSB0aXRsZTtcbiAgICAgICAgICAgIHRpdGxlID0gb3B0aW9ucy50aXRsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodW5kZWZpbmVkID09PSBtZXNzYWdlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21lc3NhZ2Ugb3B0aW9uIGlzIHJlcXVpcmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHR5cGUgfHwgJ2luZm8nLFxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSxcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIE5vdHlGYWN0b3J5LnByb3RvdHlwZS5yZW5kZXJPcHRpb25zID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgTm90eS5vdmVycmlkZURlZmF1bHRzKF9fYXNzaWduKHsgdGltZW91dDogb3B0aW9ucy50aW1lb3V0IHx8IDUwMDAgfSwgb3B0aW9ucykpO1xuICAgIH07XG4gICAgcmV0dXJuIE5vdHlGYWN0b3J5O1xufSgpKTtcblxudmFyIG5vdHkgPSBuZXcgTm90eUZhY3RvcnkoKTtcbmZsYXNoZXJfX2RlZmF1bHRbXCJkZWZhdWx0XCJdLmFkZEZhY3RvcnkoJ25vdHknLCBub3R5KTtcblxubW9kdWxlLmV4cG9ydHMgPSBub3R5O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9